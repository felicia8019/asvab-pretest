
<!DOCTYPE html>
<html lang="en">
<head>
<!--
ASVAB Practice App — Update‑Safe Template
Do‑not‑rename IDs/classes (treat as public API):
  #home, #recruiter, #applicant, #login-card, #recruiterPass, #loginBtn, #recruiterLoginMsg, #gen-code,
  #appCode, #appMsg, #codes-tbody, #results-tbody, #runner, #submitBtn, #saveNextBtn, #prevBtn,
  #subject-badge, #qnum, #qtotal, #qtext, #choices, #progress-bar, #afqt-bar, #afqt-val, .hidden

SAFE EXTENSION ZONES (ok to edit/add inside these markers; core logic will not be touched):
  <!-- BEGIN:EXT_STYLES --> ... <!-- END:EXT_STYLES -->
  <!-- BEGIN:EXT_COMPONENTS --> ... <!-- END:EXT_COMPONENTS -->
  



<!-- (Developer notes moved into dropdown) -->

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ASVAB Practice — Superscripts + Strict Subjects</title>
<style>:root{--bg:#0b1220;--ink:#e5e7eb;--muted:#9fb3d9;--card:#0f172a;--line:#233044;--blue:#60a5fa;--green:#22c55e;--amber:#f59e0b;--red:#ef4444}
  *{box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
  body{margin:0;background:linear-gradient(180deg,#071021,#0b1220);color:var(--ink)}
  .wrap{max-width:1180px;margin:20px auto;padding:12px}
  .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:16px;margin-bottom:14px}
  h1{margin:.2em 0;font-size:1.35rem}
  h2{margin:.2em 0;font-size:1.1rem;color:var(--muted)}
  .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .between{justify-content:space-between}
  .note{font-size:.92rem;color:var(--muted)}
  input,select{padding:10px;border:1px solid var(--line);background:#0b1220;color:var(--ink);border-radius:10px}
  button{padding:8px 12px;border-radius:10px;border:1px solid var(--line);background:#1a2336;color:var(--ink);cursor:pointer}
  button.primary{background:var(--blue);color:#081127;border:0}
  button.good{background:var(--green);color:#08160e;border:0}
  .subject-badge{display:inline-block;padding:.15rem .5rem;border:1px solid var(--line);border-radius:999px;background:#0b1426;color:#b8c7e0;font-size:.8rem}
  .choice{display:flex;gap:10px;align-items:flex-start;padding:8px;border:1px solid var(--line);border-radius:10px;margin-bottom:8px;background:#0b1528}
  .progress{height:10px;background:#13203a;border-radius:999px;overflow:hidden}
  .progress>span{display:block;height:100%;background:#60a5fa;width:0%}
  .hidden{display:none}

/* EXT: Persistent Exit button on applicant pages */
#exit-to-home {
  position: absolute;
  top: 12px;
  right: 12px;
  padding: 8px 14px;
  border: 0;
  border-radius: 10px;
  background: var(--blue, #3b82f6);
  color: #081127;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 2px 8px rgba(0,0,0,.25);
}
#exit-to-home:active { transform: translateY(1px); }

</style>

<style>
  #rp-login-min, #rp-login-msg { display: none !important; }
</style>


<style id="hard-hide-global">
/* Hide common dev/debug/banner blocks anywhere in the app */
details#dev-notes,
#dev-notes,
.dev-notes,
.devBanner,
.debug-notes,
.release-notes,
[data-dev-note],
[data-banner],
[data-debug],
[id*="dev-notes" i],
[class*="dev-notes" i],
[id*="devbanner" i],
[class*="devbanner" i],
[id*="debug" i],
[class*="debug" i],
[id*="release-notes" i],
[class*="release-notes" i] {
  display: none !important;
  visibility: hidden !important;
}
</style>
</head>
<body>

<!-- BEGIN: DEV_NOTES_DROPDOWN -->
<style>
  details
  details#dev-notes[open] { box-shadow: 0 14px 36px rgba(0,0,0,.45); }
  details#dev-notes > summary {
    cursor: pointer; padding: 10px 12px; list-style: none; outline: none;
    font-weight: 800; letter-spacing: .3px; color: #bfefff;
    border-bottom: 1px solid #1e242c;
    background: rgba(7,213,255,.06);
  }
  details#dev-notes > summary::-webkit-details-marker { display: none; }
  details#dev-notes pre { 
    margin: 0; padding: 12px; font: 12.5px/1.5 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    color: #cfe8ff; white-space: pre-wrap; word-break: break-word; 
    background: transparent;
  }
</style>

<!-- END: DEV_NOTES_DROPDOWN -->


<div class="wrap">
  <section id="home" class="card">
    <h1>ASVAB Practice App</h1>
    <p class="note">Recruiters sign in with passcode. Applicants use a one‑time code generated by a recruiter for a specific test.</p>
    <div id="login-card" class="card">
      <h2>Recruiter Sign In</h2>
      <div class="row">
        <input id="recruiterPass" type="password" placeholder="Recruiter passcode" onkeydown="if(event.key==='Enter') recruiterLogin()" / autocomplete="off">
        <button id="loginBtn" class="primary" type="button" onclick="recruiterLogin()">Sign In</button>
      </div>
      <div id="recruiterLoginMsg" style="min-height:22px;margin-top:6px;color:#fca5a5"></div>
    </div>

    <div class="card" style="margin-top:12px">
      <h2>Applicant Start</h2>
      <div class="row">
        <input id="appCode" placeholder="Enter applicant code" onkeydown="if(event.key==='Enter') startApplicant()"/>
        <button class="good" type="button" onclick="startApplicant()">Start</button>
      </div>
      <div id="appMsg" style="min-height:22px;margin-top:6px;color:#fca5a5"></div>
    </div>
  </section>

  <section id="recruiter" class="card hidden">
    <div class="row between">
      <div>
        <h2>Recruiter Console</h2>
        <p class="note">Generate one‑time applicant codes. Bank loaded: <strong id="bank-count">225</strong></p>
      </div>
      <button class="good" onclick="logoutRecruiter()">Logout</button>
    </div>

    <div class="card">
      
    <div class="row" id="rsid-row" style="margin-bottom:8px">
      <input id="rsid" type="text" placeholder="Recruiter ID (RSID)" autocomplete="off" />
      <span id="rsidMsg" class="note" style="color:#fca5a5"></span>
    </div>
    
      <div class="row">
        <input id="app-name" type="text" placeholder="Applicant full name (recommended)" />
        <select id="motivator">
          <option value="Training">Training</option>
          <option value="Education">Education</option>
          <option value="Adventure">Adventure</option>
          <option value="Money">Money</option>
          <option value="Service">Service</option>
          <option value="Unknown" selected>Unknown</option>
        </select>
        <select id="test-mode">
          <option value="short">Short AFQT (40) — AR, MK, WK, PC</option>
          <option value="core">Core AFQT (105) — AR, MK, WK, PC</option>
          <option value="full">Full Practical (225) — All subtests</option>
        </select>
        <input id="new-code-note" type="text" placeholder="Optional note (class date, location, etc.)" />
        <button id="gen-code" class="good">Generate</button>
      </div>
      <table style="margin-top:10px;width:100%">
        <thead><tr><th>Code</th><th>RSID</th><th>Name</th><th>Motivator</th><th>Test</th><th>Note</th><th>Status</th><th>Expires</th></tr></thead>
        <tbody id="codes-tbody"></tbody>
      </table>
    </div>

    <div class="card">
      <h3>Latest Results</h3>
      <table>
        <thead><tr><th>Applicant</th><th>Code</th><th>RSID</th><th>Motivator</th><th>Test</th><th>Notes</th><th>AFQT%</th></tr></thead>
        <tbody id="results-tbody"></tbody>
      </table>
      <div style="margin-top:6px;text-align:right"><button id="export-json">Export JSON</button></div>
    </div>
  </section>

  <section id="applicant" class="card hidden">
    <div class="row between">
      <h2>Applicant Test</h2>
      <div class="note" id="applicant-mode-line">Authorized test: —</div>
    </div>
    <div id="runner" class="card hidden">
      <div class="row between">
        <div><span id="subject-badge" class="subject-badge">—</span></div>
        <div class="note">Question <span id="qnum">0</span>/<span id="qtotal">0</span></div>
      </div>
      <div class="progress" style="margin:10px 0 14px"><span id="progress-bar"></span></div>
      <div id="qtext" style="margin:8px 0 12px"></div>
      <div id="choices"></div>
      <div class="row between" style="margin-top:12px">
        <button id="prevBtn">Back</button>
        <div>
          <button id="saveNextBtn" class="primary">Save & Next</button>
          <button id="submitBtn" class="good hidden">Submit Test</button>
        </div>
      </div>
    </div>

    <div id="post-submit" class="card hidden">
      <h3>Submitting your test…</h3>
      <p class="note">Computing practice AFQT and line scores…</p>
    </div>

    <div id="applicant-summary" class="card hidden">
      <h3>AFQT (approx.)</h3>
      <div class="progress"><span id="afqt-bar"></span></div>
<!-- BEGIN:SUBTEST_AND_LINESCORES_CARDS -->
<div id="applicant-subtest-breakdown" class="card">
  <h3>Subtest Breakdown</h3>
  <div id="subtest-breakdown-content" class="note">Waiting for results…</div>
</div>
<div id="applicant-line-scores" class="card" style="display:none">
  <h3>Army Line Scores (Full Test)</h3>
  <div id="line-scores-content" class="note">—</div>
</div>
<!-- END:SUBTEST_AND_LINESCORES_CARDS -->

      <div class="row between"><div class="note">Percentile</div><div id="afqt-val"><strong>—</strong></div></div>
    </div>
  </section>
</div>

<script id="asvab-bank" type="application/json">[{"id": "AR_001", "subject": "Arithmetic Reasoning", "difficulty": "easy", "question": "If a car travels 180 miles in 3 hours, what is its average speed?", "options": ["30 mph", "45 mph", "55 mph", "60 mph"], "correct_answer": "60 mph", "explanation": "Speed = Distance ÷ Time = 180 ÷ 3 = 60 mph."}, {"id": "AR_002", "subject": "Arithmetic Reasoning", "difficulty": "easy", "question": "A jacket costs $60 and is on sale for 25% off. What is the sale price?", "options": ["$15", "$30", "$45", "$50"], "correct_answer": "$45", "explanation": "25% of 60 = 15; 60 - 15 = $45."}, {"id": "AR_003", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "A train travels at 50 mph for 2.5 hours and then 40 mph for 1.5 hours. What is the total distance?", "options": ["135 miles", "185 miles", "190 miles", "200 miles"], "correct_answer": "185 miles", "explanation": "50×2.5=125; 40×1.5=60; Total=185 miles."}, {"id": "AR_004", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "If 8 workers can complete a job in 12 days, how long will it take 6 workers to do the same job?", "options": ["9 days", "14 days", "16 days", "20 days"], "correct_answer": "16 days", "explanation": "Work ∝ 1/Workers. (8×12)/6 = 16 days."}, {"id": "AR_005", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "A store sells 3 apples for $1.20. How much will 15 apples cost?", "options": ["$4.00", "$5.00", "$6.00", "$7.20"], "correct_answer": "$6.00", "explanation": "1 apple = 0.40; 15×0.40 = $6.00."}, {"id": "AR_006", "subject": "Arithmetic Reasoning", "difficulty": "hard", "question": "A contractor mixes 12 gallons of paint by combining blue and white in a 2:1 ratio. How many gallons of blue paint are used?", "options": ["3", "4", "6", "8"], "correct_answer": "8", "explanation": "2 parts blue + 1 part white = 3 parts total; 2/3 of 12 = 8."}, {"id": "AR_007", "subject": "Arithmetic Reasoning", "difficulty": "hard", "question": "If the price of a TV is reduced by 20% and then increased by 25%, what is the net percentage change?", "options": ["No change", "5% increase", "5% decrease", "10% increase"], "correct_answer": "No change", "explanation": "100→80→100; final price returns to original value."}, {"id": "AR_008", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "An airplane travels 600 miles in 2 hours with a tailwind, but only 400 miles in 2 hours against the wind. What is the plane’s still-air speed?", "options": ["90 mph", "100 mph", "120 mph", "130 mph"], "correct_answer": "100 mph", "explanation": "Let s=still air speed, w=wind. s+w=300; s−w=200 → s=250/2=100 mph."}, {"id": "AR_009", "subject": "Arithmetic Reasoning", "difficulty": "easy", "question": "What is 15% of 80?", "options": ["10", "12", "14", "16"], "correct_answer": "12", "explanation": "0.15 × 80 = 12."}, {"id": "AR_010", "subject": "Arithmetic Reasoning", "difficulty": "hard", "question": "If John can paint a house in 12 hours and Mark can paint it in 8 hours, how long will it take them to paint it together?", "options": ["4.8 hours", "5 hours", "6 hours", "7 hours"], "correct_answer": "4.8 hours", "explanation": "1/12 + 1/8 = 5/24; total time = 24/5 = 4.8 hours."}, {"id": "MK_001", "subject": "Mathematics Knowledge", "difficulty": "easy", "question": "Simplify: 3x + 5x = ?", "options": ["8", "8x", "15x", "x8"], "correct_answer": "8x", "explanation": "Combine like terms: 3x + 5x = 8x."}, {"id": "MK_002", "subject": "Mathematics Knowledge", "difficulty": "easy", "question": "Evaluate: 9^2 - 4^2 = ?", "options": ["13", "17", "65", "65"], "correct_answer": "65", "explanation": "81 - 16 = 65."}, {"id": "MK_003", "subject": "Mathematics Knowledge", "difficulty": "moderate", "question": "If 2x + 3 = 11, what is x?", "options": ["3", "4", "5", "6"], "correct_answer": "4", "explanation": "2x = 8 → x = 4."}, {"id": "MK_004", "subject": "Mathematics Knowledge", "difficulty": "moderate", "question": "Simplify: (3x^2)(2x^3) = ?", "options": ["5x^5", "6x^5", "6x^6", "5x^6"], "correct_answer": "6x^5", "explanation": "Multiply coefficients (3×2=6) and add exponents (2+3=5)."}, {"id": "MK_005", "subject": "Mathematics Knowledge", "difficulty": "easy", "question": "Find the area of a rectangle 6 m long and 3 m wide.", "options": ["9 m²", "15 m²", "18 m²", "21 m²"], "correct_answer": "18 m²", "explanation": "A = L × W = 6×3 = 18 m²."}, {"id": "MK_006", "subject": "Mathematics Knowledge", "difficulty": "moderate", "question": "Solve: x/5 = 9", "options": ["40", "45", "50", "55"], "correct_answer": "45", "explanation": "Multiply both sides by 5: x = 45."}, {"id": "MK_007", "subject": "Mathematics Knowledge", "difficulty": "hard", "question": "Simplify: √(49/9) = ?", "options": ["7/3", "3/7", "14/9", "7"], "correct_answer": "7/3", "explanation": "√49 = 7, √9 = 3 → 7/3."}, {"id": "MK_008", "subject": "Mathematics Knowledge", "difficulty": "moderate", "question": "If y = 3x + 2 and x = 4, what is y?", "options": ["10", "12", "14", "15"], "correct_answer": "14", "explanation": "y = 3(4)+2 = 12+2=14."}, {"id": "MK_009", "subject": "Mathematics Knowledge", "difficulty": "hard", "question": "Solve for x: 5x - 7 = 18", "options": ["3", "4", "5", "6"], "correct_answer": "5", "explanation": "5x=25 → x=5."}, {"id": "MK_010", "subject": "Mathematics Knowledge", "difficulty": "hard", "question": "The area of a circle is 154 cm². Find the radius. (Use π≈3.14)", "options": ["5 cm", "6 cm", "7 cm", "8 cm"], "correct_answer": "7 cm", "explanation": "A=πr^2→154=3.14r^2→r^2≈49→r=7."}, {"id": "WK_001", "subject": "Word Knowledge", "difficulty": "easy", "question": "Select the word that means the same as 'rapid'.", "options": ["slow", "swift", "uncertain", "steady"], "correct_answer": "swift", "explanation": "'Rapid' and 'swift' are synonyms meaning fast."}, {"id": "WK_002", "subject": "Word Knowledge", "difficulty": "easy", "question": "Select the word that means the same as 'ancient'.", "options": ["modern", "old", "young", "recent"], "correct_answer": "old", "explanation": "'Ancient' means very old or from long ago."}, {"id": "WK_003", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the word that means the same as 'precise'.", "options": ["exact", "average", "quick", "rough"], "correct_answer": "exact", "explanation": "'Precise' means accurate or exact."}, {"id": "WK_004", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the word that means the opposite of 'scarce'.", "options": ["rare", "abundant", "limited", "valuable"], "correct_answer": "abundant", "explanation": "The opposite of 'scarce' is 'abundant' meaning plentiful."}, {"id": "WK_005", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the word that means the same as 'convey'.", "options": ["transport", "hide", "communicate", "replace"], "correct_answer": "communicate", "explanation": "'Convey' means to communicate or express information."}, {"id": "WK_006", "subject": "Word Knowledge", "difficulty": "hard", "question": "Select the word that means the same as 'meticulous'.", "options": ["careless", "thorough", "relaxed", "ordinary"], "correct_answer": "thorough", "explanation": "'Meticulous' means showing great attention to detail; 'thorough' fits best."}, {"id": "WK_007", "subject": "Word Knowledge", "difficulty": "hard", "question": "Select the word that means the opposite of 'vague'.", "options": ["unclear", "definite", "confused", "general"], "correct_answer": "definite", "explanation": "'Vague' means not clear; its opposite is 'definite'."}, {"id": "WK_008", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the word that means the same as 'deter'.", "options": ["encourage", "discourage", "ignore", "allow"], "correct_answer": "discourage", "explanation": "'Deter' means to discourage or prevent someone from taking action."}, {"id": "WK_009", "subject": "Word Knowledge", "difficulty": "easy", "question": "Select the word that means the same as 'assist'.", "options": ["help", "hinder", "ignore", "delay"], "correct_answer": "help", "explanation": "'Assist' and 'help' are synonyms."}, {"id": "WK_010", "subject": "Word Knowledge", "difficulty": "hard", "question": "Select the word that means the same as 'scrutinize'.", "options": ["examine", "reject", "simplify", "hide"], "correct_answer": "examine", "explanation": "'Scrutinize' means to examine closely."}, {"id": "PC_001", "subject": "Paragraph Comprehension", "difficulty": "easy", "question": "Passage: The sun provides the Earth with heat and light. Without it, life as we know it would not exist. \n\nQuestion: What is the main idea of the passage?", "options": ["The sun is dangerous", "The sun is essential for life", "The sun moves around Earth", "The sun changes colors"], "correct_answer": "The sun is essential for life", "explanation": "The passage emphasizes that life depends on the sun’s energy."}, {"id": "PC_002", "subject": "Paragraph Comprehension", "difficulty": "easy", "question": "Passage: Plants convert sunlight into energy through photosynthesis. This process sustains most life on Earth. \n\nQuestion: What process allows plants to make energy?", "options": ["Respiration", "Photosynthesis", "Fermentation", "Evaporation"], "correct_answer": "Photosynthesis", "explanation": "The passage explicitly states that photosynthesis is how plants produce energy."}, {"id": "PC_003", "subject": "Paragraph Comprehension", "difficulty": "moderate", "question": "Passage: Maria trained for months to run the marathon. Even when tired, she stayed focused on her goal. \n\nQuestion: What does this passage suggest about Maria?", "options": ["She is lazy", "She is determined", "She dislikes running", "She gave up easily"], "correct_answer": "She is determined", "explanation": "Her persistence despite fatigue shows determination."}, {"id": "PC_004", "subject": "Paragraph Comprehension", "difficulty": "moderate", "question": "Passage: Although Tom forgot his umbrella, he didn’t mind the rain. He enjoyed the cool air and sound of raindrops. \n\nQuestion: How did Tom feel about the rain?", "options": ["Annoyed", "Indifferent", "Happy", "Angry"], "correct_answer": "Happy", "explanation": "Tom enjoyed the rain, suggesting a positive attitude."}, {"id": "PC_005", "subject": "Paragraph Comprehension", "difficulty": "moderate", "question": "Passage: Many people believe coffee originated in Ethiopia. It is now one of the most traded commodities worldwide. \n\nQuestion: According to the passage, where did coffee originate?", "options": ["Brazil", "Ethiopia", "Colombia", "Mexico"], "correct_answer": "Ethiopia", "explanation": "The passage clearly identifies Ethiopia as coffee’s origin."}, {"id": "PC_006", "subject": "Paragraph Comprehension", "difficulty": "hard", "question": "Passage: Although the invention was not immediately successful, it paved the way for future technologies that changed the world. \n\nQuestion: What is implied about the invention?", "options": ["It failed permanently", "It influenced later innovations", "It was forgotten", "It replaced older devices instantly"], "correct_answer": "It influenced later innovations", "explanation": "The phrase 'paved the way' implies its influence on future inventions."}, {"id": "PC_007", "subject": "Paragraph Comprehension", "difficulty": "hard", "question": "Passage: The mountain’s harsh climate and rough terrain make it difficult for most plants to survive. Only the hardiest species endure. \n\nQuestion: What can be inferred about the plants that survive there?", "options": ["They are fragile", "They require a lot of water", "They are resilient", "They grow quickly"], "correct_answer": "They are resilient", "explanation": "The phrase 'hardiest species' indicates resilience."}, {"id": "PC_008", "subject": "Paragraph Comprehension", "difficulty": "moderate", "question": "Passage: The new library was designed with natural light and quiet spaces to encourage reading and study. \n\nQuestion: What was the main goal of the library’s design?", "options": ["To reduce electricity use", "To make reading and studying enjoyable", "To attract tourists", "To hold events"], "correct_answer": "To make reading and studying enjoyable", "explanation": "The design features support comfort and focus for readers."}, {"id": "PC_009", "subject": "Paragraph Comprehension", "difficulty": "easy", "question": "Passage: The desert receives less than 10 inches of rain each year. Despite this, many animals have adapted to live there. \n\nQuestion: What allows animals to survive in the desert?", "options": ["Adaptations", "Frequent rain", "Migration", "Cold weather"], "correct_answer": "Adaptations", "explanation": "The passage mentions animal adaptations as the reason for survival."}, {"id": "PC_010", "subject": "Paragraph Comprehension", "difficulty": "hard", "question": "Passage: Critics argued that the artist’s latest work lacked originality, but fans praised its emotional depth and technique. \n\nQuestion: What best describes the response to the artist’s work?", "options": ["Entirely negative", "Mixed opinions", "Completely positive", "Indifferent"], "correct_answer": "Mixed opinions", "explanation": "The passage describes both criticism and praise, indicating mixed reactions."}, {"id": "AR_011", "subject": "Arithmetic Reasoning", "difficulty": "easy", "question": "A recipe calls for 3 cups of flour to make 12 cookies. How many cups are needed for 36 cookies?", "options": ["6", "7", "8", "9"], "correct_answer": "9", "explanation": "Proportional: 3 cups → 12 cookies; ×3 → 36 cookies → 3×3 = 9 cups."}, {"id": "AR_012", "subject": "Arithmetic Reasoning", "difficulty": "easy", "question": "A shirt originally costs $32 and is discounted 25%. What is the sale price?", "options": ["$6.50", "$24.00", "$25.60", "$28.80"], "correct_answer": "$24.00", "explanation": "25% of 32 is 8; 32 − 8 = $24.00."}, {"id": "AR_013", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "A tank holds 240 gallons. If it leaks at 3 gallons per hour, how long to drop to 108 gallons?", "options": ["36 hours", "40 hours", "44 hours", "60 hours"], "correct_answer": "44 hours", "explanation": "Loss needed: 240−108=132; 132/3=44 hours."}, {"id": "AR_014", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "A jogger runs 2.5 miles in 20 minutes. At the same pace, how far in 1 hour?", "options": ["6.5 miles", "7.0 miles", "7.5 miles", "8.0 miles"], "correct_answer": "7.5 miles", "explanation": "20 min → 2.5 mi; 60 min is ×3 → 7.5 miles."}, {"id": "AR_015", "subject": "Arithmetic Reasoning", "difficulty": "hard", "question": "A store increases a price by 15% and later reduces the new price by 15%. What is the net effect?", "options": ["2.25% decrease", "No change", "2.25% increase", "5% decrease"], "correct_answer": "2.25% decrease", "explanation": "100→115→97.75; net −2.25%."}, {"id": "AR_016", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "A worker earns $15/hour and gets a 10% raise. After 30 hours, how much did they earn?", "options": ["$450", "$475.50", "$495.00", "$510.00"], "correct_answer": "$495.00", "explanation": "New rate: 15×1.10=16.5; 16.5×30=$495."}, {"id": "AR_017", "subject": "Arithmetic Reasoning", "difficulty": "easy", "question": "If a box holds 24 cans and you need 180 cans, how many full boxes are required?", "options": ["7", "7.5", "8", "9"], "correct_answer": "8", "explanation": "180/24=7.5 → need 8 full boxes."}, {"id": "AR_018", "subject": "Arithmetic Reasoning", "difficulty": "hard", "question": "Two pumps drain a pool in 6 hours and 8 hours, respectively. Working together, how long?", "options": ["3.4 h", "3.5 h", "3.6 h", "3.8 h"], "correct_answer": "3.4 h", "explanation": "Rates: 1/6+1/8=7/24; time=24/7≈3.43 h ≈ 3.4 h."}, {"id": "AR_019", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "A car depreciates 20% the first year and 10% the second year. If initial value is $25,000, what is it after two years?", "options": ["$18,000", "$20,000", "$18,750", "$22,500"], "correct_answer": "$18,000", "explanation": "Year1: 25,000×0.8=20,000; Year2: ×0.9=18,000."}, {"id": "AR_020", "subject": "Arithmetic Reasoning", "difficulty": "easy", "question": "What is 30% of 250?", "options": ["50", "60", "70", "75"], "correct_answer": "75", "explanation": "0.30×250=75."}, {"id": "AR_021", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "A map shows 1 inch equals 12 miles. How many miles is 3.5 inches?", "options": ["30", "36", "40", "42"], "correct_answer": "42", "explanation": "3.5×12=42 miles."}, {"id": "AR_022", "subject": "Arithmetic Reasoning", "difficulty": "hard", "question": "A merchant mixes 20 lb of coffee at $8/lb with x lb at $12/lb to make a blend at $10/lb. Find x.", "options": ["15 lb", "20 lb", "25 lb", "30 lb"], "correct_answer": "20 lb", "explanation": "Total value: 20*8 + 12x = 10(20+x) → 160+12x=200+10x → x=20."}, {"id": "AR_023", "subject": "Arithmetic Reasoning", "difficulty": "easy", "question": "A container of juice is 2.5 liters. How many milliliters is this?", "options": ["150 mL", "250 mL", "2,500 mL", "25,000 mL"], "correct_answer": "2,500 mL", "explanation": "1 L = 1000 mL; 2.5 L = 2500 mL."}, {"id": "AR_024", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "A cyclist averages 18 mph. How long to travel 27 miles?", "options": ["1 hr", "1.25 hr", "1.5 hr", "1.75 hr"], "correct_answer": "1.5 hr", "explanation": "t=d/r=27/18=1.5 hr."}, {"id": "AR_025", "subject": "Arithmetic Reasoning", "difficulty": "hard", "question": "Company A sells at 30% profit, Company B sells the same item at 15% loss. If both sell at $230, what is the cost to Company A?", "options": ["$161", "$177", "$190", "$200"], "correct_answer": "$177", "explanation": "For A: 1.30C=230 → C≈176.92 ≈ $177."}, {"id": "AR_026", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "A $500 bond grows 4% annually. What is its value after 3 years (simple interest)?", "options": ["$560", "$560.80", "$560.00", "$520.00"], "correct_answer": "$560.00", "explanation": "Simple interest: 500 + 500*(0.04*3)=500+60=560."}, {"id": "AR_027", "subject": "Arithmetic Reasoning", "difficulty": "easy", "question": "If 3/4 of a class is present and there are 24 students present, how many are in the class?", "options": ["28", "30", "32", "36"], "correct_answer": "32", "explanation": "Let total T; (3/4)T=24 → T=32."}, {"id": "AR_028", "subject": "Arithmetic Reasoning", "difficulty": "hard", "question": "A boat travels 24 miles downstream in 3 hours and the same distance upstream in 4 hours. Find the speed of the current.", "options": ["1 mph", "2 mph", "3 mph", "4 mph"], "correct_answer": "1 mph", "explanation": "Downstream r+w=8; upstream r−w=6; solve → r=7, w=1."}, {"id": "AR_029", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "A contractor needs 1,200 bricks. Packs contain 48 bricks each. How many packs are needed?", "options": ["24", "25", "26", "27"], "correct_answer": "25", "explanation": "1200/48=25 exactly."}, {"id": "AR_030", "subject": "Arithmetic Reasoning", "difficulty": "easy", "question": "What is the total cost of 3 items at $7.50 each plus 8% sales tax?", "options": ["$22.50", "$24.00", "$24.30", "$24.90"], "correct_answer": "$24.30", "explanation": "Subtotal 22.50; tax 1.80; total 24.30."}, {"id": "MK_011", "subject": "Mathematics Knowledge", "difficulty": "easy", "question": "Solve for x: x + 7 = 19", "options": ["9", "10", "11", "12"], "correct_answer": "12", "explanation": "x=19-7=12."}, {"id": "MK_012", "subject": "Mathematics Knowledge", "difficulty": "easy", "question": "Simplify: 6(2x + 3)", "options": ["12x + 3", "12x + 18", "8x + 3", "6x + 3"], "correct_answer": "12x + 18", "explanation": "Distribute: 6·(2x)=12x; 6·3=18."}, {"id": "MK_013", "subject": "Mathematics Knowledge", "difficulty": "moderate", "question": "Evaluate: (5a^2)(-2a^3)", "options": ["-10a^5", "-10a^6", "10a^5", "10a^6"], "correct_answer": "-10a^5", "explanation": "Multiply coeffs and add exponents: -10a^5."}, {"id": "MK_014", "subject": "Mathematics Knowledge", "difficulty": "moderate", "question": "Factor: x^2 - 9", "options": ["(x-9)(x+1)", "(x-3)(x+3)", "(x-1)(x+9)", "(x-3)^2"], "correct_answer": "(x-3)(x+3)", "explanation": "Difference of squares."}, {"id": "MK_015", "subject": "Mathematics Knowledge", "difficulty": "hard", "question": "Solve: 3x - 2 = 4x + 5", "options": ["-7", "7", "-5", "5"], "correct_answer": "-7", "explanation": "Bring x terms together: -2-5 = x → x = -7."}, {"id": "MK_016", "subject": "Mathematics Knowledge", "difficulty": "moderate", "question": "Find the perimeter: rectangle with L=11, W=4", "options": ["15", "22", "24", "30"], "correct_answer": "30", "explanation": "P = 2(L + W) = 2(11 + 4) = 2(15) = 30."}, {"id": "MK_017", "subject": "Mathematics Knowledge", "difficulty": "easy", "question": "Convert 0.75 to a fraction.", "options": ["1/2", "2/3", "3/4", "4/5"], "correct_answer": "3/4", "explanation": "0.75 = 3/4."}, {"id": "MK_018", "subject": "Mathematics Knowledge", "difficulty": "hard", "question": "Solve: 2/(x-1) = 1/3", "options": ["x = 7", "x=4", "x=2", "x=-5"], "correct_answer": "x = 7", "explanation": "Cross-multiply: 2×3 = x−1 → x = 7."}, {"id": "MK_019", "subject": "Mathematics Knowledge", "difficulty": "moderate", "question": "If 4x = 3y and y = 12, find x.", "options": ["6", "8", "9", "12"], "correct_answer": "9", "explanation": "4x=36 → x=9."}, {"id": "MK_020", "subject": "Mathematics Knowledge", "difficulty": "easy", "question": "What is the slope of the line y = -3x + 5?", "options": ["-3", "3", "5", "-5"], "correct_answer": "-3", "explanation": "Slope is the coefficient of x."}, {"id": "MK_021", "subject": "Mathematics Knowledge", "difficulty": "hard", "question": "Simplify: (x^3 y^2)/(x y^5)", "options": ["x^2/y^3", "x^4 y^7", "y^3/x^2", "x^2 y^3"], "correct_answer": "x^2/y^3", "explanation": "Subtract exponents: x^(3-1) y^(2-5)=x^2 y^-3."}, {"id": "MK_022", "subject": "Mathematics Knowledge", "difficulty": "moderate", "question": "Find the area of a triangle with base 10 and height 9.", "options": ["45", "90", "18", "19"], "correct_answer": "45", "explanation": "A=1/2 bh=45."}, {"id": "MK_023", "subject": "Mathematics Knowledge", "difficulty": "easy", "question": "Evaluate: |-14|", "options": ["-14", "0", "14", "28"], "correct_answer": "14", "explanation": "Absolute value is positive magnitude."}, {"id": "MK_024", "subject": "Mathematics Knowledge", "difficulty": "moderate", "question": "Solve: 7x + 5 = 3x + 25", "options": ["3", "4", "5", "6"], "correct_answer": "5", "explanation": "4x=20 → x=5."}, {"id": "MK_025", "subject": "Mathematics Knowledge", "difficulty": "hard", "question": "If the diameter is 10, what is the circumference? (Use π≈3.14)", "options": ["15.7", "25.1", "31.4", "62.8"], "correct_answer": "31.4", "explanation": "C=πd=3.14*10=31.4."}, {"id": "WK_011", "subject": "Word Knowledge", "difficulty": "easy", "question": "Select the word that means the same as 'permit'.", "options": ["forbid", "allow", "ignore", "delay"], "correct_answer": "allow", "explanation": "'Permit' and 'allow' are synonyms."}, {"id": "WK_012", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the word that means the same as 'reluctant'.", "options": ["eager", "hesitant", "certain", "careless"], "correct_answer": "hesitant", "explanation": "'Reluctant' means unwilling or hesitant."}, {"id": "WK_013", "subject": "Word Knowledge", "difficulty": "hard", "question": "Select the word that means the opposite of 'ambiguous'.", "options": ["unclear", "obvious", "vague", "doubtful"], "correct_answer": "obvious", "explanation": "'Ambiguous' means unclear; opposite is 'obvious'."}, {"id": "WK_014", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the word that means the same as 'adverse'.", "options": ["favorable", "hostile", "neutral", "easy"], "correct_answer": "hostile", "explanation": "'Adverse' means harmful or hostile."}, {"id": "WK_015", "subject": "Word Knowledge", "difficulty": "easy", "question": "Select the word that means the same as 'brief'.", "options": ["short", "late", "large", "tall"], "correct_answer": "short", "explanation": "'Brief' means short."}, {"id": "WK_016", "subject": "Word Knowledge", "difficulty": "hard", "question": "Select the word that means the same as 'tenacious'.", "options": ["yielding", "persistent", "gentle", "temporary"], "correct_answer": "persistent", "explanation": "'Tenacious' means persistent."}, {"id": "WK_017", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the word that means the same as 'invoke'.", "options": ["cite", "repair", "remove", "confuse"], "correct_answer": "cite", "explanation": "'Invoke' can mean to call upon or cite."}, {"id": "WK_018", "subject": "Word Knowledge", "difficulty": "easy", "question": "Select the word that means the same as 'vital'.", "options": ["unnecessary", "important", "casual", "trivial"], "correct_answer": "important", "explanation": "'Vital' means essential or important."}, {"id": "WK_019", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the word that means the same as 'remedy'.", "options": ["cure", "cause", "harm", "delay"], "correct_answer": "cure", "explanation": "'Remedy' means cure."}, {"id": "WK_020", "subject": "Word Knowledge", "difficulty": "hard", "question": "Select the word that means the same as 'prudent'.", "options": ["reckless", "careful", "secret", "sudden"], "correct_answer": "careful", "explanation": "'Prudent' means careful and wise."}, {"id": "WK_021", "subject": "Word Knowledge", "difficulty": "easy", "question": "Select the word that means the same as 'depart'.", "options": ["arrive", "leave", "enter", "stop"], "correct_answer": "leave", "explanation": "'Depart' means to leave."}, {"id": "WK_022", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the word that means the same as 'attain'.", "options": ["reach", "lose", "forget", "delay"], "correct_answer": "reach", "explanation": "'Attain' means to achieve or reach."}, {"id": "WK_023", "subject": "Word Knowledge", "difficulty": "hard", "question": "Select the word that means the same as 'candid'.", "options": ["dishonest", "sly", "frank", "silent"], "correct_answer": "frank", "explanation": "'Candid' means frank or honest."}, {"id": "WK_024", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the word that means the same as 'salient'.", "options": ["minor", "prominent", "late", "slow"], "correct_answer": "prominent", "explanation": "'Salient' means most noticeable or prominent."}, {"id": "PC_011", "subject": "Paragraph Comprehension", "difficulty": "easy", "question": "Passage: The lighthouse’s bright beam warned ships of the rocky shore. Many sailors relied on it during storms.\n\nQuestion: What was the purpose of the lighthouse?", "options": ["To warn ships", "To count waves", "To guide airplanes", "To measure tides"], "correct_answer": "To warn ships", "explanation": "The passage states it warned ships of rocks."}, {"id": "PC_012", "subject": "Paragraph Comprehension", "difficulty": "easy", "question": "Passage: The museum added new exhibits to attract visitors. Attendance increased throughout the summer.\n\nQuestion: What likely caused the increase in attendance?", "options": ["Higher ticket prices", "New exhibits", "Shorter hours", "Bad weather"], "correct_answer": "New exhibits", "explanation": "The cause-and-effect implied is new exhibits → increased attendance."}, {"id": "PC_013", "subject": "Paragraph Comprehension", "difficulty": "moderate", "question": "Passage: Although the athlete started the race slowly, she conserved energy and finished with a strong sprint.\n\nQuestion: Why did the athlete start slowly?", "options": ["She was injured", "She was conserving energy", "She forgot the route", "She was late"], "correct_answer": "She was conserving energy", "explanation": "The passage explicitly says she conserved energy."}, {"id": "PC_014", "subject": "Paragraph Comprehension", "difficulty": "moderate", "question": "Passage: The company shifted to remote work to reduce costs and retain talent. Employee satisfaction later improved.\n\nQuestion: What is a likely benefit mentioned?", "options": ["Lower travel time", "Higher taxes", "More office space", "Less training"], "correct_answer": "Lower travel time", "explanation": "Remote work reduces commuting time."}, {"id": "PC_015", "subject": "Paragraph Comprehension", "difficulty": "hard", "question": "Passage: Despite early skepticism, the new policy yielded measurable gains in productivity without increasing expenses.\n\nQuestion: What best describes the outcome of the policy?", "options": ["Ineffective", "Costly", "Successful", "Uncertain"], "correct_answer": "Successful", "explanation": "Gains in productivity without higher costs indicate success."}, {"subject": "General Science", "question": "Which organelle is primarily responsible for producing ATP in eukaryotic cells?", "options": ["Mitochondrion", "Nucleus", "Ribosome", "Golgi apparatus"], "correct_answer": "Mitochondrion"}, {"subject": "General Science", "question": "Water boils at what temperature at standard atmospheric pressure (1 atm)?", "options": ["100°C (212°F)", "90°C (194°F)", "110°C (230°F)", "80°C (176°F)"], "correct_answer": "100°C (212°F)"}, {"subject": "General Science", "question": "The chemical symbol 'Na' stands for which element?", "options": ["Sodium", "Nitrogen", "Neon", "Nickel"], "correct_answer": "Sodium"}, {"subject": "General Science", "question": "Which phase change describes a solid turning directly into a gas?", "options": ["Sublimation", "Condensation", "Deposition", "Evaporation"], "correct_answer": "Sublimation"}, {"subject": "General Science", "question": "Blood carries oxygen mainly bound to what protein?", "options": ["Hemoglobin", "Insulin", "Keratin", "Albumin"], "correct_answer": "Hemoglobin"}, {"subject": "General Science", "question": "Earth’s seasons are primarily caused by:", "options": ["The tilt of Earth's axis", "Changes in Earth–Sun distance", "Moon’s gravity", "Solar flares"], "correct_answer": "The tilt of Earth's axis"}, {"subject": "General Science", "question": "Which vitamin is crucial for blood clotting?", "options": ["Vitamin K", "Vitamin C", "Vitamin D", "Vitamin A"], "correct_answer": "Vitamin K"}, {"subject": "General Science", "question": "The pH of a neutral aqueous solution at 25°C is approximately:", "options": ["7", "0", "14", "3"], "correct_answer": "7"}, {"subject": "General Science", "question": "What gas do plants primarily take in during photosynthesis?", "options": ["Carbon dioxide", "Oxygen", "Nitrogen", "Hydrogen"], "correct_answer": "Carbon dioxide"}, {"subject": "General Science", "question": "Which of the following is a renewable energy source?", "options": ["Wind", "Coal", "Natural gas", "Uranium"], "correct_answer": "Wind"}, {"subject": "General Science", "question": "Which particle has no electrical charge?", "options": ["Neutron", "Proton", "Electron", "Positron"], "correct_answer": "Neutron"}, {"subject": "General Science", "question": "Which layer of Earth is liquid and composed mainly of iron and nickel?", "options": ["Outer core", "Inner core", "Mantle", "Crust"], "correct_answer": "Outer core"}, {"subject": "General Science", "question": "The unit 'Newton' measures:", "options": ["Force", "Energy", "Power", "Pressure"], "correct_answer": "Force"}, {"subject": "General Science", "question": "Which blood vessels carry blood away from the heart?", "options": ["Arteries", "Veins", "Capillaries", "Venules"], "correct_answer": "Arteries"}, {"subject": "General Science", "question": "The process of cell division that produces gametes is called:", "options": ["Meiosis", "Mitosis", "Binary fission", "Budding"], "correct_answer": "Meiosis"}, {"subject": "General Science", "question": "Which type of bond involves the sharing of electron pairs?", "options": ["Covalent", "Ionic", "Hydrogen", "Metallic"], "correct_answer": "Covalent"}, {"subject": "General Science", "question": "What is the primary function of white blood cells?", "options": ["Fight infection", "Carry oxygen", "Clot blood", "Transport nutrients"], "correct_answer": "Fight infection"}, {"subject": "General Science", "question": "Which gas makes up the largest percentage of Earth’s atmosphere?", "options": ["Nitrogen", "Oxygen", "Argon", "Carbon dioxide"], "correct_answer": "Nitrogen"}, {"subject": "General Science", "question": "The greenhouse effect is caused primarily by which gas?", "options": ["Carbon dioxide", "Oxygen", "Neon", "Helium"], "correct_answer": "Carbon dioxide"}, {"subject": "General Science", "question": "What is the basic unit of heredity?", "options": ["Gene", "Chromosome", "Nucleotide", "Protein"], "correct_answer": "Gene"}, {"subject": "General Science", "question": "In the food chain, organisms that produce their own food are called:", "options": ["Producers", "Consumers", "Decomposers", "Predators"], "correct_answer": "Producers"}, {"subject": "General Science", "question": "Which organ filters blood to produce urine?", "options": ["Kidney", "Liver", "Pancreas", "Spleen"], "correct_answer": "Kidney"}, {"subject": "General Science", "question": "Which of these best describes an acid?", "options": ["Donates H+ in solution", "Accepts H+ in solution", "Donates OH-", "Neutralizes bases only"], "correct_answer": "Donates H+ in solution"}, {"subject": "General Science", "question": "What is the main function of platelets?", "options": ["Blood clotting", "Oxygen transport", "Immunity", "Hormone transport"], "correct_answer": "Blood clotting"}, {"subject": "General Science", "question": "Which law states that energy cannot be created or destroyed?", "options": ["Conservation of energy", "Conservation of mass", "Newton’s 3rd law", "Hooke’s law"], "correct_answer": "Conservation of energy"}, {"subject": "General Science", "question": "Which wave requires a medium to travel?", "options": ["Sound", "Light", "Radio", "Infrared"], "correct_answer": "Sound"}, {"subject": "General Science", "question": "Which part of a plant cell contains chlorophyll?", "options": ["Chloroplast", "Vacuole", "Mitochondria", "Cell wall"], "correct_answer": "Chloroplast"}, {"subject": "General Science", "question": "What is the approximate normal human body temperature in Celsius?", "options": ["37°C", "32°C", "40°C", "25°C"], "correct_answer": "37°C"}, {"subject": "General Science", "question": "Which subatomic particle determines the atomic number?", "options": ["Proton", "Neutron", "Electron", "Positron"], "correct_answer": "Proton"}, {"subject": "General Science", "question": "Which of these is an example of a physical change?", "options": ["Ice melting", "Wood burning", "Iron rusting", "Milk souring"], "correct_answer": "Ice melting"}, {"subject": "Electronics Information", "question": "Ohm’s law relates voltage (V), current (I), and resistance (R) as:", "options": ["V = I × R", "V = I / R", "V = R / I", "I = R / V"], "correct_answer": "V = I × R"}, {"subject": "Electronics Information", "question": "A device that stores electrical charge is a:", "options": ["Capacitor", "Resistor", "Inductor", "Diode"], "correct_answer": "Capacitor"}, {"subject": "Electronics Information", "question": "The unit of electrical power is the:", "options": ["Watt", "Volt", "Ohm", "Ampere"], "correct_answer": "Watt"}, {"subject": "Electronics Information", "question": "A diode primarily allows current to flow in:", "options": ["One direction", "Both directions equally", "Opposite directions alternately", "No direction"], "correct_answer": "One direction"}, {"subject": "Electronics Information", "question": "What does AC stand for in electricity?", "options": ["Alternating Current", "Average Current", "Active Circuit", "Applied Current"], "correct_answer": "Alternating Current"}, {"subject": "Electronics Information", "question": "In a series circuit, the total resistance is:", "options": ["The sum of individual resistances", "Less than any branch", "Equal to the average", "Zero"], "correct_answer": "The sum of individual resistances"}, {"subject": "Electronics Information", "question": "The color bands on a resistor indicate:", "options": ["Resistance value and tolerance", "Voltage rating", "Current limit", "Temperature"], "correct_answer": "Resistance value and tolerance"}, {"subject": "Electronics Information", "question": "Which component resists changes in current?", "options": ["Inductor", "Resistor", "Capacitor", "LED"], "correct_answer": "Inductor"}, {"subject": "Electronics Information", "question": "A short circuit typically results in:", "options": ["Very high current", "Very high resistance", "Zero current", "Open circuit"], "correct_answer": "Very high current"}, {"subject": "Electronics Information", "question": "A transformer changes:", "options": ["AC voltage level", "DC voltage level", "Resistance only", "Frequency only"], "correct_answer": "AC voltage level"}, {"subject": "Electronics Information", "question": "The unit of capacitance is:", "options": ["Farad", "Henry", "Tesla", "Weber"], "correct_answer": "Farad"}, {"subject": "Electronics Information", "question": "What is the typical forward voltage drop of a silicon diode?", "options": ["~0.7 V", "~0.1 V", "~1.5 V", "~3 V"], "correct_answer": "~0.7 V"}, {"subject": "Electronics Information", "question": "Which meter measures current directly in a circuit?", "options": ["Ammeter", "Voltmeter", "Ohmmeter", "Wattmeter"], "correct_answer": "Ammeter"}, {"subject": "Electronics Information", "question": "The relationship for electrical power is:", "options": ["P = V × I", "P = V / I", "P = I / R", "P = R / V"], "correct_answer": "P = V × I"}, {"subject": "Electronics Information", "question": "Which logic gate outputs HIGH only when all inputs are HIGH?", "options": ["AND", "OR", "NOR", "XOR"], "correct_answer": "AND"}, {"subject": "Electronics Information", "question": "A fuse is used to:", "options": ["Protect against overcurrent", "Store energy", "Rectify AC", "Amplify signal"], "correct_answer": "Protect against overcurrent"}, {"subject": "Electronics Information", "question": "Frequency is measured in:", "options": ["Hertz", "Ohms", "Volts", "Amps"], "correct_answer": "Hertz"}, {"subject": "Electronics Information", "question": "Which component can amplify signals?", "options": ["Transistor", "Resistor", "Capacitor", "Inductor"], "correct_answer": "Transistor"}, {"subject": "Electronics Information", "question": "In parallel circuits, voltage across each branch is:", "options": ["The same", "Divided by branches", "Zero", "Double"], "correct_answer": "The same"}, {"subject": "Electronics Information", "question": "LED stands for:", "options": ["Light Emitting Diode", "Low Energy Device", "Linear Electronic Driver", "Light Expansion Diode"], "correct_answer": "Light Emitting Diode"}, {"subject": "Electronics Information", "question": "The symbol Ω stands for:", "options": ["Ohm", "Omega-Volt", "Watt", "Ampere"], "correct_answer": "Ohm"}, {"subject": "Electronics Information", "question": "Rectification converts:", "options": ["AC to DC", "DC to AC", "High V to low V", "Low I to high I"], "correct_answer": "AC to DC"}, {"subject": "Electronics Information", "question": "Which device stores energy in a magnetic field?", "options": ["Inductor", "Capacitor", "Thermistor", "Varistor"], "correct_answer": "Inductor"}, {"subject": "Electronics Information", "question": "The ground reference in a circuit is typically at:", "options": ["0 volts", "1 volt", "Line voltage", "Peak voltage"], "correct_answer": "0 volts"}, {"subject": "Electronics Information", "question": "If V=12 V and R=6 Ω, current I = ?", "options": ["2 A", "0.5 A", "6 A", "12 A"], "correct_answer": "2 A"}, {"subject": "Auto & Shop Information", "question": "Which tool is best for measuring small external diameters?", "options": ["Caliper", "Torque wrench", "Allen key", "Pipe wrench"], "correct_answer": "Caliper"}, {"subject": "Auto & Shop Information", "question": "The component that converts reciprocating motion to rotational motion in an engine is the:", "options": ["Crankshaft", "Camshaft", "Piston", "Valve"], "correct_answer": "Crankshaft"}, {"subject": "Auto & Shop Information", "question": "Thread pitch on a bolt refers to:", "options": ["Distance between threads", "Bolt length", "Head size", "Thread angle"], "correct_answer": "Distance between threads"}, {"subject": "Auto & Shop Information", "question": "A torque wrench is used to:", "options": ["Apply specific tightness to fasteners", "Measure current", "Cut metal", "Set ignition timing"], "correct_answer": "Apply specific tightness to fasteners"}, {"subject": "Auto & Shop Information", "question": "Which system charges the battery while the engine runs?", "options": ["Alternator", "Starter", "Carburetor", "Radiator"], "correct_answer": "Alternator"}, {"subject": "Auto & Shop Information", "question": "A hacksaw is primarily used for cutting:", "options": ["Metal", "Wood", "Ceramic tile", "Glass"], "correct_answer": "Metal"}, {"subject": "Auto & Shop Information", "question": "Which wrench has a closed loop that grips all sides of a nut?", "options": ["Box-end wrench", "Open-end wrench", "Adjustable wrench", "Pipe wrench"], "correct_answer": "Box-end wrench"}, {"subject": "Auto & Shop Information", "question": "Engine oil viscosity rated '10W-30' indicates:", "options": ["Flow at cold and hot temps", "Only thickness at 10°C", "Only thickness at 30°C", "Fuel grade"], "correct_answer": "Flow at cold and hot temps"}, {"subject": "Auto & Shop Information", "question": "The function of the differential is to:", "options": ["Allow wheels to rotate at different speeds", "Increase engine compression", "Reduce tire wear only", "Control air-fuel ratio"], "correct_answer": "Allow wheels to rotate at different speeds"}, {"subject": "Auto & Shop Information", "question": "Which saw is best for cutting curves in wood?", "options": ["Coping saw", "Crosscut saw", "Rip saw", "Back saw"], "correct_answer": "Coping saw"}, {"subject": "Auto & Shop Information", "question": "A feeler gauge is used to measure:", "options": ["Small gaps/clearances", "Voltage", "Fluid pressure", "Torque"], "correct_answer": "Small gaps/clearances"}, {"subject": "Auto & Shop Information", "question": "The device that controls engine air-fuel mixture in older cars is the:", "options": ["Carburetor", "Radiator", "Alternator", "Catalytic converter"], "correct_answer": "Carburetor"}, {"subject": "Auto & Shop Information", "question": "What tool would you use to remove a hex socket screw?", "options": ["Allen wrench", "Phillips screwdriver", "Torx driver", "Chisel"], "correct_answer": "Allen wrench"}, {"subject": "Auto & Shop Information", "question": "Which part converts linear motion from pistons to rotary motion?", "options": ["Crankshaft", "Timing belt", "Oil pan", "Distributor"], "correct_answer": "Crankshaft"}, {"subject": "Auto & Shop Information", "question": "A bench vise is primarily used to:", "options": ["Secure workpieces", "Measure angles", "Cut threads", "Apply torque"], "correct_answer": "Secure workpieces"}, {"subject": "Auto & Shop Information", "question": "Which metal joining process uses filler rod and no melting of base metal?", "options": ["Brazing", "Fusion welding", "Forging", "Soldering only"], "correct_answer": "Brazing"}, {"subject": "Auto & Shop Information", "question": "A tap and die set is used to:", "options": ["Cut internal/external threads", "Measure torque", "Sand surfaces", "Check runout"], "correct_answer": "Cut internal/external threads"}, {"subject": "Auto & Shop Information", "question": "The radiator’s main function is to:", "options": ["Dissipate engine heat", "Increase horsepower", "Filter oil", "Ignite the mixture"], "correct_answer": "Dissipate engine heat"}, {"subject": "Auto & Shop Information", "question": "The timing belt synchronizes:", "options": ["Crankshaft and camshaft", "Alternator and battery", "Radiator and water pump", "Pistons and spark plugs directly"], "correct_answer": "Crankshaft and camshaft"}, {"subject": "Auto & Shop Information", "question": "Which brake system uses hydraulic pressure?", "options": ["Disc/drum brakes", "Parking brake only", "Mechanical drums only", "Electric braking only"], "correct_answer": "Disc/drum brakes"}, {"subject": "Auto & Shop Information", "question": "What is the purpose of a gasket?", "options": ["Seal between two surfaces", "Increase friction", "Lubricate parts", "Conduct electricity"], "correct_answer": "Seal between two surfaces"}, {"subject": "Auto & Shop Information", "question": "Which tool checks the angle of a cut or joint?", "options": ["Protractor/try square", "Feeler gauge", "Micrometer", "Pulley"], "correct_answer": "Protractor/try square"}, {"subject": "Auto & Shop Information", "question": "Shock absorbers primarily control:", "options": ["Suspension oscillations", "Engine compression", "Steering angle", "Tire pressure"], "correct_answer": "Suspension oscillations"}, {"subject": "Auto & Shop Information", "question": "A bandsaw is commonly used for:", "options": ["Smooth curved cuts", "Precision drilling", "Driving screws", "Thread cutting"], "correct_answer": "Smooth curved cuts"}, {"subject": "Auto & Shop Information", "question": "Which component reduces tailpipe emissions?", "options": ["Catalytic converter", "Muffler", "Alternator", "Intake manifold"], "correct_answer": "Catalytic converter"}, {"subject": "Auto & Shop Information", "question": "Which tool would you choose to remove a stubborn nut?", "options": ["Breaker bar", "Allen key", "Feeler gauge", "Tri-square"], "correct_answer": "Breaker bar"}, {"subject": "Auto & Shop Information", "question": "A micrometer is best suited to measure:", "options": ["Very small thickness/diameter", "Torque", "AC voltage", "Thread pitch"], "correct_answer": "Very small thickness/diameter"}, {"subject": "Auto & Shop Information", "question": "The serpentine belt typically drives:", "options": ["Multiple accessories", "Only the camshaft", "Only the crankshaft", "The radiator core"], "correct_answer": "Multiple accessories"}, {"subject": "Auto & Shop Information", "question": "A cold chisel is used for:", "options": ["Cutting metal when cold", "Cutting hot metal only", "Carving wood", "Sharpening drill bits"], "correct_answer": "Cutting metal when cold"}, {"subject": "Auto & Shop Information", "question": "Which fluid is used in hydraulic brakes?", "options": ["Brake fluid", "Engine oil", "Coolant", "ATF only"], "correct_answer": "Brake fluid"}, {"subject": "Mechanical Comprehension", "question": "Increasing the length of a lever arm generally allows you to:", "options": ["Apply the same force to produce more torque", "Reduce torque with the same force", "Eliminate friction", "Increase speed only"], "correct_answer": "Apply the same force to produce more torque"}, {"subject": "Mechanical Comprehension", "question": "A pulley system with two supporting ropes (ideal) halves the:", "options": ["Effort needed", "Load weight", "Distance traveled by load", "Mechanical advantage"], "correct_answer": "Effort needed"}, {"subject": "Mechanical Comprehension", "question": "Gears of different sizes are used primarily to:", "options": ["Change torque and speed", "Reduce friction to zero", "Convert AC to DC", "Store energy"], "correct_answer": "Change torque and speed"}, {"subject": "Mechanical Comprehension", "question": "Friction is generally higher for which surfaces?", "options": ["Rough surfaces", "Smooth lubricated surfaces", "Polished surfaces", "Ice on metal"], "correct_answer": "Rough surfaces"}, {"subject": "Mechanical Comprehension", "question": "Hydraulic systems work on which principle?", "options": ["Pascal’s law", "Archimedes’ principle", "Bernoulli’s principle", "Hooke’s law"], "correct_answer": "Pascal’s law"}, {"subject": "Mechanical Comprehension", "question": "A block and tackle increases mechanical advantage by:", "options": ["Using multiple pulleys", "Reducing rope strength", "Widening the rope", "Changing material"], "correct_answer": "Using multiple pulleys"}, {"subject": "Mechanical Comprehension", "question": "If gear A (10 teeth) drives gear B (20 teeth), gear B will:", "options": ["Turn at half the speed, double torque", "Turn at double speed", "Turn same speed", "Reverse direction and same torque"], "correct_answer": "Turn at half the speed, double torque"}, {"subject": "Mechanical Comprehension", "question": "A spring that obeys Hooke’s law has force proportional to:", "options": ["Displacement", "Velocity", "Mass", "Temperature"], "correct_answer": "Displacement"}, {"subject": "Mechanical Comprehension", "question": "In fluids, pressure at a given depth depends on:", "options": ["Depth and density", "Surface area only", "Container shape", "Fluid color"], "correct_answer": "Depth and density"}, {"subject": "Mechanical Comprehension", "question": "A screw is essentially a:", "options": ["Inclined plane wrapped around a cylinder", "Second-class lever", "Pulley system", "Gear pump"], "correct_answer": "Inclined plane wrapped around a cylinder"}, {"subject": "Mechanical Comprehension", "question": "Ball bearings reduce friction by:", "options": ["Rolling contact", "Increasing surface area", "Fluid drag", "Magnetic levitation"], "correct_answer": "Rolling contact"}, {"subject": "Mechanical Comprehension", "question": "The unit of pressure is:", "options": ["Pascal (Pa)", "Newton (N)", "Joule (J)", "Watt (W)"], "correct_answer": "Pascal (Pa)"}, {"subject": "Mechanical Comprehension", "question": "Work is defined as force times:", "options": ["Distance", "Time", "Mass", "Area"], "correct_answer": "Distance"}, {"subject": "Mechanical Comprehension", "question": "Power is the rate of doing work, measured in:", "options": ["Watts", "Joules", "Newtons", "Pascals"], "correct_answer": "Watts"}, {"subject": "Mechanical Comprehension", "question": "A first-class lever has the fulcrum:", "options": ["Between effort and load", "At one end with load in middle", "At one end with effort in middle", "Coincident with effort"], "correct_answer": "Between effort and load"}, {"subject": "Mechanical Comprehension", "question": "Hydraulic jacks multiply force because:", "options": ["Pressure is transmitted equally in fluids", "Liquids have no mass", "Air compresses easily", "Friction is eliminated"], "correct_answer": "Pressure is transmitted equally in fluids"}, {"subject": "Mechanical Comprehension", "question": "If torque = force × lever arm, doubling the lever arm will:", "options": ["Double the torque", "Halve the torque", "Not change torque", "Reduce force only"], "correct_answer": "Double the torque"}, {"subject": "Mechanical Comprehension", "question": "A gear train that increases speed will:", "options": ["Decrease torque", "Increase torque", "Keep torque same", "Reverse torque direction only"], "correct_answer": "Decrease torque"}, {"subject": "Mechanical Comprehension", "question": "The mechanical advantage (ideal) of a ramp is:", "options": ["Length/height", "Height/length", "Width/height", "Height/width"], "correct_answer": "Length/height"}, {"subject": "Mechanical Comprehension", "question": "When fluid flows faster, its static pressure:", "options": ["Decreases (Bernoulli)", "Increases", "Stays constant", "Becomes zero"], "correct_answer": "Decreases (Bernoulli)"}, {"subject": "Mechanical Comprehension", "question": "The center of gravity is the point where:", "options": ["Weight acts as if concentrated", "Friction is zero", "Maximum torque occurs", "Velocity is zero"], "correct_answer": "Weight acts as if concentrated"}, {"subject": "Mechanical Comprehension", "question": "A second-class lever places the load:", "options": ["Between fulcrum and effort", "At the fulcrum", "Beyond the effort", "Between two fulcrums"], "correct_answer": "Between fulcrum and effort"}, {"subject": "Mechanical Comprehension", "question": "A third-class lever has the effort:", "options": ["Between fulcrum and load", "At the end opposite the fulcrum", "Coincident with load", "Beyond the load"], "correct_answer": "Between fulcrum and load"}, {"subject": "Mechanical Comprehension", "question": "Ideal mechanical advantage of a block-and-tackle equals:", "options": ["Number of supporting strands", "Number of pulleys", "Length of rope", "Weight of load"], "correct_answer": "Number of supporting strands"}, {"subject": "Mechanical Comprehension", "question": "Reducing gear ratio from 4:1 to 2:1 does what to output torque (ideal)?", "options": ["Halves it", "Doubles it", "No change", "Triples it"], "correct_answer": "Halves it"}, {"subject": "Mechanical Comprehension", "question": "A cam converts:", "options": ["Rotary motion to reciprocating", "Electrical to mechanical", "Reciprocating to fluid flow", "Heat to electricity"], "correct_answer": "Rotary motion to reciprocating"}, {"subject": "Mechanical Comprehension", "question": "The pitch of a screw affects its:", "options": ["Mechanical advantage and speed", "Material strength only", "Color", "Lubrication needs only"], "correct_answer": "Mechanical advantage and speed"}, {"subject": "Mechanical Comprehension", "question": "Which simple machine uses a wheel with a rope over it?", "options": ["Pulley", "Inclined plane", "Wedge", "Lever"], "correct_answer": "Pulley"}, {"subject": "Mechanical Comprehension", "question": "In uniform beams, maximum bending stress occurs at:", "options": ["The surface (outer fibers)", "Neutral axis", "Center of mass only", "Support only"], "correct_answer": "The surface (outer fibers)"}, {"subject": "Mechanical Comprehension", "question": "Hydraulic brake systems increase force by using:", "options": ["A larger output piston area", "Smaller output piston area", "Longer lever only", "Higher temperature"], "correct_answer": "A larger output piston area"}, {"subject": "Paragraph Comprehension", "question": "The museum’s new exhibit focuses on everyday inventions that quietly changed how people live—items like the zipper, the paperclip, and the ballpoint pen. While none of these objects seems remarkable at first glance, each solved a persistent problem with a design so simple it became nearly invisible.\n\nWhat is the main idea of the paragraph?", "options": ["Simple inventions can have a big impact on daily life", "Museums should focus on famous inventions only", "The ballpoint pen is the most important invention", "Inventions must be complex to be useful"], "correct_answer": "Simple inventions can have a big impact on daily life"}, {"subject": "Paragraph Comprehension", "question": "After months of drought, the first rainfall didn’t merely moisten the ground—it transformed it. Dormant seeds split open, and within days a faint green haze spread across the valley, proof that life had been waiting just beneath the dust.\n\nWhat does the author suggest about the landscape before the rain?", "options": ["It contained latent life ready to grow", "It was permanently barren", "It was flooded recently", "It was covered with thick grass"], "correct_answer": "It contained latent life ready to grow"}, {"subject": "Paragraph Comprehension", "question": "Many people think memory works like a recorder, but research shows it is reconstructive. Each time we remember, we rebuild the memory, sometimes adding details that feel true even when they are not.\n\nWhich statement best reflects the author’s point?", "options": ["Memory can change each time we recall something", "Memory stores information perfectly", "Memories fade but never change", "People cannot trust any memories"], "correct_answer": "Memory can change each time we recall something"}, {"subject": "Paragraph Comprehension", "question": "The lighthouse stood not to challenge the sea but to partner with it, translating danger into visible warnings. Its steady beam did not calm the storm; it simply helped sailors navigate through it.\n\nThe lighthouse is described as a 'partner' to emphasize that it:", "options": ["Guides sailors without controlling the sea", "Controls the weather", "Signals only during calm seas", "Replaces navigational charts"], "correct_answer": "Guides sailors without controlling the sea"}, {"subject": "Paragraph Comprehension", "question": "Volunteers removed invasive plants from the field, making space for native wildflowers. By summer, the return of pollinators showed the ecosystem was beginning to recover.\n\nWhat indicates the project’s success?", "options": ["The return of pollinators", "The size of the field", "The number of volunteers", "The presence of invasive plants"], "correct_answer": "The return of pollinators"}, {"id": "WK_025", "subject": "Word Knowledge", "difficulty": "easy", "question": "Select the word that means the same as 'concise'.", "options": ["brief", "rare", "late", "unclear"], "correct_answer": "brief", "explanation": "'Concise' is a synonym of 'brief' in common usage."}, {"id": "WK_026", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the word that means the same as 'benevolent'.", "options": ["kind", "rare", "late", "unclear"], "correct_answer": "kind", "explanation": "'Benevolent' is a synonym of 'kind' in common usage."}, {"id": "WK_027", "subject": "Word Knowledge", "difficulty": "hard", "question": "Select the word that means the same as 'elated'.", "options": ["joyful", "rare", "late", "unclear"], "correct_answer": "joyful", "explanation": "'Elated' is a synonym of 'joyful' in common usage."}, {"id": "WK_028", "subject": "Word Knowledge", "difficulty": "easy", "question": "Select the word that means the same as 'relevant'.", "options": ["pertinent", "rare", "late", "unclear"], "correct_answer": "pertinent", "explanation": "'Relevant' is a synonym of 'pertinent' in common usage."}, {"id": "WK_029", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the word that means the same as 'coerce'.", "options": ["force", "rare", "late", "unclear"], "correct_answer": "force", "explanation": "'Coerce' is a synonym of 'force' in common usage."}, {"id": "WK_030", "subject": "Word Knowledge", "difficulty": "hard", "question": "Select the word that means the same as 'skeptical'.", "options": ["doubtful", "rare", "late", "unclear"], "correct_answer": "doubtful", "explanation": "'Skeptical' is a synonym of 'doubtful' in common usage."}, {"id": "WK_031", "subject": "Word Knowledge", "difficulty": "easy", "question": "Select the word that means the same as 'hinder'.", "options": ["impede", "rare", "late", "unclear"], "correct_answer": "impede", "explanation": "'Hinder' is a synonym of 'impede' in common usage."}, {"id": "WK_032", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the word that means the same as 'concur'.", "options": ["agree", "rare", "late", "unclear"], "correct_answer": "agree", "explanation": "'Concur' is a synonym of 'agree' in common usage."}, {"id": "WK_033", "subject": "Word Knowledge", "difficulty": "hard", "question": "Select the word that means the same as 'arduous'.", "options": ["difficult", "rare", "late", "unclear"], "correct_answer": "difficult", "explanation": "'Arduous' is a synonym of 'difficult' in common usage."}, {"id": "WK_034", "subject": "Word Knowledge", "difficulty": "easy", "question": "Select the word that means the same as 'precursor'.", "options": ["forerunner", "rare", "late", "unclear"], "correct_answer": "forerunner", "explanation": "'Precursor' is a synonym of 'forerunner' in common usage."}, {"id": "WK_035", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the word that means the same as 'frugal'.", "options": ["thrifty", "rare", "late", "unclear"], "correct_answer": "thrifty", "explanation": "'Frugal' is a synonym of 'thrifty' in common usage."}, {"id": "AR_031", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "A recipe calls for 2 cups of flour for 8 cookies. How many cups are needed for 20 cookies?", "options": ["3", "4", "5", "6"], "correct_answer": "5", "explanation": "Direct proportion: 2/8 = x/20 → x = (2×20)/8 = 5 cups."}, {"id": "AR_032", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "A phone is discounted 15% from $240, then 5% sales tax is applied. What is the final price?", "options": ["$193.80", "$204.00", "$214.20", "$216.00"], "correct_answer": "$214.20", "explanation": "240×0.85=204; then 204×1.05=214.20."}, {"id": "AR_033", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "A car travels 120 miles in 2 hours and 30 minutes. What is its average speed (mph)?", "options": ["45", "48", "50", "60"], "correct_answer": "48", "explanation": "2.5 hours → 120÷2.5 = 48 mph."}, {"id": "AR_034", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "If a worker completes 30% of a task on Day 1 and 45% on Day 2, what percent remains?", "options": ["15%", "20%", "25%", "30%"], "correct_answer": "25%", "explanation": "30% + 45% = 75%; 100% − 75% = 25%."}, {"id": "AR_035", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "A shirt marked $32 is on sale for 25% off, plus a $4 coupon. What is the final price?", "options": ["$18.00", "$20.00", "$20.40", "$24.00"], "correct_answer": "$20.00", "explanation": "25% off: 32×0.75=24; then coupon 24−4=20."}, {"id": "AR_036", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "A tank holds 60 gallons. It leaks 3 gallons per hour and is being filled at 5 gallons per hour. Net rate?", "options": ["1 gal/hr", "2 gal/hr", "3 gal/hr", "5 gal/hr"], "correct_answer": "2 gal/hr", "explanation": "Fill 5 − leak 3 = +2 gal/hr."}, {"id": "AR_037", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "Mixing 3 liters of 10% juice with 2 liters of 40% juice results in what concentration?", "options": ["22%", "24%", "26%", "28%"], "correct_answer": "22%", "explanation": "Juice amount: 0.3 + 0.8 = 1.1 L; total 5 L → 1.1/5=0.22=22%."}, {"id": "AR_038", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "A train averages 60 mph for 1.5 hours and 40 mph for 2 hours. Total distance?", "options": ["150 mi", "160 mi", "170 mi", "180 mi"], "correct_answer": "170 mi", "explanation": "60×1.5=90; 40×2=80; total=170 mi."}, {"id": "AR_039", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "A store increases a $50 item by 12% and later discounts the new price by 10%. Final price?", "options": ["$49.40", "$50.40", "$51.60", "$56.00"], "correct_answer": "$50.40", "explanation": "50×1.12=56; 56×0.90=50.4 → $50.40."}, {"id": "AR_040", "subject": "Arithmetic Reasoning", "difficulty": "moderate", "question": "If 5 machines make 600 parts in 4 hours, how many parts can 8 machines make in 3 hours (same rate)?", "options": ["720", "900", "1,080", "1,200"], "correct_answer": "720", "explanation": "Rate per machine: 600/(5×4)=30 parts/hr; 8×3×30=720."}, {"id": "MK_026", "subject": "Mathematics Knowledge", "difficulty": "moderate", "question": "Solve for x: 3x + 7 = 25", "options": ["4", "5", "6", "9"], "correct_answer": "6", "explanation": "3x = 18 → x = 6."}, {"id": "MK_027", "subject": "Mathematics Knowledge", "difficulty": "moderate", "question": "What is 12% of 250?", "options": ["25", "28", "30", "32"], "correct_answer": "30", "explanation": "0.12x250 = 30."}, {"id": "MK_028", "subject": "Mathematics Knowledge", "difficulty": "moderate", "question": "Simplify: 5^2 - 3^2", "options": ["4", "7", "16", "25"], "correct_answer": "16", "explanation": "25 - 9 = 16."}, {"id": "MK_029", "subject": "Mathematics Knowledge", "difficulty": "moderate", "question": "If a triangle has angles 35° and 65°, what is the third angle?", "options": ["70°", "75°", "80°", "85°"], "correct_answer": "80°", "explanation": "180° - (35°+65°) = 80°."}, {"id": "MK_030", "subject": "Mathematics Knowledge", "difficulty": "moderate", "question": "Convert 0.375 to a fraction in simplest form.", "options": ["1/3", "3/8", "5/12", "7/16"], "correct_answer": "3/8", "explanation": "0.375 = 375/1000 = 3/8."}, {"id": "MK_031", "subject": "Mathematics Knowledge", "difficulty": "moderate", "question": "Find the slope between (2, 5) and (6, 13).", "options": ["2", "3/2", "4/3", "8/7"], "correct_answer": "2", "explanation": "Slope = (13-5)/(6-2)=8/4=2."}, {"id": "MK_032", "subject": "Mathematics Knowledge", "difficulty": "moderate", "question": "Evaluate: |-9| + |4| - |-3|", "options": ["8", "10", "14", "16"], "correct_answer": "10", "explanation": "9 + 4 - 3 = 10."}, {"id": "MK_033", "subject": "Mathematics Knowledge", "difficulty": "moderate", "question": "Area of a rectangle with length 12 and width 7.", "options": ["19", "42", "72", "84"], "correct_answer": "84", "explanation": "12x7 = 84."}, {"id": "MK_034", "subject": "Mathematics Knowledge", "difficulty": "moderate", "question": "Solve for y: 4y - 6 = 2y + 8", "options": ["5", "6", "7", "8"], "correct_answer": "7", "explanation": "4y-2y = 8+6 → 2y=14 → y=7."}, {"id": "MK_035", "subject": "Mathematics Knowledge", "difficulty": "moderate", "question": "Simplify: (3x)(2x^2)", "options": ["5x^2", "6x^2", "6x^3", "6x^4"], "correct_answer": "6x^3", "explanation": "Multiply coefficients and add exponents: 3x2=6 and x^1xx^2=x^3."}, {"id": "WK_036", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the best synonym for: ALLEVIATE", "options": ["relieve", "provoke", "imitate", "conceal"], "correct_answer": "relieve", "explanation": "‘Alleviate’ means to make less severe; relieve."}, {"id": "WK_037", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the best synonym for: PRUDENT", "options": ["reckless", "cautious", "frivolous", "naive"], "correct_answer": "cautious", "explanation": "‘Prudent’ means careful or cautious."}, {"id": "WK_038", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the best synonym for: AMBIGUOUS", "options": ["clear", "vague", "harmful", "hostile"], "correct_answer": "vague", "explanation": "‘Ambiguous’ means open to multiple meanings; vague."}, {"id": "WK_039", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the best antonym for: SCARCE", "options": ["rare", "plentiful", "limited", "meager"], "correct_answer": "plentiful", "explanation": "Antonym of scarce is plentiful."}, {"id": "WK_040", "subject": "Word Knowledge", "difficulty": "moderate", "question": "In context, ‘mitigate the risk’ most nearly means:", "options": ["increase it", "reduce it", "ignore it", "calculate it"], "correct_answer": "reduce it", "explanation": "Mitigate = reduce."}, {"id": "WK_041", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the best synonym for: VIGOROUS", "options": ["weak", "energetic", "apathetic", "casual"], "correct_answer": "energetic", "explanation": "‘Vigorous’ means strong and energetic."}, {"id": "WK_042", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the best synonym for: CANDID", "options": ["secretive", "honest", "unclear", "prepared"], "correct_answer": "honest", "explanation": "‘Candid’ means honest or frank."}, {"id": "WK_043", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the best antonym for: SUPERFICIAL", "options": ["deep", "shallow", "surface", "minor"], "correct_answer": "deep", "explanation": "Opposite of superficial is deep."}, {"id": "WK_044", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the best synonym for: COHERENT", "options": ["confused", "logical", "stubborn", "casual"], "correct_answer": "logical", "explanation": "‘Coherent’ means logical and consistent."}, {"id": "WK_045", "subject": "Word Knowledge", "difficulty": "moderate", "question": "Select the best synonym for: CONCISE", "options": ["wordy", "brief", "evasive", "formal"], "correct_answer": "brief", "explanation": "‘Concise’ means brief and to the point."}, {"id": "PC_016", "subject": "Paragraph Comprehension", "difficulty": "moderate", "question": "What is the main idea of the passage?\n\nPASSAGE: Many coastal towns prepare for storm season by reinforcing buildings and reviewing evacuation routes. These measures aim to reduce damage and ensure residents can relocate quickly if necessary. Officials emphasize that preparation, not panic, is the key to community safety.", "options": ["Coastal towns cannot prevent storms.", "Evacuation is more important than preparation.", "Preparation helps reduce storm damage and keep people safe.", "Panic is a natural response to storms."], "correct_answer": "Preparation helps reduce storm damage and keep people safe.", "explanation": "Answer supported by the passage."}, {"id": "PC_017", "subject": "Paragraph Comprehension", "difficulty": "moderate", "question": "According to the passage, officials emphasize:\n\nPASSAGE: Many coastal towns prepare for storm season by reinforcing buildings and reviewing evacuation routes. These measures aim to reduce damage and ensure residents can relocate quickly if necessary. Officials emphasize that preparation, not panic, is the key to community safety.", "options": ["panic over preparation", "building more roads", "reinforcing buildings and evacuation review", "closing towns during storm season"], "correct_answer": "reinforcing buildings and evacuation review", "explanation": "Answer supported by the passage."}, {"id": "PC_018", "subject": "Paragraph Comprehension", "difficulty": "moderate", "question": "What is the exhibit mainly about?\n\nPASSAGE: The museum’s newest exhibit highlights inventions that changed everyday life, from the refrigerator to the smartphone. Curators show how each device solved practical problems and shaped social habits, like how we store food or communicate.", "options": ["The history of art", "Inventions that transformed daily life", "Ancient tools only", "A single inventor’s work"], "correct_answer": "Inventions that transformed daily life", "explanation": "Answer supported by the passage."}, {"id": "PC_019", "subject": "Paragraph Comprehension", "difficulty": "moderate", "question": "Which is an example of a change described?\n\nPASSAGE: The museum’s newest exhibit highlights inventions that changed everyday life, from the refrigerator to the smartphone. Curators show how each device solved practical problems and shaped social habits, like how we store food or communicate.", "options": ["People reading more novels", "Storing food differently", "Traveling less often", "Working fewer hours"], "correct_answer": "Storing food differently", "explanation": "Answer supported by the passage."}, {"id": "PC_020", "subject": "Paragraph Comprehension", "difficulty": "moderate", "question": "What was one result of the project?\n\nPASSAGE: Local volunteers organized a weekend cleanup of the riverside park. After collecting trash and planting native trees, they posted signs explaining how visitors can protect wildlife. The project helped restore the area and raise awareness.", "options": ["The park was permanently closed.", "Volunteers stopped posting signs.", "The area was restored and awareness increased.", "Wildlife was relocated."], "correct_answer": "The area was restored and awareness increased.", "explanation": "Answer supported by the passage."}, {"id": "PC_021", "subject": "Paragraph Comprehension", "difficulty": "moderate", "question": "What do the signs explain?\n\nPASSAGE: Local volunteers organized a weekend cleanup of the riverside park. After collecting trash and planting native trees, they posted signs explaining how visitors can protect wildlife. The project helped restore the area and raise awareness.", "options": ["How to protect wildlife", "Where to find native trees", "How to organize a cleanup", "Why parks are closed"], "correct_answer": "How to protect wildlife", "explanation": "Answer supported by the passage."}, {"id": "PC_022", "subject": "Paragraph Comprehension", "difficulty": "moderate", "question": "What do solar panels convert?\n\nPASSAGE: Solar panels work by converting sunlight into electricity using semiconductor materials. As photons strike the panel, electrons move and create an electric current. This clean energy can power homes and reduce reliance on fossil fuels.", "options": ["Heat into light", "Sunlight into electricity", "Wind into heat", "Fuel into electricity"], "correct_answer": "Sunlight into electricity", "explanation": "Answer supported by the passage."}, {"id": "PC_023", "subject": "Paragraph Comprehension", "difficulty": "moderate", "question": "What is one benefit mentioned?\n\nPASSAGE: Solar panels work by converting sunlight into electricity using semiconductor materials. As photons strike the panel, electrons move and create an electric current. This clean energy can power homes and reduce reliance on fossil fuels.", "options": ["They increase fossil fuel use.", "They reduce reliance on fossil fuels.", "They store water for irrigation.", "They create greenhouse gases."], "correct_answer": "They reduce reliance on fossil fuels.", "explanation": "Answer supported by the passage."}, {"id": "PC_024", "subject": "Paragraph Comprehension", "difficulty": "moderate", "question": "Why did students report less stress?\n\nPASSAGE: The library extended its evening hours during exam week, offering quiet rooms and tutoring. Students reported less stress and better focus because they had a reliable place to study after school.", "options": ["There were no exams.", "They had a quiet, reliable place to study.", "Tutors did the exams for them.", "The library removed all rules."], "correct_answer": "They had a quiet, reliable place to study.", "explanation": "Answer supported by the passage."}, {"id": "PC_025", "subject": "Paragraph Comprehension", "difficulty": "moderate", "question": "What did the library provide?\n\nPASSAGE: The library extended its evening hours during exam week, offering quiet rooms and tutoring. Students reported less stress and better focus because they had a reliable place to study after school.", "options": ["Music concerts", "Sports equipment", "Quiet rooms and tutoring", "Shorter hours"], "correct_answer": "Quiet rooms and tutoring", "explanation": "Answer supported by the passage."}]</script>

<script>
const el = id => document.getElementById(id);
function view(id){ ['home','recruiter','applicant'].forEach(s=>el(s).classList.add('hidden')); el(id).classList.remove('hidden'); }

const store = { get:(k,f)=>{ try{ return JSON.parse(localStorage.getItem(k)) ?? f }catch{ return f } }, set:(k,v)=>localStorage.setItem(k, JSON.stringify(v)), now:()=>Date.now() };
const KEYS = { codes:'asvab.codes.v8', results:'asvab.results.v8' };

const RECRUITER_HASH="b0b4ef21c96bb7d37d97760f2cef1f31f17604c2ae3e762b2a9f4f158858a683", SALT_PREFIX="s1:";
async function sha256Hex(str){ const data=new TextEncoder().encode(str); const h=await crypto.subtle.digest('SHA-256', data); return [...new Uint8Array(h)].map(b=>b.toString(16).padStart(2,'0')).join(''); }
async function recruiterLogin(){ const raw=(el('recruiterPass').value||''); const guess=await sha256Hex(SALT_PREFIX+raw); if(guess===RECRUITER_HASH){ el('recruiterLoginMsg').textContent=''; el('recruiterPass').value=''; renderCodes(); renderResults(); el('bank-count').textContent = JSON.parse(document.getElementById('asvab-bank').textContent).length; view('recruiter'); } else { el('recruiterLoginMsg').textContent='Incorrect passcode.'; } }
function logoutRecruiter(){ el('recruiterPass').value=''; view('home'); }

function prettyMode(m){ return m==='short'?'Short (40)' : m==='core'?'Core (105)' : m==='full'?'Full (225)' : m; }
const SUBJECT_LABELS={WK:'Word Knowledge', AR:'Arithmetic Reasoning', PC:'Paragraph Comprehension', MK:'Mathematics Knowledge', GS:'General Science', EI:'Electronics Information', AS:'Auto & Shop', MC:'Mechanical Comprehension'};

function newCode({name='', motivator='Unknown', note='', mode='short'}){ const code=(Math.floor(100000 + Math.random()*900000)).toString(); const expiresAt=store.now()+24*60*60*1000; const rec={code,name,motivator,note,mode,used:false,revoked:false,createdAt:store.now(),expiresAt}; const codes=store.get(KEYS.codes,[]); codes.unshift(rec); store.set(KEYS.codes,codes); return rec; }
function markCodeUsed(code){ const codes=store.get(KEYS.codes,[]); const i=codes.findIndex(c=>c.code===code); if(i>-1){ codes[i].used=true; store.set(KEYS.codes,codes); } }
function revokeCode(code){ const codes=store.get(KEYS.codes,[]); const i=codes.findIndex(c=>c.code===code); if(i>-1){ codes[i].revoked=true; store.set(KEYS.codes,codes); } renderCodes(); }
function canUseCode(code){ const rec=store.get(KEYS.codes,[]).find(c=>c.code===code); if(!rec) return {ok:false,msg:'Code not found.'}; if(rec.revoked) return {ok:false,msg:'Code revoked.'}; if(rec.used) return {ok:false,msg:'Code already used.'}; if(rec.expiresAt<store.now()) return {ok:false,msg:'Code expired.'}; return {ok:true,rec}; }

document.getElementById('gen-code').addEventListener('click', ()=>{ const mode=el('test-mode').value; const name=el('app-name').value.trim(); const motivator=el('motivator').value; const note=el('new-code-note').value.trim(); const rec=newCode({name,motivator,note,mode}); renderCodes(); alert('Applicant code: '+rec.code+'\nName: '+(rec.name||'—')+'\nMotivator: '+rec.motivator+'\nTest: '+prettyMode(mode)+'\nNote: '+(rec.note||'—')); });

function renderCodes(){ const codes=store.get(KEYS.codes,[]); const tbody=el('codes-tbody'); tbody.innerHTML=''; for(const c of codes){ const status=c.revoked?'Revoked':c.used?'Used':(c.expiresAt<store.now()?'Expired':'Active'); const tr=document.createElement('tr'); tr.innerHTML=`<td><code>${c.code}</code></td><td>${c.name||'—'}</td><td>${c.motivator||'Unknown'}</td><td>${prettyMode(c.mode)}</td><td>${c.note||'—'}</td><td>${status} ${(!c.used&&!c.revoked)? `<button data-revoke="${c.code}">Revoke</button>`:''}</td><td>${new Date(c.expiresAt).toLocaleString()}</td>`; tbody.appendChild(tr); } tbody.querySelectorAll('button[data-revoke]').forEach(btn=>btn.addEventListener('click',()=>revokeCode(btn.dataset.revoke))); }

let currentApplicant=null;
async function startApplicant(){ const code=(el('appCode').value||'').trim(); const verdict=canUseCode(code); if(!verdict.ok){ el('appMsg').textContent=verdict.msg; return; } markCodeUsed(code); currentApplicant={ code, name:verdict.rec.name||'Anonymous', motivator:verdict.rec.motivator||'Unknown', note:verdict.rec.note||'', mode:verdict.rec.mode }; el('appMsg').textContent=''; el('applicant-mode-line').textContent='Authorized test: '+prettyMode(currentApplicant.mode); view('applicant'); launchRunner(); }

function getBank(){ const tag=document.getElementById('asvab-bank'); if(!tag) return null; try{ return JSON.parse(tag.textContent) }catch{ return null } }

const MAP_LONG_TO_CODE={'Word Knowledge':'WK','Arithmetic Reasoning':'AR','Paragraph Comprehension':'PC','Mathematics Knowledge':'MK','General Science':'GS','Electronics Information':'EI','Auto & Shop Information':'AS','Mechanical Comprehension':'MC','Auto & Shop':'AS','Auto and Shop':'AS','Auto/Shop':'AS','Mechanical':'MC'};
function strictCodeFromSubject(s){ if(!s) return null; const sub=String(s).trim(); const code2=sub.slice(0,2).toUpperCase(); const CODES=['WK','AR','PC','MK','GS','EI','AS','MC']; if(CODES.includes(code2)&&sub.length<=3) return code2; return MAP_LONG_TO_CODE[sub]||null; }

function normalizeBank(raw){ const out=[]; for(const q of raw){ const code=strictCodeFromSubject(q.subject||q.subject_code); if(!code) continue; const options=q.options||q.choices||[]; if(!options||options.length<2) continue; let correct_index=-1; if(typeof q.correct_index==='number') correct_index=q.correct_index; else if(q.correct_answer){ const ans=String(q.correct_answer).trim(); correct_index=options.findIndex(o=>String(o).trim()===ans); } out.push({ id:q.id||crypto.randomUUID(), subject:code, text:q.question||q.text||'', options, correct_index }); } return out; }

const SHORT_ALLOWED=new Set(['AR','MK','WK','PC']); const CORE_ALLOWED=new Set(['AR','MK','WK','PC']);
const FULL_MINS={ WK:35, AR:30, PC:15, MK:25, GS:25, EI:20, AS:25, MC:25 };
const SHORT_COUNTS={ WK:10, AR:10, PC:10, MK:10 };
const CORE_COUNTS={ WK:35, AR:30, PC:15, MK:25 };

let runner={ bank:[], items:[], answers:[], idx:0 };

function launchRunner(){ const bankRaw=getBank(); if(!bankRaw){ showNoBank(); return; } runner.bank=normalizeBank(bankRaw); runner.items=selectForMode(runner.bank, currentApplicant.mode); if(!runner.items.length){ showNoBank(); return; } runner.answers=new Array(runner.items.length).fill(null); runner.idx=0; el('qtotal').textContent=runner.items.length; el('runner').classList.remove('hidden'); el('post-submit').classList.add('hidden'); el('applicant-summary').classList.add('hidden'); renderCurrentQuestion(); }
function showNoBank(){ el('runner').classList.add('hidden'); el('post-submit').classList.remove('hidden'); el('post-submit').innerHTML='<h3>Question bank not found</h3>'; }

function selectForMode(bank, mode){ const bySubj=groupBy(bank,'subject'); const out=[]; function takeFrom(subj,n){ const pool=(bySubj[subj]||[]).slice(); shuffle(pool); return pool.slice(0,n);} if(mode==='short'){ for(const [k,n] of Object.entries(SHORT_COUNTS)) out.push(...takeFrom(k,n)); } else if(mode==='core'){ for(const [k,n] of Object.entries(CORE_COUNTS)) out.push(...takeFrom(k,n)); } else { for(const [k,n] of Object.entries(FULL_MINS)) out.push(...takeFrom(k,n)); const need=225-out.length; if(need>0){ const selected=new Set(out.map(q=>q.id)); const remaining=bank.filter(q=>!selected.has(q.id)); shuffle(remaining); out.push(...remaining.slice(0,need)); } } if(mode==='short') return shuffle(out.filter(q=>SHORT_ALLOWED.has(q.subject))); if(mode==='core') return shuffle(out.filter(q=>CORE_ALLOWED.has(q.subject))); return shuffle(out); }
function groupBy(arr,key){ const m={}; for(const it of arr){ const k=it[key]; (m[k]||(m[k]=[])).push(it);} return m;}
function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]];} return a; }

function renderCurrentQuestion(){ const i=runner.idx; const q=runner.items[i]; el('qnum').textContent=i+1; el('subject-badge').textContent=SUBJECT_LABELS[q.subject]||q.subject; el('qtext').textContent=q.text; const ch=el('choices'); ch.innerHTML=''; q.options.forEach((opt,idx)=>{ const wrap=document.createElement('label'); wrap.className='choice'; const input=document.createElement('input'); input.type='radio'; input.name='choice'; input.value=idx; if(runner.answers[i]===idx) input.checked=true; input.addEventListener('change',()=>{ runner.answers[i]=idx; updateNavButtons(); }); const span=document.createElement('div'); span.textContent=opt; wrap.appendChild(input); wrap.appendChild(span); ch.appendChild(wrap); }); updateNavButtons(); const pct=Math.round(((i)/runner.items.length)*100); el('progress-bar').style.width=pct+'%'; }
function updateNavButtons(){ el('prevBtn').disabled = runner.idx===0; const isLast=runner.idx===runner.items.length-1; el('saveNextBtn').classList.toggle('hidden',isLast); el('submitBtn').classList.toggle('hidden',!isLast); el('saveNextBtn').disabled=(runner.answers[runner.idx]==null); el('submitBtn').disabled=(runner.answers[runner.idx]==null); }
document.getElementById('prevBtn').addEventListener('click',()=>{ if(runner.idx>0){ runner.idx--; renderCurrentQuestion(); } });
document.getElementById('saveNextBtn').addEventListener('click',()=>{ if(runner.answers[runner.idx]==null) return; if(runner.idx<runner.items.length-1){ runner.idx++; renderCurrentQuestion(); } });
document.getElementById('submitBtn').addEventListener('click', submitTest);

function submitTest(){ el('runner').classList.add('hidden'); el('post-submit').classList.remove('hidden'); const subCorrect={WK:0,AR:0,PC:0,MK:0,GS:0,EI:0,AS:0,MC:0}; const subTotal={WK:0,AR:0,PC:0,MK:0,GS:0,EI:0,AS:0,MC:0}; runner.items.forEach((q,i)=>{ subTotal[q.subject]++; if(runner.answers[i]===q.correct_index) subCorrect[q.subject]++; }); const pct=(c,t)=> (t>0? Math.round((c/t)*100) : 0); const subPct={}; Object.keys(subTotal).forEach(s=> subPct[s]=pct(subCorrect[s],subTotal[s])); const VE=Math.round((subPct.WK+subPct.PC)/2); const raw=2*VE+subPct.AR+subPct.MK; const afqt=Math.max(0,Math.min(99, Math.round((raw/400)*99))); el('afqt-bar').style.width=afqt+'%'; el('afqt-val').innerHTML='<strong>'+afqt+'</strong>'; el('post-submit').classList.add('hidden'); el('applicant-summary').classList.remove('hidden'); const results=store.get(KEYS.results,[]); results.unshift({ id:crypto.randomUUID(), at:store.now(), applicant: currentApplicant?.name||'Anonymous', code: currentApplicant?.code||'—', motivator: currentApplicant?.motivator||'Unknown', note: currentApplicant?.note||'', mode: currentApplicant?.mode||'short', sub: subPct, afqt: afqt }); store.set(KEYS.results, results); renderResults(); }

function renderResults(){ const rows=store.get(KEYS.results,[]); const tbody=el('results-tbody'); tbody.innerHTML=''; for(const r of rows){ const tr=document.createElement('tr'); tr.innerHTML=`<td>${r.applicant||'—'}</td><td>${r.code||'—'}</td><td>${r.motivator||'Unknown'}</td><td>${prettyMode(r.mode||'short')}</td><td>${r.note||'—'}</td><td>${r.afqt}</td>`; tbody.appendChild(tr);} }
document.getElementById('export-json').addEventListener('click',()=>{ const blob=new Blob([JSON.stringify(store.get(KEYS.results,[]),null,2)],{type:'application/json'}); const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='asvab_results.json'; a.click(); URL.revokeObjectURL(url); });

view('home');
</script>

<script>
/* EXT: Applicant persistent Exit button (non-invasive) */
(function(){
  'use strict';
  function ensureExitButton(){
    var app = document.getElementById('applicant');
    if (!app) return; // only add in applicant view container
    if (!document.getElementById('exit-to-home')){
      var btn = document.createElement('button');
      btn.id = 'exit-to-home';
      btn.type = 'button';
      btn.textContent = 'Exit';
      // Place the button at the top of the applicant container
      app.style.position = app.style.position || 'relative';
      app.appendChild(btn);
      btn.addEventListener('click', function(){
        try {
          // Return to login/home without altering any other logic
          var home = document.getElementById('home');
          var recruiter = document.getElementById('recruiter');
          if (document.getElementById('applicant')) document.getElementById('applicant').classList.add('hidden');
          if (recruiter) recruiter.classList.add('hidden');
          if (home) home.classList.remove('hidden');
          // Optional: clear applicant view scroll position
          window.scrollTo({top:0, behavior:'instant'});
        } catch(e){ console.warn('Exit-to-home failed', e); }
      });
    }
  }
  function initExitButton(){
    try { ensureExitButton(); } catch(e){}
  }
  window.addEventListener('DOMContentLoaded', initExitButton);
  window.addEventListener('hashchange', initExitButton);
})();
</script>





<!-- BEGIN:EXT_MOBILE_ACTIONS v2 -->
<style id="recruiter-mobile-css">
  /* Mobile-friendly tweaks for recruiter tables (no sticky headers, no background override) */
  #recruiter .table-scroll{ overflow-x:auto; -webkit-overflow-scrolling:touch; }
  #recruiter table{ width:100%; border-collapse:collapse; }
  #recruiter th, #recruiter td{ padding:0.5rem; vertical-align:top; }
  #recruiter .actions-cell{ white-space:nowrap; }
  /* Compact on small screens */
  @media (max-width:640px){
    #recruiter th, #recruiter td{ padding:0.35rem; font-size:0.9rem; }
    #recruiter table{ table-layout:auto; }
    #recruiter td, #recruiter th{ white-space:nowrap; }
    #recruiter .scores-col{ max-width:340px; overflow:hidden; text-overflow:ellipsis; }
    #recruiter .code-col{ font-weight:600; }
    #recruiter .copy-btn{ padding:0.3rem 0.55rem; font-size:0.85rem; }
    #recruiter .trash-btn{ font-size:1.05rem; line-height:1; vertical-align:middle; }
  }
</style>

<script>
(function(){
  'use strict';

  function readResults(){
    try { return JSON.parse(localStorage.getItem('asvab.results.v8') || '[]'); } catch(e){ return []; }
  }
  function writeResults(arr){
    localStorage.setItem('asvab.results.v8', JSON.stringify(arr||[]));
  }
  function getColIndex(table, label){
    const ths = table.querySelectorAll('thead th');
    const want = (label||'').toLowerCase().trim();
    for (let i=0;i<ths.length;i++){
      if ((ths[i].textContent||'').toLowerCase().trim() === want) return i;
    }
    return -1;
  }

  function ensureTableScrollWrapper(){
    const card = document.querySelector('#recruiter .card + .card');
    if (!card) return null;
    let wrap = card.querySelector('.table-scroll');
    const table = card.querySelector('table');
    if (!table) return null;
    if (!wrap){
      wrap = document.createElement('div');
      wrap.className = 'table-scroll';
      table.parentNode.insertBefore(wrap, table);
      wrap.appendChild(table);
    }
    return wrap;
  }

  function ensureActionsHeader(){
    const card = document.querySelector('#recruiter .card + .card');
    if (!card) return;
    const table = card.querySelector('table');
    if (!table) return;
    const ths = table.querySelectorAll('thead th');
    const hasActions = Array.from(ths).some(th => (th.textContent||'').trim().toLowerCase() === 'actions');
    if (!hasActions){
      const tr = table.querySelector('thead tr');
      const th = document.createElement('th');
      th.textContent = 'Actions';
      tr.appendChild(th);
    }
  }

  function markCodeColumn(){
    const card = document.querySelector('#recruiter .card + .card');
    if (!card) return;
    const table = card.querySelector('table');
    const tbody = card.querySelector('#results-tbody');
    if (!table || !tbody) return;
    const codeIdx = getColIndex(table, 'Code');
    if (codeIdx === -1) return;
    const headCell = table.querySelectorAll('thead th')[codeIdx];
    if (headCell) headCell.classList.add('code-col');
    Array.from(tbody.querySelectorAll('tr')).forEach(tr => {
      const cell = tr.children[codeIdx];
      if (cell) cell.classList.add('code-col');
    });
  }

  function getOrCreateActionsCell(tr){
    let td = tr.querySelector('td.actions-cell');
    if (!td){
      td = document.createElement('td');
      td.className = 'actions-cell';
      tr.appendChild(td);
    } else {
      td.textContent = ''; // ensure only one set of controls
    }
    return td;
  }

  function getCodeFromRow(tr, table){
    const idx = getColIndex(table, 'Code');
    if (idx === -1) return '';
    return (tr.children[idx]?.textContent || '').trim();
    }

  function wireRowActions(tr, table){
    const td = getOrCreateActionsCell(tr);

    // Single Copy button
    const copyBtn = document.createElement('button');
    copyBtn.type = 'button';
    copyBtn.className = 'copy-btn';
    copyBtn.textContent = 'Copy Code';

    // Single Trash button (emoji)
    const trash = document.createElement('button');
    trash.type = 'button';
    trash.className = 'trash-btn';
    trash.setAttribute('aria-label','Delete record');
    trash.textContent = '🗑️';

    td.appendChild(copyBtn);
    td.appendChild(document.createTextNode(' '));
    td.appendChild(trash);

    copyBtn.addEventListener('click', async () => {
      const code = getCodeFromRow(tr, table);
      try {
        await navigator.clipboard.writeText(code);
        copyBtn.textContent = 'Copied!';
        setTimeout(()=> copyBtn.textContent = 'Copy Code', 1200);
      } catch(e){
        // Fallback
        const ta = document.createElement('textarea');
        ta.value = code; document.body.appendChild(ta); ta.select();
        try { document.execCommand('copy'); } catch(e){}
        document.body.removeChild(ta);
        copyBtn.textContent = 'Copied!';
        setTimeout(()=> copyBtn.textContent = 'Copy Code', 1200);
      }
    });

    trash.addEventListener('click', () => {
      const code = getCodeFromRow(tr, table);
      let results = readResults();
      results = results.filter(r => (r.code||'').toString().trim() !== code);
      writeResults(results);
      tr.parentNode && tr.parentNode.removeChild(tr);
    });
  }

  function setup(){
    ensureTableScrollWrapper();
    ensureActionsHeader();
    markCodeColumn();

    const card = document.querySelector('#recruiter .card + .card');
    if (!card) return;
    const table = card.querySelector('table');
    const tbody = card.querySelector('#results-tbody');
    if (!table || !tbody) return;

    // Apply ellipsis to Scores column if present
    const scoresIdx = (function(){
      const labels = ['scores', 'line scores'];
      for (const L of labels){
        const i = getColIndex(table, L);
        if (i !== -1) return i;
      }
      return -1;
    })();
    if (scoresIdx !== -1){
      const headCell = table.querySelectorAll('thead th')[scoresIdx];
      if (headCell) headCell.classList.add('scores-col');
      Array.from(tbody.querySelectorAll('tr')).forEach(tr => {
        const cell = tr.children[scoresIdx];
        if (cell) cell.classList.add('scores-col');
      });
    }

    // Wire existing rows
    Array.from(tbody.querySelectorAll('tr')).forEach(tr => wireRowActions(tr, table));

    // Observe future rows
    const obs = new MutationObserver(muts => {
      muts.forEach(m => m.addedNodes.forEach(node => {
        if (node.nodeType === 1 && node.tagName === 'TR'){
          wireRowActions(node, table);
        }
      }));
    });
    obs.observe(tbody, { childList: true });
  }

  window.addEventListener('DOMContentLoaded', setup);
  window.addEventListener('hashchange', setup);
  window.addEventListener('asvab:results:refresh', setup);
})();
</script>
<!-- END:EXT_MOBILE_ACTIONS v2 -->


<!-- BEGIN:EXT_RECRUITER_ROW_ACTIONS v1 -->
<style id="recruiter-row-actions-css">
  /* Keep recruiter tables mobile-friendly; no header white-out */
  #recruiter .table-scroll{ overflow-x:auto; -webkit-overflow-scrolling:touch; }
  #recruiter table{ width:100%; border-collapse:collapse; }
  #recruiter th, #recruiter td{ padding:0.5rem; vertical-align:top; }
  @media (max-width:640px){
    #recruiter th, #recruiter td{ padding:0.35rem; font-size:0.9rem; }
    #recruiter td, #recruiter th{ white-space:nowrap; }
    #recruiter .scores-col{ max-width:340px; overflow:hidden; text-overflow:ellipsis; }
    #recruiter .code-col{ font-weight:600; }
    #recruiter .copy-btn{ padding:0.25rem 0.5rem; font-size:0.85rem; margin-left:0.35rem; }
    #recruiter .trash-btn{ font-size:1.05rem; line-height:1; vertical-align:middle; }
  }
</style>
<script>
(function(){
  'use strict';

  function getColIndex(table, label){
    const ths = table.querySelectorAll('thead th');
    const want = (label||'').toLowerCase().trim();
    for (let i=0;i<ths.length;i++){
      if ((ths[i].textContent||'').toLowerCase().trim() === want) return i;
    }
    return -1;
  }

  function ensureTableScrollWrapper(card){
    let wrap = card.querySelector('.table-scroll');
    const table = card.querySelector('table');
    if (!table) return null;
    if (!wrap){
      wrap = document.createElement('div');
      wrap.className = 'table-scroll';
      table.parentNode.insertBefore(wrap, table);
      wrap.appendChild(table);
    }
    return wrap;
  }

  // Identify recruiter tables:
  // - Registration table: has "Code" header but NOT "AFQT%"
  // - Results table: has "AFQT%" header (leave actions OUT of this one)
  function classifyRecruiterTables(){
    const recruiter = document.querySelector('#recruiter');
    if (!recruiter) return { reg:null, res:null };
    const tables = Array.from(recruiter.querySelectorAll('table'));
    let reg=null, res=null;
    tables.forEach(t => {
      const hasCode = getColIndex(t, 'Code') !== -1;
      const hasAFQT = getColIndex(t, 'AFQT%') !== -1;
      if (hasCode && !hasAFQT && !reg) reg = t;
      if (hasAFQT && !res) res = t;
    });
    return { reg, res };
  }

  function readJSON(key, fallback){
    try { return JSON.parse(localStorage.getItem(key) || ''); }
    catch(e){ return fallback; }
  }
  function writeJSON(key, val){
    localStorage.setItem(key, JSON.stringify(val));
  }

  // Try to delete a registration record for a given code across likely keys.
  function deleteRegistrationByCode(code){
    const keys = ['asvab.codes','asvab.applicants','asvab.reg','asvab.generated'];
    keys.forEach(k => {
      const val = readJSON(k, null);
      if (!val) return;
      if (Array.isArray(val)){
        const filtered = val.filter(x => (x && (x.code||'').toString().trim() !== code));
        writeJSON(k, filtered);
      }else if (typeof val === 'object'){
        if (code in val){ delete val[code]; writeJSON(k, val); }
      }
    });
  }

  function addRegistrationRowControls(regTable){
    const tbody = regTable.tBodies[0];
    if (!tbody) return;

    const codeIdx = getColIndex(regTable, 'Code');
    if (codeIdx === -1) return;

    // Ensure an "Actions" header at the end for the trash button only
    const theadRow = regTable.tHead && regTable.tHead.rows[0];
    if (theadRow){
      const hasActions = Array.from(theadRow.cells).some(th => (th.textContent||'').trim().toLowerCase() === 'actions');
      if (!hasActions){
        const th = document.createElement('th');
        th.textContent = 'Actions';
        theadRow.appendChild(th);
      }
    }

    // For each row:
    Array.from(tbody.rows).forEach(tr => wireRegistrationRow(tr, codeIdx, regTable));

    // Observe future rows
    const obs = new MutationObserver(muts => {
      muts.forEach(m => m.addedNodes.forEach(node => {
        if (node.nodeType === 1 && node.tagName === 'TR'){
          wireRegistrationRow(node, codeIdx, regTable);
        }
      }));
    });
    obs.observe(tbody, { childList:true });
  }

  function wireRegistrationRow(tr, codeIdx, regTable){
    // Put Copy button NEXT to the Code text, inside the Code cell
    const codeCell = tr.cells[codeIdx];
    if (!codeCell) return;

    // Avoid duplicates: remove any previous copy buttons inside Code cell
    Array.from(codeCell.querySelectorAll('.copy-btn')).forEach(b => b.remove());

    const copyBtn = document.createElement('button');
    copyBtn.type = 'button';
    copyBtn.className = 'copy-btn';
    copyBtn.textContent = 'Copy Code';
    copyBtn.style.marginLeft = '0.5rem';
    codeCell.appendChild(copyBtn);

    copyBtn.addEventListener('click', async () => {
      const code = (codeCell.textContent || '').replace('Copy Code','').trim();
      try {
        await navigator.clipboard.writeText(code);
        copyBtn.textContent = 'Copied!';
        setTimeout(()=> copyBtn.textContent = 'Copy Code', 1200);
      } catch(e){
        const ta = document.createElement('textarea');
        ta.value = code; document.body.appendChild(ta); ta.select();
        try { document.execCommand('copy'); } catch(e){}
        document.body.removeChild(ta);
        copyBtn.textContent = 'Copied!';
        setTimeout(()=> copyBtn.textContent = 'Copy Code', 1200);
      }
    });

    // Ensure a trailing Actions cell with a single trash button
    // Remove any previous actions cells to prevent duplicates
    Array.from(tr.querySelectorAll('td.actions-cell')).forEach(td => td.remove());
    const actionsTd = document.createElement('td');
    actionsTd.className = 'actions-cell';
    const trash = document.createElement('button');
    trash.type = 'button';
    trash.className = 'trash-btn';
    trash.setAttribute('aria-label','Delete registration');
    trash.textContent = '🗑️';
    actionsTd.appendChild(trash);
    tr.appendChild(actionsTd);

    trash.addEventListener('click', () => {
      const code = (codeCell.textContent || '').replace('Copy Code','').trim();
      if (!code) return;
      if (!confirm('Delete this registration?')) return;
      // Try to remove from local storage keys if present
      deleteRegistrationByCode(code);
      // Remove row from DOM
      tr.parentNode && tr.parentNode.removeChild(tr);
    });
  }

  function cleanResultsTable(resTable){
    if (!resTable) return;
    const tbody = resTable.tBodies[0];
    if (!tbody) return;
    // Remove any actions cells/buttons that might have been inserted previously
    Array.from(tbody.querySelectorAll('.actions-cell, .copy-btn, .trash-btn')).forEach(el => {
      if (el.tagName === 'TD') el.remove();
      else el.parentNode && el.parentNode.removeChild(el);
    });
  }

  function setup(){
    const recruiterCards = document.querySelectorAll('#recruiter .card');
    recruiterCards.forEach(card => ensureTableScrollWrapper(card));

    const { reg, res } = classifyRecruiterTables();
    if (reg) addRegistrationRowControls(reg);
    if (res) cleanResultsTable(res);
  }

  window.addEventListener('DOMContentLoaded', setup);
  window.addEventListener('hashchange', setup);
  window.addEventListener('asvab:results:refresh', setup);
})();
</script>
<!-- END:EXT_RECRUITER_ROW_ACTIONS v1 -->


<!-- BEGIN:EXT_LOGIC (Line Scores Injection v1) -->
<script>
(function(){
  'use strict';

  // ---------- Helpers ----------
  function toInt(v){ return Math.max(0, Math.round(Number(v||0))); }

  function getColIndex(table, label){
    const ths = table.querySelectorAll('thead th');
    const want = (label||'').toLowerCase().trim();
    for (let i=0;i<ths.length;i++){
      if ((ths[i].textContent||'').toLowerCase().trim() === want) return i;
    }
    return -1;
  }

  function readResults(){ // newest-first array saved by submit
    try { return JSON.parse(localStorage.getItem('asvab.results.v8') || '[]'); } catch(e){ return []; }
  }

  // ---------- Score math ----------
  function computeVE(sub){
    const WK = toInt(sub.WK), PC = toInt(sub.PC);
    return WK + PC; // app convention
  }
  function formatCore(sub){
    const AR = toInt(sub.AR), MK = toInt(sub.MK), WK = toInt(sub.WK), PC = toInt(sub.PC);
    const VE = computeVE(sub);
    return `AR ${AR} | MK ${MK} | WK ${WK} | PC ${PC} | VE ${VE}`;
  }
  function computeLineScores(sub){
    const WK = toInt(sub.WK), PC = toInt(sub.PC), AR = toInt(sub.AR), MK = toInt(sub.MK);
    const GS = toInt(sub.GS), EI = toInt(sub.EI), AS = toInt(sub.AS), MC = toInt(sub.MC);
    const VE = WK + PC;
    return {
      CL: VE + AR + MK,
      CO: AR + AS + MC,
      EL: GS + AR + MK + EI,
      FA: AR + MK + MC,
      GM: GS + AS + MK + EI,
      GT: VE + AR,
      MM: AS + MC + EI,
      OF: VE + AS + MC,
      SC: VE + AR + AS + MC,
      ST: GS + VE + MK + MC,
    };
  }
  function formatFull(scores){
    const order = ['CL','CO','EL','FA','GM','GT','MM','OF','SC','ST'];
    return order.map(k => `${k} ${scores[k] ?? '—'}`).join(' | ');
  }

  // ---------- Applicant page: show Core for all; Full adds 10 LS ----------
  function ensureApplicantBoxes(){
    const afqtWrap = document.getElementById('applicant-summary');
    if (!afqtWrap) return;

    // Core box (always available)
    if (!document.getElementById('applicant-core-scores')){
      const core = document.createElement('div');
      core.id = 'applicant-core-scores';
      core.className = 'card hidden';
      core.innerHTML = `
        <h3>Core Subtests (AR, MK, WK, PC) + VE</h3>
        <div id="core-scores-content" class="note">—</div>`;
      afqtWrap.parentNode.insertBefore(core, afqtWrap.nextSibling);
    }

    // Full LS box (only for Full mode)
    if (!document.getElementById('applicant-line-scores')){
      const full = document.createElement('div');
      full.id = 'applicant-line-scores';
      full.className = 'card hidden';
      full.innerHTML = `
        <h3>Army Line Scores (Full test)</h3>
        <div id="line-scores-content" class="note">—</div>`;
      afqtWrap.parentNode.insertBefore(full, afqtWrap.nextSibling);
    }
  }

  function renderApplicantFromLast(){
    ensureApplicantBoxes();
    const coreBox = document.getElementById('applicant-core-scores');
    const coreContent = document.getElementById('core-scores-content');
    const fullBox = document.getElementById('applicant-line-scores');
    const fullContent = document.getElementById('line-scores-content');
    if (!coreBox || !coreContent || !fullBox || !fullContent) return;

    const rows = readResults();
    const r = rows && rows[0];
    if (!r || !r.sub){ coreBox.classList.add('hidden'); fullBox.classList.add('hidden'); return; }

    // Core: show for all modes (short/core/full)
    coreContent.textContent = formatCore(r.sub);
    coreBox.classList.remove('hidden');

    // Full: only if mode is full
    const isFull = (r.mode === 'full') || ((r.test||'').toLowerCase().includes('full'));
    if (isFull){
      const ls = computeLineScores(r.sub);
      fullContent.textContent = formatFull(ls);
      fullBox.classList.remove('hidden');
    } else {
      fullBox.classList.add('hidden');
    }
  }

  // Hook after submitTest completes (don’t touch original)
  window.addEventListener('DOMContentLoaded', function(){
    ensureApplicantBoxes();
    if (typeof window.submitTest === 'function' && !window._scoresWrapped){
      const _orig = window.submitTest;
      window.submitTest = function(){
        const out = _orig.apply(this, arguments);
        try { renderApplicantFromLast(); } catch(e){}
        return out;
      };
      window._scoresWrapped = true;
    } else {
      // Try once on load in case last result exists
      try { renderApplicantFromLast(); } catch(e){}
    }
  });

  // ---------- Recruiter → Latest Results: add “Scores” for all modes ----------
  function ensureScoresHeader(){
    const resultsCard = document.querySelector('#recruiter .card + .card');
    if (!resultsCard) return;
    const table = resultsCard.querySelector('table');
    if (!table) return;
    const ths = table.querySelectorAll('thead th');

    // Prefer existing "Line Scores" header; otherwise create "Scores"
    const hasLine = Array.from(ths).some(th => (th.textContent||'').trim().toLowerCase() === 'line scores');
    const hasScores = Array.from(ths).some(th => (th.textContent||'').trim().toLowerCase() === 'scores');
    if (!hasLine && !hasScores){
      const row = table.querySelector('thead tr');
      const afqtIdx = Array.from(ths).findIndex(th => (th.textContent||'').trim().toLowerCase() === 'afqt%');
      const th = document.createElement('th'); th.textContent = 'Scores';
      if (afqtIdx >= 0){ row.insertBefore(th, row.children[afqtIdx+1] || null); }
      else { row.appendChild(th); }
    } else if (hasLine) {
      const th = Array.from(ths).find(th => (th.textContent||'').trim().toLowerCase() === 'line scores');
      if (th) th.textContent = 'Scores';
    }
  }

  function getScoresCol(table){
    let idx = getColIndex(table, 'Scores');
    if (idx === -1) idx = getColIndex(table, 'Line Scores');
    return idx;
  }

  function ensureScoresCell(row, table){
    const idx = getScoresCol(table);
    if (idx === -1) return null;
    if (row.children.length <= idx){
      const td = document.createElement('td');
      td.textContent = '';
      row.appendChild(td);
    }
    return row.children[idx];
  }

  function findResultByCode(code){
    const rows = readResults();
    return rows.find(r => (r && (r.code||'').toString().trim() === code));
  }

  function extractRowInfo(row, table){
    const codeIdx = getColIndex(table, 'Code');
    const testIdx = getColIndex(table, 'Test');
    const code = (row.children[codeIdx]?.textContent || '').trim();
    const testText = (row.children[testIdx]?.textContent || '').toLowerCase();
    const isFull = testText.includes('full');
    return { code, isFull };
  }

  function fillRowScores(row, table){
    const cell = ensureScoresCell(row, table);
    if (!cell || cell.textContent.trim()) return;

    const { code, isFull } = extractRowInfo(row, table);
    if (!code) return;
    const r = findResultByCode(code);
    if (!r || !r.sub) return;

    if (isFull){
      cell.textContent = formatFull(computeLineScores(r.sub));
    } else {
      cell.textContent = formatCore(r.sub);
    }
  }

  function setupRecruiterScores(){
    const resultsCard = document.querySelector('#recruiter .card + .card');
    if (!resultsCard) return;
    const table = resultsCard.querySelector('table');
    const tbody = resultsCard.querySelector('#results-tbody');
    if (!table || !tbody) return;

    ensureScoresHeader();

    Array.from(tbody.querySelectorAll('tr')).forEach(tr => fillRowScores(tr, table));

    const obs = new MutationObserver(muts => {
      ensureScoresHeader();
      muts.forEach(m => {
        m.addedNodes.forEach(node => {
          if (node.nodeType === 1 && node.tagName === 'TR'){
            fillRowScores(node, table);
          }
        });
      });
    });
    obs.observe(tbody, { childList: true });
  }

  window.addEventListener('DOMContentLoaded', setupRecruiterScores);
  window.addEventListener('hashchange', setupRecruiterScores);
})();
</script>
<!-- END:EXT_LOGIC -->





<!-- BEGIN:EXT_RANDOMIZE_CHOICES v1 (no timers) -->
<script>
(function(){
  'use strict';

  // Utility: Fisher-Yates shuffle
  function shuffle(arr){
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i)];
    }
    return arr;
  }

  // Identify a "question block" node that contains a group of radio answers
  function findAnswerGroups(root){
    const inputs = Array.from(root.querySelectorAll('input[type="radio"]'));
    // Group by radio name
    const groups = {};
    inputs.forEach(inp => {
      const nm = inp.name || '__none__';
      (groups[nm] = groups[nm] || []).push(inp);
    });
    // Filter to plausible MCQ groups: 3..6 options, visible
    return Object.values(groups).filter(g => g.length >= 3 && g.length <= 6 && g.some(isVisible));
  }

  function isVisible(el){
    const r = el.getBoundingClientRect();
    return !!(r.width || r.height) && window.getComputedStyle(el).display !== 'none' && window.getComputedStyle(el).visibility !== 'hidden';
  }

  // Given a group of radios, find the DOM nodes we should shuffle (labels or li/div wrappers)
  function extractOptionNodes(group){
    const wrappers = group.map(inp => {
      // Prefer a <label> containing this input
      const label = inp.closest('label');
      if (label) return label;
      // Otherwise, use the direct parent row (li/div)
      const row = inp.closest('li, .option, .answer, .choice, .row, div');
      return row || inp.parentElement;
    });
    // All wrappers must share the same parent
    const parents = wrappers.map(w => w && w.parentElement).filter(Boolean);
    if (!parents.length) return null;
    const parent = parents[0];
    if (!parents.every(p => p === parent)) return null;
    return { parent, nodes: wrappers };
  }

  // Shuffle a radio group once per question render
  function shuffleGroupOnce(group){
    // Avoid re-shuffling the same group repeatedly in the same view
    if (group._shuffledOnce) return;
    const pack = extractOptionNodes(group);
    if (!pack) return;
    const { parent, nodes } = pack;

    // Preserve focus/selection
    const selected = group.find(inp => inp.checked);

    // Shuffle node order
    const order = nodes.slice();
    shuffle(order);
    order.forEach(node => parent.appendChild(node));

    // Restore selected if any (DOM move preserves checked state, but ensure no side effects)
    if (selected) selected.checked = true;

    group._shuffledOnce = true;
    parent.setAttribute('data-shuffled', '1');
  }

  function shuffleAllChoices(root){
    const groups = findAnswerGroups(root);
    groups.forEach(shuffleGroupOnce);
  }

  // Observe the main app area for question renders
  let lastRun = 0;
  const OBS_CONFIG = { childList: true, subtree: true };

  function tryShuffle(mutationRoot){
    const now = Date.now();
    // Debounce to avoid excessive runs during large DOM updates
    if (now - lastRun < 50) return;
    lastRun = now;
    shuffleAllChoices(document);
  }

  // Initial shuffle on load (in case first question is already rendered)
  window.addEventListener('DOMContentLoaded', function(){
    tryShuffle(document);
  });

  // Observe body (broad but safe) for new questions being rendered
  const obs = new MutationObserver(muts => {
    // Heuristic: only react when nodes with radios are added
    const hasRadio = muts.some(m => Array.from(m.addedNodes||[]).some(n => n.nodeType===1 && n.querySelector && n.querySelector('input[type="radio"]')));
    if (hasRadio) tryShuffle(document);
  });
  obs.observe(document.documentElement || document.body, OBS_CONFIG);

  // Also trigger on hash changes (app navigates via hash)
  window.addEventListener('hashchange', () => tryShuffle(document));
})();
</script>
<!-- END:EXT_RANDOMIZE_CHOICES v1 -->


<!-- BEGIN:EXT_FORM_ORDER_AND_STRAIGHTLINE v1 -->
<script>
(function(){
  'use strict';

  // -------- Question order randomization --------
  function shuffle(arr){
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i)];
    }
    return arr;
  }

  function groupRadioNames(root){
    const inputs = Array.from(root.querySelectorAll('input[type="radio"]'));
    const groups = new Map();
    inputs.forEach(inp => {
      const nm = inp.name || '__none__';
      if (!groups.has(nm)) groups.set(nm, []);
      groups.get(nm).push(inp);
    });
    return groups;
  }

  function findQuestionContainerForGroup(radios){
    // Heuristics: climb from first radio to a container that holds all radios
    const first = radios[0];
    if (!first) return null;
    // Try common wrappers
    const wrappers = ['.question', '.q', '.item', '.mcq', 'li', '.row'];
    for (const sel of wrappers){
      const n = first.closest(sel);
      if (n && radios.every(r => n.contains(r))) return n;
    }
    // Fallback: climb to a div that contains all radios
    let n = first.parentElement;
    while (n && n.parentElement && n.tagName){
      if (radios.every(r => n.contains(r))) return n;
      n = n.parentElement;
    }
    return null;
  }

  function findSectionContainer(questionNodes){
    if (!questionNodes.length) return null;
    const parents = questionNodes.map(q => q && q.parentElement).filter(Boolean);
    if (!parents.length) return null;
    // Choose the parent that contains all question nodes
    for (const p of parents){
      if (questionNodes.every(q => p.contains(q))) return p;
    }
    // Fallback: the parent of the first
    return parents[0];
  }

  function randomizeQuestionOrder(){
    const groups = groupRadioNames(document);
    const questions = [];
    groups.forEach((radios) => {
      const q = findQuestionContainerForGroup(radios);
      if (q) questions.push(q);
    });
    // Deduplicate questions
    const uniq = Array.from(new Set(questions));
    if (uniq.length < 3) return; // nothing to do
    const section = findSectionContainer(uniq);
    if (!section) return;
    const order = uniq.slice();
    shuffle(order);
    order.forEach(node => section.appendChild(node));
    section.setAttribute('data-questions-shuffled', '1');
  }

  // Run when content loads / navigates
  window.addEventListener('DOMContentLoaded', randomizeQuestionOrder);
  window.addEventListener('hashchange', randomizeQuestionOrder);

  // Also observe for dynamic renders
  const obs = new MutationObserver((muts) => {
    const addedRadio = muts.some(m => Array.from(m.addedNodes||[]).some(n => n.nodeType===1 && n.querySelector && n.querySelector('input[type="radio"]')));
    if (addedRadio) randomizeQuestionOrder();
  });
  obs.observe(document.documentElement || document.body, { childList:true, subtree:true });

  // -------- Straight-lining detection --------
  function analyzeStraightLining(){
    const groups = groupRadioNames(document);
    let countsByIndex = {};
    let totalGroups = 0;

    groups.forEach((radios, name) => {
      // Determine index of the selected option within the DOM order for this group
      const idx = radios.findIndex(r => r.checked);
      if (idx >= 0){
        countsByIndex[idx] = (countsByIndex[idx] || 0) + 1;
        totalGroups += 1;
      }
    });

    if (totalGroups < 10) return null; // too few to judge

    let maxIdx = -1, maxCt = 0;
    Object.keys(countsByIndex).forEach(k => {
      const ct = countsByIndex[k];
      if (ct > maxCt){ maxCt = ct; maxIdx = Number(k); }
    });

    const rate = maxCt / totalGroups;
    return { totalGroups, maxIdx, rate };
  }

  function readResults(){
    try { return JSON.parse(localStorage.getItem('asvab.results.v8')||'[]'); } catch(e){ return []; }
  }
  function writeResults(rows){
    localStorage.setItem('asvab.results.v8', JSON.stringify(rows||[]));
  }

  function applyStraightlinePenalty(){
    const info = analyzeStraightLining();
    if (!info) return;
    // If 65% or more of answers came from the same option index (e.g., "mostly A"),
    // cap AFQT and mark the record as suspect.
    if (info.rate >= 0.65){
      const rows = readResults();
      if (!rows.length) return;
      const r = rows[0];
      // Preserve original estimate
      r.afqt_est_raw = r.afqt_est || r.afqt || null;
      // Cap AFQT
      r.afqt_est = Math.min(Number(r.afqt_est || 99), 15);
      r.flags = Object.assign({}, r.flags, { straightline: { rate: info.rate, groups: info.totalGroups } });
      rows[0] = r;
      writeResults(rows);

      // Update UI if AFQT cell exists
      const afqtNode = document.querySelector('#applicant-summary .afqt-value, #applicant-summary .note strong');
      if (afqtNode){ afqtNode.textContent = String(r.afqt_est); }
      const tbl = document.querySelector('#recruiter .card + .card table');
      const tbody = document.querySelector('#recruiter #results-tbody');
      if (tbl && tbody && tbody.rows.length){
        const ths = tbl.querySelectorAll('thead th');
        let afqtIdx = -1;
        for (let i=0;i<ths.length;i++){
          if ((ths[i].textContent||'').trim().toLowerCase()==='afqt%'){ afqtIdx = i; break; }
        }
        if (afqtIdx !== -1){
          const firstRow = tbody.rows[0];
          if (firstRow && firstRow.cells[afqtIdx]){
            firstRow.cells[afqtIdx].textContent = String(r.afqt_est);
            firstRow.setAttribute('data-flag-straightline','1');
          }
        }
      }
    }
  }

  // Hook submitTest to compute penalty after scoring
  window.addEventListener('DOMContentLoaded', function(){
    if (typeof window.submitTest === 'function' && !window._straightlineWrapped){
      const _orig = window.submitTest;
      window.submitTest = function(){
        const out = _orig.apply(this, arguments);
        try { applyStraightlinePenalty(); } catch(e){}
        return out;
      };
      window._straightlineWrapped = true;
    }
  });
})();
</script>
<!-- END:EXT_FORM_ORDER_AND_STRAIGHTLINE v1 -->





<script id="ve-conversion" type="application/json">
{
  "pairs": [
    [
      0,
      20
    ],
    [
      1,
      20
    ],
    [
      2,
      20
    ],
    [
      3,
      20
    ],
    [
      4,
      21
    ],
    [
      5,
      21
    ],
    [
      6,
      22
    ],
    [
      7,
      22
    ],
    [
      8,
      22
    ],
    [
      9,
      22
    ],
    [
      10,
      25
    ],
    [
      11,
      25
    ],
    [
      12,
      27
    ],
    [
      13,
      27
    ],
    [
      14,
      29
    ],
    [
      15,
      29
    ],
    [
      16,
      31
    ],
    [
      17,
      31
    ],
    [
      18,
      32
    ],
    [
      19,
      32
    ],
    [
      20,
      34
    ],
    [
      21,
      34
    ],
    [
      22,
      36
    ],
    [
      23,
      36
    ],
    [
      24,
      38
    ],
    [
      25,
      38
    ],
    [
      26,
      40
    ],
    [
      27,
      40
    ],
    [
      28,
      42
    ],
    [
      29,
      42
    ],
    [
      30,
      44
    ],
    [
      31,
      44
    ],
    [
      32,
      45
    ],
    [
      33,
      45
    ],
    [
      34,
      47
    ],
    [
      35,
      47
    ],
    [
      36,
      49
    ],
    [
      37,
      49
    ],
    [
      38,
      50
    ],
    [
      39,
      50
    ],
    [
      40,
      52
    ],
    [
      41,
      52
    ],
    [
      42,
      54
    ],
    [
      43,
      54
    ],
    [
      44,
      56
    ],
    [
      45,
      56
    ],
    [
      46,
      58
    ],
    [
      47,
      58
    ],
    [
      48,
      60
    ],
    [
      49,
      60
    ],
    [
      50,
      62
    ]
  ],
  "note": "GoodCalculators VE table preloaded: left = (WK+PC) raw sum, right = VE standard score. Exact mapping expanded per integer."
}
</script>


<script id="afqt-config" type="application/json">
{
  "percentile_map": null,
  "logistic": { "mu": 0.68, "k": 9.0 },
  "apply_straightline_cap": true,
  "straightline_cap": 15,
  "straightline_same_option_rate": 0.65
}
</script>


<!-- BEGIN:EXT_AFQT_VE_SCORING v1 -->
<script>
(function(){
  'use strict';

  // ---- helpers to read JSON blobs ----
  function readJSONById(id){
    
    const node = document.getElementById(id);
    if (!node) return null;
    try { return JSON.parse(node.textContent || node.innerText || 'null'); }
    catch(e){ return null; }
  }

  const VE_TABLE = readJSONById('ve-conversion');
  function readCatConfig(){
    const node = document.getElementById('afqt-category-config');
    if(!node) return null;
    try { return JSON.parse(node.textContent||''); } catch(e){ return null; }
  }
  function mapPercentileToCategory(pct){
    const cfg = readCatConfig();
    if(!cfg || !Array.isArray(cfg.ranges)) return null;
    for(const r of cfg.ranges){
      if(pct >= r.min && pct <= r.max) return r.cat;
    }
    return null;
  }
  const AFQT_CFG = readJSONById('afqt-config') || { logistic:{mu:0.68,k:9.0} };

  function piecewiseVE(rawSum){
    // Convert WK+PC raw -> VE std score via piecewise linear interpolation
    if (!VE_TABLE || !VE_TABLE.pairs || !VE_TABLE.pairs.length){
      // fallback linear (approximate)
      return Math.round(20 + (62-20) * Math.max(0, Math.min(1, rawSum/72)));
    }
    const pairs = VE_TABLE.pairs.slice().sort(function(a,b){return a[0]-b[0];});
    if (rawSum <= pairs[0][0]) return pairs[0][1];
    if (rawSum >= pairs[pairs.length-1][0]) return pairs[pairs.length-1][1];
    for (let i=0;i<pairs.length-1;i++){
      const [x1,y1] = pairs[i]; const [x2,y2] = pairs[i+1];
      if (rawSum >= x1 && rawSum <= x2){
        const t = (rawSum - x1) / (x2 - x1);
        return Math.round(y1 + t*(y2 - y1));
      }
    }
    return Math.round(20 + (62-20) * Math.max(0, Math.min(1, rawSum/72)));
  }

  function logisticPercentile(scaled){
    const mu = (AFQT_CFG && AFQT_CFG.logistic && typeof AFQT_CFG.logistic.mu==='number') ? AFQT_CFG.logistic.mu : 0.68;
    const k  = (AFQT_CFG && AFQT_CFG.logistic && typeof AFQT_CFG.logistic.k==='number')  ? AFQT_CFG.logistic.k  : 9.0;
    const x  = k * (scaled - mu);
    const est = 100 / (1 + Math.exp(-x));
    return Math.max(1, Math.min(99, Math.round(est)));
  }

  
  function readRawToPercentTable(){
    const node = document.getElementById('afqt-raw-to-percentile');
    if(!node) return null;
    try { return JSON.parse(node.textContent||''); } catch(e){ return null; }
  }
  function mapAfqtRawToPercentile(raw){
    const tbl = readRawToPercentTable();
    if(!tbl || !Array.isArray(tbl.raw_to_percentile)) return null;
    for(const row of tbl.raw_to_percentile){
      if(raw >= row.min && raw <= row.max) return row.p;
    }
    return null;
  }

  function computeAFQTPercentileFromResult(r){
    if (!r || !r.sub) return null;

    // Raw correct counts (assumes your app populates these)
    const AR = Number(r.sub.AR || 0);
    const MK = Number(r.sub.MK || 0);
    const WK = Number(r.sub.WK || 0);
    const PC = Number(r.sub.PC || 0);

    // Totals to normalize
    const AR_T = Number(r.sub.AR_T || r.sub.AR_total || r.sub.ARt || 0);
    const MK_T = Number(r.sub.MK_T || r.sub.MK_total || r.sub.MKt || 0);
    const WK_T = Number(r.sub.WK_T || r.sub.WK_total || r.sub.WKt || 0);
    const PC_T = Number(r.sub.PC_T || r.sub.PC_total || r.sub.PCt || 0);

    // VE: from WK+PC raw using table
    const rawVE = (window.piecewiseVEPrefersOverride ? window.piecewiseVEPrefersOverride(WK + PC, piecewiseVE(WK + PC)) : piecewiseVE(WK + PC));
    // Theoretical VE max from table
    const veMax = (function(){
      if (VE_TABLE && VE_TABLE.pairs && VE_TABLE.pairs.length) return VE_TABLE.pairs[VE_TABLE.pairs.length-1][1];
      return 62;
    })();

    // AFQT raw formula: 2*VE + AR + MK
    const afqtRaw = 2*rawVE + AR + MK;

    // Normalize by theoretical max (2*VEmax + AR_T + MK_T) to get a 0..1 scale
    const denom = Math.max(1, 2*veMax + AR_T + MK_T);
    const scaled = Math.max(0, Math.min(1, afqtRaw / denom));

    // Convert to percentile via GoodCalculators table if present
    let percentile = mapAfqtRawToPercentile(afqtRaw);
    if (percentile === null){
      // fallback to logistic on scaled value (legacy)
      percentile = logisticPercentile(scaled);
    }
    return { ve: rawVE, afqtRaw: afqtRaw, percentile: percentile, scaledRaw: scaled };
  }

  function readResults(){
    try { return JSON.parse(localStorage.getItem('asvab.results.v8') || '[]'); } catch(e){ return []; }
  }
  function writeResults(rows){
    localStorage.setItem('asvab.results.v8', JSON.stringify(rows||[]));
  }

  function updateUIWithAFQT(info){
    if (!info) return;
    // Applicant view
    const afqtNode = document.querySelector('#applicant-summary .afqt-value, #applicant-summary #afqt-val strong, #applicant-summary .note strong');
    if (afqtNode){
      const cat = mapPercentileToCategory(info.percentile);
      afqtNode.textContent = String(info.percentile) + (cat ? ' ('+cat+')' : '');
    }

    // Recruiter view (first/latest row)
    const tbl = document.querySelector('#recruiter .card + .card table');
    const tbody = document.querySelector('#recruiter #results-tbody');
    if (tbl && tbody && tbody.rows.length){
      const ths = tbl.querySelectorAll('thead th');
      let afqtIdx = -1;
      for (let i=0;i<ths.length;i++){
        if ((ths[i].textContent||'').trim().toLowerCase()==='afqt%'){ afqtIdx = i; break; }
      }
      if (afqtIdx !== -1){
        const firstRow = tbody.rows[0];
        if (firstRow && firstRow.cells[afqtIdx]){
          firstRow.cells[afqtIdx].textContent = String(info.percentile);
        }
      }
    }
  }

  // Optional: keep straight-lining cap if configured
  function applyStraightlineCapIfConfigured(percentile){
    try {
      if (!AFQT_CFG || !AFQT_CFG.apply_straightline_cap) return percentile;
      const rateThreshold = AFQT_CFG.straightline_same_option_rate || 0.65;
      const cap = AFQT_CFG.straightline_cap || 15;

      // Analyze selection positions
      const inputs = Array.from(document.querySelectorAll('input[type="radio"]'));
      const groups = {};
      inputs.forEach(inp => {
        const nm = inp.name || '__none__';
        (groups[nm] = groups[nm] || []).push(inp);
      });
      let counts = {}, total=0;
      Object.values(groups).forEach(radios => {
        const idx = radios.findIndex(r => r.checked);
        if (idx>=0){ counts[idx]=(counts[idx]||0)+1; total++; }
      });
      if (total >= 10){
        let maxCt = 0;
        Object.values(counts).forEach(ct => { if (ct>maxCt) maxCt = ct; });
        const rate = maxCt/total;
        if (rate >= rateThreshold) return Math.min(percentile, cap);
      }
    } catch(e){}
    return percentile;
  }

  function recomputeAndPersist(){
    const rows = readResults();
    if (!rows.length) return;
    const r = rows[0];
    const info = computeAFQTPercentileFromResult(r);
    if (!info) return;

    // Apply optional straightline cap
    info.percentile = applyStraightlineCapIfConfigured(info.percentile);

    // Persist
    r.afqt_est = info.percentile;
    r.ve_est   = info.ve;
    r.afqt_raw = info.afqtRaw;
    r.afqt_scaled = info.scaledRaw;
    r.afqt_cat = mapPercentileToCategory(info.percentile) || null;
    rows[0] = r;
    writeResults(rows);

    // Update UI
    updateUIWithAFQT(info);
  }

  window.addEventListener('DOMContentLoaded', function(){
    if (typeof window.submitTest === 'function' && !window._afqtVeWrapped){
      const _orig = window.submitTest;
      window.submitTest = function(){
        const out = _orig.apply(this, arguments);
        try { recomputeAndPersist(); } catch(e){}
        return out;
      };
      window._afqtVeWrapped = true;
    } else {
      try { recomputeAndPersist(); } catch(e){}
    }
  });
})();
</script>
<!-- END:EXT_AFQT_VE_SCORING v1 -->


<!-- BEGIN:EXT_SUBTEST_BREAKDOWN_CARD v1 -->
<script>
(function(){
  'use strict';
  function ensureSubtestCard(){
    const afqtBox=document.getElementById('applicant-summary');
    if(!afqtBox)return;
    if(!document.getElementById('applicant-subtest-breakdown')){
      const box=document.createElement('div');
      box.id='applicant-subtest-breakdown';
      box.className='card hidden';
      box.innerHTML='<h3>Subtest Breakdown</h3><div id="subtest-breakdown-content" class="note">—</div>';
      afqtBox.parentNode.insertBefore(box,afqtBox.nextSibling);
    }
  }
  function renderSubtestBreakdown(){
    const box=document.getElementById('applicant-subtest-breakdown');
    if(!box)return;
    const rows=JSON.parse(localStorage.getItem('asvab.results.v8')||'[]');
    if(!rows.length||!rows[0].sub)return;
    const sub=rows[0].sub;
    const keys=['WK','PC','AR','MK','GS','EI','AS','MC'];
    const parts=[];
    keys.forEach(k=>{
      const total=sub[k+'_T']||0, correct=sub[k]||0;
      if(total>0){parts.push(`${k}: ${correct} / ${total}`);}
    });
    if(!parts.length){document.getElementById('subtest-breakdown-content').innerHTML='No data.';return;}
    document.getElementById('subtest-breakdown-content').innerHTML=parts.join('<br>');
    box.classList.remove('hidden');
  }
  window.addEventListener('DOMContentLoaded',()=>{
    ensureSubtestCard();
    if(typeof window.submitTest==='function'&&!window._subtestBreakWrap){
      const _orig=window.submitTest;
      window.submitTest=function(){
        const out=_orig.apply(this,arguments);
        try{renderSubtestBreakdown();}catch(e){console.error(e);}
        return out;
      };
      window._subtestBreakWrap=true;
    }
  });
})();
</script>
<!-- END:EXT_SUBTEST_BREAKDOWN_CARD v1 -->


<!-- BEGIN:EXT_VISIBLE_RESULTS_CARDS v1 -->
<script>
(function(){
  'use strict';

  function renderApplicantResults(){
    const container = document.getElementById('applicant-summary');
    if(!container) return;

    // Ensure we have recent results
    const results = JSON.parse(localStorage.getItem('asvab.results.v8') || '[]');
    if(!results.length) return;
    const res = results[0];
    const sub = res.sub || {};

    // Remove any previous cards (if re-render)
    ['applicant-subtest-breakdown','applicant-line-scores'].forEach(id=>{
      const old = document.getElementById(id);
      if(old) old.remove();
    });

    // --- Subtest Breakdown ---
    const subCard = document.createElement('div');
    subCard.id = 'applicant-subtest-breakdown';
    subCard.className = 'card';
    const subHeader = document.createElement('h3');
    subHeader.textContent = 'Subtest Breakdown';
    const subContent = document.createElement('div');
    subContent.className = 'note';

    const keys = ['WK','PC','AR','MK','GS','EI','AS','MC'];
    const labels = {
      WK:'Word Knowledge (WK)',
      PC:'Paragraph Comprehension (PC)',
      AR:'Arithmetic Reasoning (AR)',
      MK:'Mathematics Knowledge (MK)',
      GS:'General Science (GS)',
      EI:'Electronics Information (EI)',
      AS:'Auto & Shop (AS)',
      MC:'Mechanical Comprehension (MC)'
    };
    const lines = [];
    keys.forEach(k=>{
      const total = sub[k+'_T'] || 0;
      const correct = sub[k] || 0;
      if(total>0){
        const pct = Math.round((correct/total)*100);
        lines.push(`${labels[k]}: ${correct} / ${total} (${pct}%)`);
      }
    });
    subContent.innerHTML = lines.length ? lines.join('<br>') : 'No subtest data available.';
    subCard.appendChild(subHeader);
    subCard.appendChild(subContent);
    container.parentNode.insertBefore(subCard, container.nextSibling);

    // --- Line Scores (Full test only) ---
    const fullKeys = ['CL','CO','EL','FA','GM','GT','MM','OF','SC','ST'];
    if(fullKeys.some(k => res.lines && res.lines[k] !== undefined)){
      const lineCard = document.createElement('div');
      lineCard.id = 'applicant-line-scores';
      lineCard.className = 'card';
      const lh = document.createElement('h3');
      lh.textContent = 'Army Line Scores (Full Test)';
      const lc = document.createElement('div');
      lc.className = 'note';

      const parts = [];
      fullKeys.forEach(k=>{
        const val = (res.lines && res.lines[k]!==undefined)? res.lines[k] : null;
        if(val!==null){ parts.push(`${k}: ${val}`); }
      });
      lc.innerHTML = parts.length ? parts.join(' | ') : 'No line score data.';
      lineCard.appendChild(lh);
      lineCard.appendChild(lc);
      subCard.parentNode.insertBefore(lineCard, subCard.nextSibling);
    }
  }

  window.addEventListener('DOMContentLoaded', ()=>{
    if(typeof window.submitTest==='function' && !window._visibleResultsWrap){
      const _orig = window.submitTest;
      window.submitTest = function(){
        const out = _orig.apply(this, arguments);
        try { renderApplicantResults(); } catch(e){ console.error(e); }
        return out;
      };
      window._visibleResultsWrap = true;
    }
  });
})();
</script>
<!-- END:EXT_VISIBLE_RESULTS_CARDS v1 -->


<!-- BEGIN:EXT_RENDER_SUBTEST_AND_LINESCORES v2 -->
<script>
(function(){
  'use strict';

  function toInt(v){ return Math.max(0, Math.round(Number(v||0))); }

  function computeLineScores(sub){
    const WK = toInt(sub.WK), PC = toInt(sub.PC), AR = toInt(sub.AR), MK = toInt(sub.MK);
    const GS = toInt(sub.GS), EI = toInt(sub.EI), AS = toInt(sub.AS), MC = toInt(sub.MC);
    const VE = WK + PC;
    return {
      CL: VE + AR + MK,
      CO: AR + AS + MC,
      EL: GS + AR + MK + EI,
      FA: AR + MK + MC,
      GM: GS + AS + MK + EI,
      GT: VE + AR,
      MM: AS + MC + EI,
      OF: VE + AS + MC,
      SC: VE + AR + AS + MC,
      ST: GS + VE + MK + MC,
    };
  }

  function renderNow(){
    // Pull latest results
    let rows = [];
    try { rows = JSON.parse(localStorage.getItem('asvab.results.v8')||'[]'); } catch(e){ rows = []; }
    if (!rows.length) return;
    const r = rows[0];
    const sub = r.sub || {};

    // --- Subtest Breakdown ---
    const keys = ['WK','PC','AR','MK','GS','EI','AS','MC'];
    const labels = {
      WK:'Word Knowledge (WK)',
      PC:'Paragraph Comprehension (PC)',
      AR:'Arithmetic Reasoning (AR)',
      MK:'Mathematics Knowledge (MK)',
      GS:'General Science (GS)',
      EI:'Electronics Information (EI)',
      AS:'Auto & Shop (AS)',
      MC:'Mechanical Comprehension (MC)'
    };
    const parts = [];
    keys.forEach(k=>{
      const total = Number(sub[k + '_T'] || 0);
      const correct = Number(sub[k] || 0);
      if (total > 0){
        const pct = Math.round((correct/total)*100);
        parts.push(`${labels[k]}: ${correct} / ${total} (${isFinite(pct)?pct:0}%)`);
      }
    });
    const subNode = document.getElementById('subtest-breakdown-content');
    if (subNode) subNode.innerHTML = parts.length ? parts.join('<br>') : 'No subtest data available.';

    // --- Line Scores (Full test only) ---
    const lineBox = document.getElementById('applicant-line-scores');
    const lsNode = document.getElementById('line-scores-content');
    const isFull = (r.mode === 'full') || ((r.test||'').toLowerCase().includes('full')) || (sub.GS_T || sub.EI_T || sub.AS_T || sub.MC_T);
    if (isFull && lineBox && lsNode){
      const ls = r.lines || computeLineScores(sub);
      const order = ['CL','CO','EL','FA','GM','GT','MM','OF','SC','ST'];
      const text = order.map(k => `${k} ${ls[k]!==undefined? ls[k] : '—'}`).join(' | ');
      lsNode.textContent = text;
      lineBox.style.display = '';
    } else if (lineBox){
      lineBox.style.display = 'none';
    }
  }

  window.addEventListener('DOMContentLoaded', renderNow);
  window.addEventListener('hashchange', renderNow);
  // Also run if a custom event is dispatched by scoring code
  window.addEventListener('asvab:results:refresh', renderNow);
})();
</script>
<!-- END:EXT_RENDER_SUBTEST_AND_LINESCORES v2 -->


<script id="mk-cleaned-appendix" type="application/json">
[
  {
    "id": "MK_001",
    "question": "Simplify: 3x + 5x = ?",
    "options": [
      "8",
      "8x",
      "15x",
      "x8"
    ],
    "correct_answer": "8x",
    "explanation": "Combine like terms: 3x + 5x = 8x."
  },
  {
    "id": "MK_002",
    "question": "Evaluate: 9^2 - 4^2 = ?",
    "options": [
      "13",
      "17",
      "65",
      "65"
    ],
    "correct_answer": "65",
    "explanation": "81 - 16 = 65."
  },
  {
    "id": "MK_003",
    "question": "If 2x + 3 = 11, what is x?",
    "options": [
      "3",
      "4",
      "5",
      "6"
    ],
    "correct_answer": "4",
    "explanation": "2x = 8 → x = 4."
  },
  {
    "id": "MK_004",
    "question": "Simplify: (3x^2)(2x^3) = ?",
    "options": [
      "5x^5",
      "6x^5",
      "6x^6",
      "5x^6"
    ],
    "correct_answer": "6x^5",
    "explanation": "Multiply coefficients (3×2=6) and add exponents (2+3=5)."
  },
  {
    "id": "MK_005",
    "question": "Find the area of a rectangle 6 m long and 3 m wide.",
    "options": [
      "9 m²",
      "15 m²",
      "18 m²",
      "21 m²"
    ],
    "correct_answer": "18 m²",
    "explanation": "A = L × W = 6×3 = 18 m²."
  },
  {
    "id": "MK_006",
    "question": "Solve: x/5 = 9",
    "options": [
      "40",
      "45",
      "50",
      "55"
    ],
    "correct_answer": "45",
    "explanation": "Multiply both sides by 5: x = 45."
  },
  {
    "id": "MK_007",
    "question": "Simplify: √(49/9) = ?",
    "options": [
      "7/3",
      "3/7",
      "14/9",
      "7"
    ],
    "correct_answer": "7/3",
    "explanation": "√49 = 7, √9 = 3 → 7/3."
  },
  {
    "id": "MK_008",
    "question": "If y = 3x + 2 and x = 4, what is y?",
    "options": [
      "10",
      "12",
      "14",
      "15"
    ],
    "correct_answer": "14",
    "explanation": "y = 3(4)+2 = 12+2=14."
  },
  {
    "id": "MK_009",
    "question": "Solve for x: 5x - 7 = 18",
    "options": [
      "3",
      "4",
      "5",
      "6"
    ],
    "correct_answer": "5",
    "explanation": "5x=25 → x=5."
  },
  {
    "id": "MK_010",
    "question": "The area of a circle is 154 cm². Find the radius. (Use π≈3.14)",
    "options": [
      "5 cm",
      "6 cm",
      "7 cm",
      "8 cm"
    ],
    "correct_answer": "7 cm",
    "explanation": "A=πr^2→154=3.14r^2→r^2≈49→r=7."
  },
  {
    "id": "MK_011",
    "question": "Solve for x: x + 7 = 19",
    "options": [
      "9",
      "10",
      "11",
      "12"
    ],
    "correct_answer": "12",
    "explanation": "x=19-7=12."
  },
  {
    "id": "MK_012",
    "question": "Simplify: 6(2x + 3)",
    "options": [
      "12x + 3",
      "12x + 18",
      "8x + 3",
      "6x + 3"
    ],
    "correct_answer": "12x + 18",
    "explanation": "Distribute: 6·(2x)=12x; 6·3=18."
  },
  {
    "id": "MK_013",
    "question": "Evaluate: (5a^2)(-2a^3)",
    "options": [
      "-10a^5",
      "-10a^6",
      "10a^5",
      "10a^6"
    ],
    "correct_answer": "-10a^5",
    "explanation": "Multiply coeffs and add exponents: -10a^5."
  },
  {
    "id": "MK_014",
    "question": "Factor: x^2 - 9",
    "options": [
      "(x-9)(x+1)",
      "(x-3)(x+3)",
      "(x-1)(x+9)",
      "(x-3)^2"
    ],
    "correct_answer": "(x-3)(x+3)",
    "explanation": "Difference of squares."
  },
  {
    "id": "MK_015",
    "question": "Solve: 3x - 2 = 4x + 5",
    "options": [
      "-7",
      "7",
      "-5",
      "5"
    ],
    "correct_answer": "-7",
    "explanation": "Bring x terms together: -2-5 = x → x = -7."
  },
  {
    "id": "MK_016",
    "question": "Find the perimeter: rectangle with L=11, W=4",
    "options": [
      "15",
      "22",
      "24",
      "30"
    ],
    "correct_answer": "30",
    "explanation": "P = 2(L + W) = 2(11 + 4) = 2(15) = 30."
  },
  {
    "id": "MK_017",
    "question": "Convert 0.75 to a fraction.",
    "options": [
      "1/2",
      "2/3",
      "3/4",
      "4/5"
    ],
    "correct_answer": "3/4",
    "explanation": "0.75 = 3/4."
  },
  {
    "id": "MK_018",
    "question": "Solve: 2/(x-1) = 1/3",
    "options": [
      "x = 7",
      "x=4",
      "x=2",
      "x=-5"
    ],
    "correct_answer": "x = 7",
    "explanation": "Cross-multiply: 2×3 = x−1 → x = 7."
  },
  {
    "id": "MK_019",
    "question": "If 4x = 3y and y = 12, find x.",
    "options": [
      "6",
      "8",
      "9",
      "12"
    ],
    "correct_answer": "9",
    "explanation": "4x=36 → x=9."
  },
  {
    "id": "MK_020",
    "question": "What is the slope of the line y = -3x + 5?",
    "options": [
      "-3",
      "3",
      "5",
      "-5"
    ],
    "correct_answer": "-3",
    "explanation": "Slope is the coefficient of x."
  },
  {
    "id": "MK_021",
    "question": "Simplify: (x^3 y^2)/(x y^5)",
    "options": [
      "x^2/y^3",
      "x^4 y^7",
      "y^3/x^2",
      "x^2 y^3"
    ],
    "correct_answer": "x^2/y^3",
    "explanation": "Subtract exponents: x^(3-1) y^(2-5)=x^2 y^-3."
  },
  {
    "id": "MK_022",
    "question": "Find the area of a triangle with base 10 and height 9.",
    "options": [
      "45",
      "90",
      "18",
      "19"
    ],
    "correct_answer": "45",
    "explanation": "A=1/2 bh=45."
  },
  {
    "id": "MK_023",
    "question": "Evaluate: |-14|",
    "options": [
      "-14",
      "0",
      "14",
      "28"
    ],
    "correct_answer": "14",
    "explanation": "Absolute value is positive magnitude."
  },
  {
    "id": "MK_024",
    "question": "Solve: 7x + 5 = 3x + 25",
    "options": [
      "3",
      "4",
      "5",
      "6"
    ],
    "correct_answer": "5",
    "explanation": "4x=20 → x=5."
  },
  {
    "id": "MK_025",
    "question": "If the diameter is 10, what is the circumference? (Use π≈3.14)",
    "options": [
      "15.7",
      "25.1",
      "31.4",
      "62.8"
    ],
    "correct_answer": "31.4",
    "explanation": "C=πd=3.14*10=31.4."
  },
  {
    "id": "MK_026",
    "question": "Solve for x: 3x + 7 = 25",
    "options": [
      "4",
      "5",
      "6",
      "9"
    ],
    "correct_answer": "6",
    "explanation": "3x = 18 → x = 6."
  },
  {
    "id": "MK_027",
    "question": "What is 12% of 250?",
    "options": [
      "25",
      "28",
      "30",
      "32"
    ],
    "correct_answer": "30",
    "explanation": "0.12x250 = 30."
  },
  {
    "id": "MK_028",
    "question": "Simplify: 5^2 - 3^2",
    "options": [
      "4",
      "7",
      "16",
      "25"
    ],
    "correct_answer": "16",
    "explanation": "25 - 9 = 16."
  },
  {
    "id": "MK_029",
    "question": "If a triangle has angles 35° and 65°, what is the third angle?",
    "options": [
      "70°",
      "75°",
      "80°",
      "85°"
    ],
    "correct_answer": "80°",
    "explanation": "180° - (35°+65°) = 80°."
  },
  {
    "id": "MK_030",
    "question": "Convert 0.375 to a fraction in simplest form.",
    "options": [
      "1/3",
      "3/8",
      "5/12",
      "7/16"
    ],
    "correct_answer": "3/8",
    "explanation": "0.375 = 375/1000 = 3/8."
  },
  {
    "id": "MK_031",
    "question": "Find the slope between (2, 5) and (6, 13).",
    "options": [
      "2",
      "3/2",
      "4/3",
      "8/7"
    ],
    "correct_answer": "2",
    "explanation": "Slope = (13-5)/(6-2)=8/4=2."
  },
  {
    "id": "MK_032",
    "question": "Evaluate: |-9| + |4| - |-3|",
    "options": [
      "8",
      "10",
      "14",
      "16"
    ],
    "correct_answer": "10",
    "explanation": "9 + 4 - 3 = 10."
  },
  {
    "id": "MK_033",
    "question": "Area of a rectangle with length 12 and width 7.",
    "options": [
      "19",
      "42",
      "72",
      "84"
    ],
    "correct_answer": "84",
    "explanation": "12x7 = 84."
  },
  {
    "id": "MK_034",
    "question": "Solve for y: 4y - 6 = 2y + 8",
    "options": [
      "5",
      "6",
      "7",
      "8"
    ],
    "correct_answer": "7",
    "explanation": "4y-2y = 8+6 → 2y=14 → y=7."
  },
  {
    "id": "MK_035",
    "question": "Simplify: (3x)(2x^2)",
    "options": [
      "5x^2",
      "6x^2",
      "6x^3",
      "6x^4"
    ],
    "correct_answer": "6x^3",
    "explanation": "Multiply coefficients and add exponents: 3x2=6 and x^1xx^2=x^3."
  }
]
</script>


<script id="afqt-raw-to-percentile" type="application/json">{"raw_to_percentile":[{"min":80,"max":120,"p":1},{"min":121,"max":124,"p":2},{"min":125,"max":127,"p":3},{"min":128,"max":131,"p":4},{"min":132,"max":134,"p":5},{"min":135,"max":137,"p":6},{"min":138,"max":139,"p":7},{"min":140,"max":142,"p":8},{"min":143,"max":144,"p":9},{"min":145,"max":146,"p":10},{"min":147,"max":148,"p":11},{"min":149,"max":150,"p":12},{"min":151,"max":153,"p":13},{"min":154,"max":154,"p":14},{"min":155,"max":156,"p":15},{"min":157,"max":158,"p":16},{"min":159,"max":160,"p":17},{"min":161,"max":162,"p":18},{"min":163,"max":164,"p":19},{"min":165,"max":165,"p":20},{"min":166,"max":167,"p":21},{"min":168,"max":169,"p":22},{"min":170,"max":171,"p":23},{"min":172,"max":173,"p":24},{"min":174,"max":175,"p":25},{"min":176,"max":177,"p":26},{"min":178,"max":179,"p":27},{"min":180,"max":181,"p":28},{"min":182,"max":183,"p":29},{"min":184,"max":185,"p":30},{"min":186,"max":187,"p":31},{"min":188,"max":189,"p":32},{"min":190,"max":191,"p":33},{"min":192,"max":193,"p":34},{"min":194,"max":195,"p":35},{"min":196,"max":197,"p":36},{"min":198,"max":199,"p":37},{"min":200,"max":201,"p":38},{"min":202,"max":203,"p":39},{"min":204,"max":205,"p":40},{"min":206,"max":207,"p":41},{"min":208,"max":209,"p":42},{"min":210,"max":211,"p":43},{"min":212,"max":213,"p":44},{"min":214,"max":215,"p":45},{"min":216,"max":217,"p":46}]}</script>


<!-- BEGIN:EXT_VE_TABLE_EDITOR v1 -->
<style>
  #ve-editor-toggle{ position:fixed; right:12px; bottom:12px; z-index:9999; }
  #ve-editor{ position:fixed; right:12px; bottom:56px; width:420px; max-width:96vw;
    background:#0b1220; color:#e6eefb; border:1px solid rgba(255,255,255,.15); border-radius:12px; 
    padding:12px; box-shadow:0 10px 30px rgba(0,0,0,.35); display:none; z-index:9999;}
  #ve-editor h4{ margin:6px 0 10px; font-size:14px; }
  #ve-editor textarea{ width:100%; min-height:160px; background:#0f172a; color:#e6eefb; border:1px solid #334155; border-radius:8px; padding:8px; font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:12px; }
  #ve-editor .row{ display:flex; gap:8px; margin-top:8px; }
  #ve-editor .row button{ flex:1; padding:8px 10px; border-radius:8px; border:1px solid #334155; background:#1f2937; color:#e6eefb; cursor:pointer;}
  #ve-editor .row button:hover{ background:#253142; }
  #ve-editor .hint{ font-size:11px; opacity:.85; margin-top:6px; line-height:1.35; }
</style>
<button id="ve-editor-toggle" title="VE Conversion Table">VE Table</button>
<div id="ve-editor" role="dialog" aria-label="VE Conversion Table Editor">
  <h4>VE Conversion (WK + PC raw → VE standard score)</h4>
  <textarea id="ve-editor-json"></textarea>
  <div class="row">
    <button id="ve-editor-save">Save</button>
    <button id="ve-editor-reset">Reset</button>
    <button id="ve-editor-close">Close</button>
  </div>
  <div class="hint">
    Paste the exact table from GoodCalculators here as JSON:
    <br>[ [raw_sum, VE], [raw_sum, VE], ... ]
    <br>We interpolate between points and clamp outside the range.
  </div>
</div>
<script>
(function(){
  'use strict';
  const KEY = 've.conversion.pairs.override.v1';

  function readNodeJSON(id){
    const n = document.getElementById(id);
    if(!n) return null;
    try{ return JSON.parse(n.textContent||''); }catch(e){ return null; }
  }
  function getCurrentPairs(){
    try{
      const raw = localStorage.getItem(KEY);
      if(raw){ const arr = JSON.parse(raw); if (Array.isArray(arr)) return arr; }
    }catch(e){}
    const base = readNodeJSON('ve-conversion');
    return (base && Array.isArray(base.pairs)) ? base.pairs : [];
  }
  function setOverridePairs(pairs){
    try{ localStorage.setItem(KEY, JSON.stringify(pairs||[])); }catch(e){}
    window.dispatchEvent(new Event('asvab:results:refresh'));
  }

  window.addEventListener('DOMContentLoaded', function(){
    const toggle = document.getElementById('ve-editor-toggle');
    const panel = document.getElementById('ve-editor');
    const ta = document.getElementById('ve-editor-json');
    const save = document.getElementById('ve-editor-save');
    const reset = document.getElementById('ve-editor-reset');
    const closeBtn = document.getElementById('ve-editor-close');

    if(toggle && panel && ta && save && reset && closeBtn){
      toggle.addEventListener('click', ()=>{
        try{ ta.value = JSON.stringify(getCurrentPairs(), null, 2); }catch(e){ ta.value='[]'; }
        panel.style.display = (panel.style.display==='none'||!panel.style.display) ? 'block' : 'none';
      });
      closeBtn.addEventListener('click', ()=> panel.style.display='none');
      reset.addEventListener('click', ()=>{
        localStorage.removeItem(KEY);
        ta.value = JSON.stringify(getCurrentPairs(), null, 2);
        window.dispatchEvent(new Event('asvab:results:refresh'));
      });
      save.addEventListener('click', ()=>{
        try{
          const parsed = JSON.parse(ta.value);
          if(!Array.isArray(parsed)) throw new Error('JSON must be an array of [raw_sum, VE] pairs');
          setOverridePairs(parsed);
          panel.style.display='none';
        }catch(e){
          alert('Invalid JSON: ' + e.message);
        }
      });
    }

    if(typeof window.piecewiseVEPrefersOverride!=='function'){
      window.piecewiseVEPrefersOverride = function(rawSum, fallback){
        let pairs = null;
        try{
          const raw = localStorage.getItem(KEY);
          if(raw){ const arr = JSON.parse(raw); if (Array.isArray(arr) && arr.length) pairs = arr; }
        }catch(e){}
        if(!pairs){
          try{
            const base = readNodeJSON('ve-conversion');
            if(base && Array.isArray(base.pairs) && base.pairs.length) pairs = base.pairs;
          }catch(e){}
        }
        if(!pairs) return fallback;

        pairs = pairs.slice().sort((a,b)=>a[0]-b[0]);
        if (rawSum <= pairs[0][0]) return pairs[0][1];
        if (rawSum >= pairs[pairs.length-1][0]) return pairs[pairs.length-1][1];
        for (let i=0;i<pairs.length-1;i++){
          const [x1,y1] = pairs[i]; const [x2,y2] = pairs[i+1];
          if (rawSum >= x1 && rawSum <= x2){
            const t = (rawSum - x1) / (x2 - x1);
            return Math.round(y1 + t*(y2 - y1));
          }
        }
        return fallback;
      };
    }
  });
})();
</script>
<!-- END:EXT_VE_TABLE_EDITOR v1 -->


<script id="afqt-category-config" type="application/json">
{
  "ranges": [
    { "min": 93, "max": 99, "cat": "I" },
    { "min": 65, "max": 92, "cat": "II" },
    { "min": 50, "max": 64, "cat": "IIIA" },
    { "min": 31, "max": 49, "cat": "IIIB" },
    { "min": 21, "max": 30, "cat": "IVA" },
    { "min": 16, "max": 20, "cat": "IVB" },
    { "min": 10, "max": 15, "cat": "IVC" },
    { "min": 1,  "max": 9,  "cat": "V" }
  ],
  "note": "AFQT category by percentile; based on standard DoD groupings."
}
</script>


<script>
(function(){
  'use strict';
  function bindDetailButtons(){
    const tbody = document.getElementById('results-tbody');
    if (!tbody) return;
    tbody.querySelectorAll('button.detail-btn').forEach(btn => {
      if (btn.__bound) return;
      btn.__bound = true;
      btn.addEventListener('click', function(){
        const id = this.getAttribute('data-id');
        if (!id) return;
        // Navigate to the detail view page, passing resultId
        openDetailModal(id);
      });
    });
  }
  window.addEventListener('DOMContentLoaded', bindDetailButtons);
  // Rebind after results are re-rendered
  const mo = new MutationObserver(bindDetailButtons);
  window.addEventListener('load', function(){
    const tbody = document.getElementById('results-tbody');
    if (tbody) mo.observe(tbody, {childList:true, subtree:true});
  });
  // Ensure header exists in case order of scripts varies
  window.addEventListener('DOMContentLoaded', function(){ try{ if (window.__ensureActionsHeader) __ensureActionsHeader(); }catch(e){} });
})();
</script>


<script>
(function(){
  'use strict';
  function ensureHeader(){
    const table = document.querySelector('#recruiter table');
    if (!table) return;
    const has = Array.from(table.querySelectorAll('thead th')).some(th => (th.textContent||'').trim().toLowerCase() === 'actions');
    if (!has){
      const tr = table.querySelector('thead tr');
      if (tr){ const th=document.createElement('th'); th.textContent='Actions'; tr.appendChild(th); }
    }
  }
  function addButtons(){
    const tbody = document.getElementById('results-tbody');
    if (!tbody) return;
    ensureHeader();
    tbody.querySelectorAll('tr').forEach(tr => {
      // Skip if already has a button
      if (tr.querySelector('button.detail-btn')) return;
      // Try to find row data-id from dataset or derive from first cell text
      const cells = tr.querySelectorAll('td');
      if (!cells.length) return;
      // your rows contain serialized JSON in a hidden cell or data attribute? fallback: store id in data-id if present
      const id = tr.getAttribute('data-id') || (cells[0].querySelector('[data-id]') && cells[0].querySelector('[data-id]').getAttribute('data-id')) || (tr.textContent.match(/ID:([0-9a-fA-F-]{8,})/)||[])[1] || null;
      // If we can't parse id from DOM, try to fetch it from localStorage by matching applicant+code and picking the first.
      let rid = id;
      if (!rid){
        try{
          const results = JSON.parse(localStorage.getItem('asvab.results.v8')||'[]');
          const name = (cells[0].textContent||'').trim();
          const code = (cells[1] && cells[1].textContent||'').trim();
          const hit = results.find(r => (r.applicant||'').trim()===name && (r.code||'').trim()===code);
          if (hit) rid = hit.id;
        }catch(e){}
      }
      // Append cell
      const td = document.createElement('td');
      td.className = 'actions-cell';
      const btn = document.createElement('button');
      btn.className = 'detail-btn';
      btn.textContent = 'Detailed Results';
      if (rid) btn.setAttribute('data-id', rid);
      btn.addEventListener('click', function(){
        const id = this.getAttribute('data-id') || rid;
        if (!id) return alert('Could not locate result ID for this row.');
        openDetailModal(id);
      });
      td.appendChild(btn);
      tr.appendChild(td);
    });
  }
  function init(){
    addButtons();
    // Observe for rerenders
    const tbody = document.getElementById('results-tbody');
    if (!tbody) return;
    const mo = new MutationObserver(()=>addButtons());
    mo.observe(tbody, {childList:true, subtree:true});
  }
  if (document.readyState === 'loading'){ document.addEventListener('DOMContentLoaded', init); } else { init(); }
})();
</script>


<!-- BEGIN: EMBEDDED_DETAIL_MODAL -->
<style>
  /* Dark Tech Modal */
  #dt-modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:9998;display:none;}
  #dt-modal{position:fixed;inset:6% 6% auto 6%;height:88vh;background:linear-gradient(180deg,#12151a,#161a20);
    border:1px solid #1e242c;border-radius:16px;box-shadow:0 18px 60px rgba(0,0,0,.55);z-index:9999;display:none;overflow:auto;color:#e6ebf0;}
  #dt-modal .dt-head{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid #1e242c;}
  #dt-modal .dt-title{color:#9aa4af;font-weight:700;letter-spacing:.3px}
  #dt-modal .dt-close{border:1px solid rgba(7,213,255,.35);background:rgba(7,213,255,.08);color:#e6fbff;padding:6px 10px;border-radius:10px;cursor:pointer;}
  #dt-modal .dt-body{padding:14px 16px;}
  .afqt-bignum{font-weight:900;font-size:2.1rem;color:#fff;text-shadow:0 0 16px rgba(7,213,255,.35);}
  .afqt-line-pill{padding:4px 10px;border-radius:999px;border:1px solid rgba(7,213,255,.25);background:rgba(7,213,255,.07);color:#c9f5ff;font-weight:700;margin-left:6px;margin-right:6px;}
  .dt-muted{color:#9aa4af}
  .dt-bar{position:relative;height:12px;background:#101419;border:1px solid #1e242c;border-radius:999px;overflow:hidden;margin-top:6px;margin-bottom:10px;}
  .dt-bar>b{position:absolute;left:0;top:0;bottom:0;width:0%;background:linear-gradient(90deg,#07d5ff,#00a8e8);box-shadow:0 0 18px rgba(7,213,255,.35) inset;transition:width .7s cubic-bezier(.2,.8,.2,1);}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px;margin-top:16px;}
  .cell{border:1px solid #1e242c;border-radius:12px;padding:12px;background:rgba(255,255,255,.02)}
  .cell b{display:block;color:#dfe7ee}
  .muted{color:#9aa4af}
  .rawcounts-line{margin-top:14px;padding:10px 12px;border:1px dashed rgba(7,213,255,.35);border-radius:12px;background:rgba(7,213,255,.04);
    font-size:.98rem;display:flex;flex-wrap:wrap;gap:10px;align-items:center;}
  .rawbadge{font-weight:800;letter-spacing:.2px;padding:4px 10px;border-radius:999px;background:rgba(7,213,255,.08);border:1px solid rgba(7,213,255,.35);color:#e9fbff}
  .rawlabel{color:#bfefff;margin-right:2px}
</style>
<div id="dt-modal-backdrop"></div>
<div id="dt-modal" role="dialog" aria-modal="true" aria-labelledby="dt-modal-title">
  <div class="dt-head">
    <div class="dt-title" id="dt-modal-title">Detailed Results</div>
    <button class="dt-close" type="button" onclick="(function(){document.getElementById('dt-modal').style.display='none';document.getElementById('dt-modal-backdrop').style.display='none';})();">Close</button>
  </div>
  <div class="dt-body">
    <div style="display:flex;align-items:center;justify-content:space-between;gap:14px;">
      <div class="dt-muted">AFQT Summary</div>
      <div class="afqt-bignum" id="dt-afqt-big">--%</div>
    </div>
    <div style="display:flex;flex-wrap:wrap;gap:10px;align-items:baseline;margin:8px 0 14px;">
      <span class="dt-muted">AFQT Score:</span>
      <span class="afqt-line-pill" id="dt-afqt-pill">--%</span>
      <span class="dt-muted" id="dt-afqt-cat"></span>
    </div>
    <div class="dt-bar"><b id="dt-afqt-bar"></b></div>

    <div class="grid">
      <div class="cell"><b>AR</b><span class="muted" id="dt-val-ar">—</span></div>
      <div class="cell"><b>MK</b><span class="muted" id="dt-val-mk">—</span></div>
      <div class="cell"><b>WK</b><span class="muted" id="dt-val-wk">—</span></div>
      <div class="cell"><b>PC</b><span class="muted" id="dt-val-pc">—</span></div>
      <div class="cell"><b>VE</b><span class="muted" id="dt-val-ve">—</span></div>
    </div>

    <div id="dt-subtest-breakdown"></div>
  </div>
</div>
<script>
(function(){
  function catFromPct(p){
    if (p >= 93) return "I";
    if (p >= 65) return "II";
    if (p >= 50) return "IIIA";
    if (p >= 31) return "IIIB";
    if (p >= 21) return "IVA";
    if (p >= 16) return "IVB";
    if (p >= 10) return "IVC";
    return "V";
  }
  function veApproxFromPct(wkPct, pcPct){
    // Approximate VE for display only (not used for AFQT): average of WK/PC % scaled to 20..62
    var avg = ((Number(wkPct||0)+Number(pcPct||0))/2);
    return Math.round(20 + avg*(62-20)/100);
  }
  window.openDetailModal = function(resultId){
    try {
      var store = JSON.parse(localStorage.getItem('asvab.results.v8')||'[]');
      var rec = store.find(r=>r && r.id===resultId) || store[0] || null;
      if (!rec){ alert('No stored result found for this applicant.'); return; }

      // Headline
      var pct = Number(rec.afqt||0);
      var cat = catFromPct(pct);
      var big = document.getElementById('dt-afqt-big');
      var pill = document.getElementById('dt-afqt-pill');
      var catEl = document.getElementById('dt-afqt-cat');
      var bar = document.getElementById('dt-afqt-bar');
      if (big) big.textContent = pct + '%';
      if (pill) pill.textContent = 'AFQT: ' + pct + '%';
      if (catEl) catEl.textContent = '(Category ' + cat + ')';
      if (bar) bar.style.width = Math.max(0, Math.min(100, pct)) + '%';

      // Subtests (% correct stored in rec.sub)
      var sub = rec.sub || {};
      var set = (id,val)=>{ var el=document.getElementById(id); if (el) el.textContent = (val==null?'—':val+'%'); };
      set('dt-val-ar', sub.AR);
      set('dt-val-mk', sub.MK);
      set('dt-val-wk', sub.WK);
      set('dt-val-pc', sub.PC);
      // VE approx for display
      var ve = veApproxFromPct(sub.WK, sub.PC);
      var veEl = document.getElementById('dt-val-ve'); if (veEl) veEl.textContent = ve;

      // Percent badges row
      var host = document.getElementById('dt-subtest-breakdown');
      if (host){
        host.innerHTML = '';
        var line = document.createElement('div'); line.className='rawcounts-line';
        var t = document.createElement('span'); t.className='rawlabel'; t.textContent='Subtest performance (% correct):';
        line.appendChild(t);
        function badge(lab, val){ var b=document.createElement('span'); b.className='rawbadge'; b.textContent=lab+' '+(val==null?'—':(val+'%')); line.appendChild(b); }
        badge('AR', sub.AR); badge('MK', sub.MK); badge('WK', sub.WK); badge('PC', sub.PC);
        host.appendChild(line);
      }

      // Show modal
      document.getElementById('dt-modal').style.display = 'block';
      document.getElementById('dt-modal-backdrop').style.display = 'block';
    } catch(e){
      console.error('openDetailModal failed', e);
      alert('Could not open the Detailed Results view.');
    }
  };
})();
</script>
<!-- END: EMBEDDED_DETAIL_MODAL -->


<!-- BEGIN: CARET_SUPERSCRIPT_RUNTIME_FIX -->
<script>
(function(){
  'use strict';
  // Converts "x^2" -> "x<sup>2</sup>" in text nodes safely.
  function needsFix(t){ return /\^[0-9]{1,3}/.test(t); }
  function replaceCaretExponents(text){
    // Replace a^b where b is 1-3 digits. Include ) as a valid base end (e.g., (x+y)^2).
    return text.replace(/([A-Za-z0-9\)])\^([0-9]{1,3})/g, function(_, base, exp){
      return base + '<sup>' + exp + '</sup>';
    });
  }
  function isSkippable(node){
    if (!node) return true;
    // Skip inside SCRIPT/STYLE/NOSCRIPT/CODE/PRE
    var p = node.parentNode;
    while (p){
      var t = (p.nodeName||'').toUpperCase();
      if (t === 'SCRIPT' || t === 'STYLE' || t === 'NOSCRIPT' || t === 'CODE' || t === 'PRE') return true;
      p = p.parentNode;
    }
    return false;
  }
  function runOnce(root){
    try{
      var walker = document.createTreeWalker(root||document.body, NodeFilter.SHOW_TEXT, null, false);
      var nodes = [];
      var n;
      while ((n = walker.nextNode())){
        if (!n.nodeValue) continue;
        if (isSkippable(n)) continue;
        if (needsFix(n.nodeValue)) nodes.push(n);
      }
      nodes.forEach(function(textNode){
        var htmlText = replaceCaretExponents(textNode.nodeValue);
        if (htmlText === textNode.nodeValue) return;
        var span = document.createElement('span');
        span.innerHTML = htmlText;
        textNode.parentNode.replaceChild(span, textNode);
      });
    }catch(e){ console && console.warn && console.warn('superscript fix failed', e); }
  }

  function debounce(fn, ms){
    var t=null; return function(){ clearTimeout(t); t = setTimeout(fn, ms); };
  }
  var runDebounced = debounce(function(){ runOnce(document.body); }, 120);

  // Initial pass
  if (document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', function(){
      runOnce(document.body);
      // A couple of follow-up passes in case the app renders later
      setTimeout(runDebounced, 200);
      setTimeout(runDebounced, 500);
      setTimeout(runDebounced, 1000);
    });
  } else {
    runOnce(document.body);
    setTimeout(runDebounced, 200);
    setTimeout(runDebounced, 500);
    setTimeout(runDebounced, 1000);
  }

  // Observe dynamic changes safely (try/catch, ignore errors)
  try{
    var mo = new MutationObserver(runDebounced);
    mo.observe(document.documentElement, {subtree:true, childList:true, characterData:true});
  }catch(e){}
})();
</script>
<!-- END: CARET_SUPERSCRIPT_RUNTIME_FIX -->


<!-- BEGIN: APPLICANT_DETAIL_BUTTON -->
<style>
  #app-detail-btn {
    display:inline-block; margin-top:10px; padding:8px 12px;
    border-radius:10px; border:1px solid rgba(7,213,255,.35);
    background:rgba(7,213,255,.08); color:#e6fbff; font-weight:800; letter-spacing:.3px;
    box-shadow:0 0 18px rgba(7,213,255,.12) inset; cursor:pointer;
  }
</style>
<script>
(function(){
  'use strict';
  function getMostRecentResultId(){
    try{
      const rows = JSON.parse(localStorage.getItem('asvab.results.v8')||'[]');
      if (rows && rows.length && rows[0].id) return rows[0].id;
    }catch(e){}
    return null;
  }
  function ensureApplicantDetailButton(){
    // Find applicant results area
    const host = document.getElementById('applicant-summary') || document.getElementById('applicant_results') || document.body;
    if (!host) return;
    if (document.getElementById('app-detail-btn')) return;
    const btn = document.createElement('button');
    btn.id = 'app-detail-btn';
    btn.type = 'button';
    btn.textContent = 'Detailed Results';
    btn.addEventListener('click', function(){
      const rid = getMostRecentResultId();
      if (!rid){ alert('No saved result found yet. Please submit the test first.'); return; }
      if (typeof openDetailModal === 'function'){ openDetailModal(rid); }
      else { alert('Detail viewer is not available on this page.'); }
    });
    // place near top of applicant summary
    host.insertBefore(btn, host.firstChild);
  }
  if (document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', ensureApplicantDetailButton);
  } else {
    ensureApplicantDetailButton();
  }
})();
</script>
<!-- END: APPLICANT_DETAIL_BUTTON -->

<script id="afqt-tables" type="application/json">{"VE":{"0-3":20,"4-5":21,"6-7":22,"8-9":22,"10-11":25,"12-13":27,"14-15":29,"16-17":31,"18-19":32,"20-21":34,"22-23":36,"24-25":38,"26-27":40,"28-29":42,"30-31":44,"32-33":45,"34-35":47,"36-37":49,"38-39":50,"40-41":52,"42-43":54,"44-45":56,"46-47":58,"48-49":60,"50":62},"AR":{"0":20,"1":21,"2":22,"3":23,"4":24,"5":25,"6":26,"7":27,"8":28,"9":29,"10":30,"11":31,"12":32,"13":33,"14":34,"15":35,"16":36,"17":37,"18":38,"19":39,"20":40,"21":41,"22":42,"23":43,"24":44,"25":45,"26":46,"27":47,"28":48,"29":49,"30":50,"31":51,"32":52,"33":53,"34":54,"35":55,"36":56},"MK":{"0":20,"1":21,"2":22,"3":23,"4":24,"5":25,"6":26,"7":27,"8":28,"9":29,"10":30,"11":31,"12":32,"13":33,"14":34,"15":35,"16":36,"17":37,"18":38,"19":39,"20":40,"21":41,"22":42,"23":43,"24":44,"25":45}}</script>
<script id="question-bank" type="application/json">{"short":[{"id":"WK1-S","subject":"WK","q":"Best synonym for 'rapid' (S-1)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK2-S","subject":"WK","q":"Best synonym for 'rapid' (S-2)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK3-S","subject":"WK","q":"Best synonym for 'rapid' (S-3)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK4-S","subject":"WK","q":"Best synonym for 'rapid' (S-4)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK5-S","subject":"WK","q":"Best synonym for 'rapid' (S-5)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK6-S","subject":"WK","q":"Best synonym for 'rapid' (S-6)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK7-S","subject":"WK","q":"Best synonym for 'rapid' (S-7)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK8-S","subject":"WK","q":"Best synonym for 'rapid' (S-8)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK9-S","subject":"WK","q":"Best synonym for 'rapid' (S-9)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK10-S","subject":"WK","q":"Best synonym for 'rapid' (S-10)?","a":["fast","slow","late","weak"],"correct":0},{"id":"PC1-S","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC2-S","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC3-S","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC4-S","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC5-S","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC6-S","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC7-S","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC8-S","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC9-S","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC10-S","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"AR1-S","subject":"AR","q":"Solve: 8 + 4 \u00d7 4 =","a":["24","22","27","19"],"correct":0},{"id":"AR2-S","subject":"AR","q":"Solve: 9 + 5 \u00d7 4 =","a":["29","27","32","24"],"correct":0},{"id":"AR3-S","subject":"AR","q":"Solve: 10 + 6 \u00d7 4 =","a":["34","32","37","29"],"correct":0},{"id":"AR4-S","subject":"AR","q":"Solve: 11 + 7 \u00d7 4 =","a":["39","37","42","34"],"correct":0},{"id":"AR5-S","subject":"AR","q":"Solve: 12 + 3 \u00d7 4 =","a":["24","22","27","19"],"correct":0},{"id":"AR6-S","subject":"AR","q":"Solve: 13 + 4 \u00d7 4 =","a":["29","27","32","24"],"correct":0},{"id":"AR7-S","subject":"AR","q":"Solve: 14 + 5 \u00d7 4 =","a":["34","32","37","29"],"correct":0},{"id":"AR8-S","subject":"AR","q":"Solve: 15 + 6 \u00d7 4 =","a":["39","37","42","34"],"correct":0},{"id":"AR9-S","subject":"AR","q":"Solve: 16 + 7 \u00d7 4 =","a":["44","42","47","39"],"correct":0},{"id":"AR10-S","subject":"AR","q":"Solve: 17 + 3 \u00d7 4 =","a":["29","27","32","24"],"correct":0},{"id":"MK1-S","subject":"MK","q":"Evaluate: (3+3)^2 =","a":["36","6","12","9"],"correct":0},{"id":"MK2-S","subject":"MK","q":"Evaluate: (4+3)^2 =","a":["49","7","14","16"],"correct":0},{"id":"MK3-S","subject":"MK","q":"Evaluate: (5+3)^2 =","a":["64","8","16","25"],"correct":0},{"id":"MK4-S","subject":"MK","q":"Evaluate: (6+3)^2 =","a":["81","9","18","36"],"correct":0},{"id":"MK5-S","subject":"MK","q":"Evaluate: (7+3)^2 =","a":["100","10","20","49"],"correct":0},{"id":"MK6-S","subject":"MK","q":"Evaluate: (8+3)^2 =","a":["121","11","22","64"],"correct":0},{"id":"MK7-S","subject":"MK","q":"Evaluate: (9+3)^2 =","a":["144","12","24","81"],"correct":0},{"id":"MK8-S","subject":"MK","q":"Evaluate: (2+3)^2 =","a":["25","5","10","4"],"correct":0},{"id":"MK9-S","subject":"MK","q":"Evaluate: (3+3)^2 =","a":["36","6","12","9"],"correct":0},{"id":"MK10-S","subject":"MK","q":"Evaluate: (4+3)^2 =","a":["49","7","14","16"],"correct":0}],"core":[{"id":"WK1-C","subject":"WK","q":"Best synonym for 'rapid' (C-1)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK2-C","subject":"WK","q":"Best synonym for 'rapid' (C-2)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK3-C","subject":"WK","q":"Best synonym for 'rapid' (C-3)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK4-C","subject":"WK","q":"Best synonym for 'rapid' (C-4)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK5-C","subject":"WK","q":"Best synonym for 'rapid' (C-5)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK6-C","subject":"WK","q":"Best synonym for 'rapid' (C-6)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK7-C","subject":"WK","q":"Best synonym for 'rapid' (C-7)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK8-C","subject":"WK","q":"Best synonym for 'rapid' (C-8)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK9-C","subject":"WK","q":"Best synonym for 'rapid' (C-9)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK10-C","subject":"WK","q":"Best synonym for 'rapid' (C-10)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK11-C","subject":"WK","q":"Best synonym for 'rapid' (C-11)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK12-C","subject":"WK","q":"Best synonym for 'rapid' (C-12)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK13-C","subject":"WK","q":"Best synonym for 'rapid' (C-13)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK14-C","subject":"WK","q":"Best synonym for 'rapid' (C-14)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK15-C","subject":"WK","q":"Best synonym for 'rapid' (C-15)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK16-C","subject":"WK","q":"Best synonym for 'rapid' (C-16)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK17-C","subject":"WK","q":"Best synonym for 'rapid' (C-17)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK18-C","subject":"WK","q":"Best synonym for 'rapid' (C-18)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK19-C","subject":"WK","q":"Best synonym for 'rapid' (C-19)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK20-C","subject":"WK","q":"Best synonym for 'rapid' (C-20)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK21-C","subject":"WK","q":"Best synonym for 'rapid' (C-21)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK22-C","subject":"WK","q":"Best synonym for 'rapid' (C-22)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK23-C","subject":"WK","q":"Best synonym for 'rapid' (C-23)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK24-C","subject":"WK","q":"Best synonym for 'rapid' (C-24)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK25-C","subject":"WK","q":"Best synonym for 'rapid' (C-25)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK26-C","subject":"WK","q":"Best synonym for 'rapid' (C-26)?","a":["fast","slow","late","weak"],"correct":0},{"id":"PC1-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC2-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC3-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC4-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC5-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC6-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC7-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC8-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC9-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC10-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC11-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC12-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC13-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC14-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC15-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC16-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC17-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC18-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC19-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC20-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC21-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC22-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC23-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC24-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC25-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC26-C","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"AR1-C","subject":"AR","q":"Solve: 8 + 4 \u00d7 4 =","a":["24","22","27","19"],"correct":0},{"id":"AR2-C","subject":"AR","q":"Solve: 9 + 5 \u00d7 4 =","a":["29","27","32","24"],"correct":0},{"id":"AR3-C","subject":"AR","q":"Solve: 10 + 6 \u00d7 4 =","a":["34","32","37","29"],"correct":0},{"id":"AR4-C","subject":"AR","q":"Solve: 11 + 7 \u00d7 4 =","a":["39","37","42","34"],"correct":0},{"id":"AR5-C","subject":"AR","q":"Solve: 12 + 3 \u00d7 4 =","a":["24","22","27","19"],"correct":0},{"id":"AR6-C","subject":"AR","q":"Solve: 13 + 4 \u00d7 4 =","a":["29","27","32","24"],"correct":0},{"id":"AR7-C","subject":"AR","q":"Solve: 14 + 5 \u00d7 4 =","a":["34","32","37","29"],"correct":0},{"id":"AR8-C","subject":"AR","q":"Solve: 15 + 6 \u00d7 4 =","a":["39","37","42","34"],"correct":0},{"id":"AR9-C","subject":"AR","q":"Solve: 16 + 7 \u00d7 4 =","a":["44","42","47","39"],"correct":0},{"id":"AR10-C","subject":"AR","q":"Solve: 17 + 3 \u00d7 4 =","a":["29","27","32","24"],"correct":0},{"id":"AR11-C","subject":"AR","q":"Solve: 18 + 4 \u00d7 4 =","a":["34","32","37","29"],"correct":0},{"id":"AR12-C","subject":"AR","q":"Solve: 19 + 5 \u00d7 4 =","a":["39","37","42","34"],"correct":0},{"id":"AR13-C","subject":"AR","q":"Solve: 20 + 6 \u00d7 4 =","a":["44","42","47","39"],"correct":0},{"id":"AR14-C","subject":"AR","q":"Solve: 21 + 7 \u00d7 4 =","a":["49","47","52","44"],"correct":0},{"id":"AR15-C","subject":"AR","q":"Solve: 22 + 3 \u00d7 4 =","a":["34","32","37","29"],"correct":0},{"id":"AR16-C","subject":"AR","q":"Solve: 23 + 4 \u00d7 4 =","a":["39","37","42","34"],"correct":0},{"id":"AR17-C","subject":"AR","q":"Solve: 24 + 5 \u00d7 4 =","a":["44","42","47","39"],"correct":0},{"id":"AR18-C","subject":"AR","q":"Solve: 25 + 6 \u00d7 4 =","a":["49","47","52","44"],"correct":0},{"id":"AR19-C","subject":"AR","q":"Solve: 26 + 7 \u00d7 4 =","a":["54","52","57","49"],"correct":0},{"id":"AR20-C","subject":"AR","q":"Solve: 27 + 3 \u00d7 4 =","a":["39","37","42","34"],"correct":0},{"id":"AR21-C","subject":"AR","q":"Solve: 28 + 4 \u00d7 4 =","a":["44","42","47","39"],"correct":0},{"id":"AR22-C","subject":"AR","q":"Solve: 29 + 5 \u00d7 4 =","a":["49","47","52","44"],"correct":0},{"id":"AR23-C","subject":"AR","q":"Solve: 30 + 6 \u00d7 4 =","a":["54","52","57","49"],"correct":0},{"id":"AR24-C","subject":"AR","q":"Solve: 31 + 7 \u00d7 4 =","a":["59","57","62","54"],"correct":0},{"id":"AR25-C","subject":"AR","q":"Solve: 32 + 3 \u00d7 4 =","a":["44","42","47","39"],"correct":0},{"id":"AR26-C","subject":"AR","q":"Solve: 33 + 4 \u00d7 4 =","a":["49","47","52","44"],"correct":0},{"id":"MK1-C","subject":"MK","q":"Evaluate: (3+3)^2 =","a":["36","6","12","9"],"correct":0},{"id":"MK2-C","subject":"MK","q":"Evaluate: (4+3)^2 =","a":["49","7","14","16"],"correct":0},{"id":"MK3-C","subject":"MK","q":"Evaluate: (5+3)^2 =","a":["64","8","16","25"],"correct":0},{"id":"MK4-C","subject":"MK","q":"Evaluate: (6+3)^2 =","a":["81","9","18","36"],"correct":0},{"id":"MK5-C","subject":"MK","q":"Evaluate: (7+3)^2 =","a":["100","10","20","49"],"correct":0},{"id":"MK6-C","subject":"MK","q":"Evaluate: (8+3)^2 =","a":["121","11","22","64"],"correct":0},{"id":"MK7-C","subject":"MK","q":"Evaluate: (9+3)^2 =","a":["144","12","24","81"],"correct":0},{"id":"MK8-C","subject":"MK","q":"Evaluate: (2+3)^2 =","a":["25","5","10","4"],"correct":0},{"id":"MK9-C","subject":"MK","q":"Evaluate: (3+3)^2 =","a":["36","6","12","9"],"correct":0},{"id":"MK10-C","subject":"MK","q":"Evaluate: (4+3)^2 =","a":["49","7","14","16"],"correct":0},{"id":"MK11-C","subject":"MK","q":"Evaluate: (5+3)^2 =","a":["64","8","16","25"],"correct":0},{"id":"MK12-C","subject":"MK","q":"Evaluate: (6+3)^2 =","a":["81","9","18","36"],"correct":0},{"id":"MK13-C","subject":"MK","q":"Evaluate: (7+3)^2 =","a":["100","10","20","49"],"correct":0},{"id":"MK14-C","subject":"MK","q":"Evaluate: (8+3)^2 =","a":["121","11","22","64"],"correct":0},{"id":"MK15-C","subject":"MK","q":"Evaluate: (9+3)^2 =","a":["144","12","24","81"],"correct":0},{"id":"MK16-C","subject":"MK","q":"Evaluate: (2+3)^2 =","a":["25","5","10","4"],"correct":0},{"id":"MK17-C","subject":"MK","q":"Evaluate: (3+3)^2 =","a":["36","6","12","9"],"correct":0},{"id":"MK18-C","subject":"MK","q":"Evaluate: (4+3)^2 =","a":["49","7","14","16"],"correct":0},{"id":"MK19-C","subject":"MK","q":"Evaluate: (5+3)^2 =","a":["64","8","16","25"],"correct":0},{"id":"MK20-C","subject":"MK","q":"Evaluate: (6+3)^2 =","a":["81","9","18","36"],"correct":0},{"id":"MK21-C","subject":"MK","q":"Evaluate: (7+3)^2 =","a":["100","10","20","49"],"correct":0},{"id":"MK22-C","subject":"MK","q":"Evaluate: (8+3)^2 =","a":["121","11","22","64"],"correct":0},{"id":"MK23-C","subject":"MK","q":"Evaluate: (9+3)^2 =","a":["144","12","24","81"],"correct":0},{"id":"MK24-C","subject":"MK","q":"Evaluate: (2+3)^2 =","a":["25","5","10","4"],"correct":0},{"id":"MK25-C","subject":"MK","q":"Evaluate: (3+3)^2 =","a":["36","6","12","9"],"correct":0},{"id":"MK26-C","subject":"MK","q":"Evaluate: (4+3)^2 =","a":["49","7","14","16"],"correct":0},{"id":"MK27-C","subject":"MK","q":"Evaluate: (5+3)^2 =","a":["64","8","16","25"],"correct":0}],"full":[{"id":"WK1-F","subject":"WK","q":"Best synonym for 'rapid' (F-1)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK2-F","subject":"WK","q":"Best synonym for 'rapid' (F-2)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK3-F","subject":"WK","q":"Best synonym for 'rapid' (F-3)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK4-F","subject":"WK","q":"Best synonym for 'rapid' (F-4)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK5-F","subject":"WK","q":"Best synonym for 'rapid' (F-5)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK6-F","subject":"WK","q":"Best synonym for 'rapid' (F-6)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK7-F","subject":"WK","q":"Best synonym for 'rapid' (F-7)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK8-F","subject":"WK","q":"Best synonym for 'rapid' (F-8)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK9-F","subject":"WK","q":"Best synonym for 'rapid' (F-9)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK10-F","subject":"WK","q":"Best synonym for 'rapid' (F-10)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK11-F","subject":"WK","q":"Best synonym for 'rapid' (F-11)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK12-F","subject":"WK","q":"Best synonym for 'rapid' (F-12)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK13-F","subject":"WK","q":"Best synonym for 'rapid' (F-13)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK14-F","subject":"WK","q":"Best synonym for 'rapid' (F-14)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK15-F","subject":"WK","q":"Best synonym for 'rapid' (F-15)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK16-F","subject":"WK","q":"Best synonym for 'rapid' (F-16)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK17-F","subject":"WK","q":"Best synonym for 'rapid' (F-17)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK18-F","subject":"WK","q":"Best synonym for 'rapid' (F-18)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK19-F","subject":"WK","q":"Best synonym for 'rapid' (F-19)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK20-F","subject":"WK","q":"Best synonym for 'rapid' (F-20)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK21-F","subject":"WK","q":"Best synonym for 'rapid' (F-21)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK22-F","subject":"WK","q":"Best synonym for 'rapid' (F-22)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK23-F","subject":"WK","q":"Best synonym for 'rapid' (F-23)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK24-F","subject":"WK","q":"Best synonym for 'rapid' (F-24)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK25-F","subject":"WK","q":"Best synonym for 'rapid' (F-25)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK26-F","subject":"WK","q":"Best synonym for 'rapid' (F-26)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK27-F","subject":"WK","q":"Best synonym for 'rapid' (F-27)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK28-F","subject":"WK","q":"Best synonym for 'rapid' (F-28)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK29-F","subject":"WK","q":"Best synonym for 'rapid' (F-29)?","a":["fast","slow","late","weak"],"correct":0},{"id":"WK30-F","subject":"WK","q":"Best synonym for 'rapid' (F-30)?","a":["fast","slow","late","weak"],"correct":0},{"id":"PC1-F","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC2-F","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC3-F","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC4-F","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC5-F","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC6-F","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC7-F","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC8-F","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC9-F","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC10-F","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC11-F","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC12-F","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC13-F","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC14-F","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"PC15-F","subject":"PC","q":"Passage: At dusk, coastal winds may shift due to temperature changes. Main idea?","a":["Winds stop at night","Winds can change in evening","Only storms change winds","Temperature is irrelevant"],"correct":1},{"id":"AR1-F","subject":"AR","q":"Solve: 8 + 4 \u00d7 4 =","a":["24","22","27","19"],"correct":0},{"id":"AR2-F","subject":"AR","q":"Solve: 9 + 5 \u00d7 4 =","a":["29","27","32","24"],"correct":0},{"id":"AR3-F","subject":"AR","q":"Solve: 10 + 6 \u00d7 4 =","a":["34","32","37","29"],"correct":0},{"id":"AR4-F","subject":"AR","q":"Solve: 11 + 7 \u00d7 4 =","a":["39","37","42","34"],"correct":0},{"id":"AR5-F","subject":"AR","q":"Solve: 12 + 3 \u00d7 4 =","a":["24","22","27","19"],"correct":0},{"id":"AR6-F","subject":"AR","q":"Solve: 13 + 4 \u00d7 4 =","a":["29","27","32","24"],"correct":0},{"id":"AR7-F","subject":"AR","q":"Solve: 14 + 5 \u00d7 4 =","a":["34","32","37","29"],"correct":0},{"id":"AR8-F","subject":"AR","q":"Solve: 15 + 6 \u00d7 4 =","a":["39","37","42","34"],"correct":0},{"id":"AR9-F","subject":"AR","q":"Solve: 16 + 7 \u00d7 4 =","a":["44","42","47","39"],"correct":0},{"id":"AR10-F","subject":"AR","q":"Solve: 17 + 3 \u00d7 4 =","a":["29","27","32","24"],"correct":0},{"id":"AR11-F","subject":"AR","q":"Solve: 18 + 4 \u00d7 4 =","a":["34","32","37","29"],"correct":0},{"id":"AR12-F","subject":"AR","q":"Solve: 19 + 5 \u00d7 4 =","a":["39","37","42","34"],"correct":0},{"id":"AR13-F","subject":"AR","q":"Solve: 20 + 6 \u00d7 4 =","a":["44","42","47","39"],"correct":0},{"id":"AR14-F","subject":"AR","q":"Solve: 21 + 7 \u00d7 4 =","a":["49","47","52","44"],"correct":0},{"id":"AR15-F","subject":"AR","q":"Solve: 22 + 3 \u00d7 4 =","a":["34","32","37","29"],"correct":0},{"id":"AR16-F","subject":"AR","q":"Solve: 23 + 4 \u00d7 4 =","a":["39","37","42","34"],"correct":0},{"id":"AR17-F","subject":"AR","q":"Solve: 24 + 5 \u00d7 4 =","a":["44","42","47","39"],"correct":0},{"id":"AR18-F","subject":"AR","q":"Solve: 25 + 6 \u00d7 4 =","a":["49","47","52","44"],"correct":0},{"id":"AR19-F","subject":"AR","q":"Solve: 26 + 7 \u00d7 4 =","a":["54","52","57","49"],"correct":0},{"id":"AR20-F","subject":"AR","q":"Solve: 27 + 3 \u00d7 4 =","a":["39","37","42","34"],"correct":0},{"id":"AR21-F","subject":"AR","q":"Solve: 28 + 4 \u00d7 4 =","a":["44","42","47","39"],"correct":0},{"id":"AR22-F","subject":"AR","q":"Solve: 29 + 5 \u00d7 4 =","a":["49","47","52","44"],"correct":0},{"id":"AR23-F","subject":"AR","q":"Solve: 30 + 6 \u00d7 4 =","a":["54","52","57","49"],"correct":0},{"id":"AR24-F","subject":"AR","q":"Solve: 31 + 7 \u00d7 4 =","a":["59","57","62","54"],"correct":0},{"id":"AR25-F","subject":"AR","q":"Solve: 32 + 3 \u00d7 4 =","a":["44","42","47","39"],"correct":0},{"id":"AR26-F","subject":"AR","q":"Solve: 33 + 4 \u00d7 4 =","a":["49","47","52","44"],"correct":0},{"id":"AR27-F","subject":"AR","q":"Solve: 34 + 5 \u00d7 4 =","a":["54","52","57","49"],"correct":0},{"id":"AR28-F","subject":"AR","q":"Solve: 35 + 6 \u00d7 4 =","a":["59","57","62","54"],"correct":0},{"id":"AR29-F","subject":"AR","q":"Solve: 36 + 7 \u00d7 4 =","a":["64","62","67","59"],"correct":0},{"id":"AR30-F","subject":"AR","q":"Solve: 37 + 3 \u00d7 4 =","a":["49","47","52","44"],"correct":0},{"id":"MK1-F","subject":"MK","q":"Evaluate: (3+3)^2 =","a":["36","6","12","9"],"correct":0},{"id":"MK2-F","subject":"MK","q":"Evaluate: (4+3)^2 =","a":["49","7","14","16"],"correct":0},{"id":"MK3-F","subject":"MK","q":"Evaluate: (5+3)^2 =","a":["64","8","16","25"],"correct":0},{"id":"MK4-F","subject":"MK","q":"Evaluate: (6+3)^2 =","a":["81","9","18","36"],"correct":0},{"id":"MK5-F","subject":"MK","q":"Evaluate: (7+3)^2 =","a":["100","10","20","49"],"correct":0},{"id":"MK6-F","subject":"MK","q":"Evaluate: (8+3)^2 =","a":["121","11","22","64"],"correct":0},{"id":"MK7-F","subject":"MK","q":"Evaluate: (9+3)^2 =","a":["144","12","24","81"],"correct":0},{"id":"MK8-F","subject":"MK","q":"Evaluate: (2+3)^2 =","a":["25","5","10","4"],"correct":0},{"id":"MK9-F","subject":"MK","q":"Evaluate: (3+3)^2 =","a":["36","6","12","9"],"correct":0},{"id":"MK10-F","subject":"MK","q":"Evaluate: (4+3)^2 =","a":["49","7","14","16"],"correct":0},{"id":"MK11-F","subject":"MK","q":"Evaluate: (5+3)^2 =","a":["64","8","16","25"],"correct":0},{"id":"MK12-F","subject":"MK","q":"Evaluate: (6+3)^2 =","a":["81","9","18","36"],"correct":0},{"id":"MK13-F","subject":"MK","q":"Evaluate: (7+3)^2 =","a":["100","10","20","49"],"correct":0},{"id":"MK14-F","subject":"MK","q":"Evaluate: (8+3)^2 =","a":["121","11","22","64"],"correct":0},{"id":"MK15-F","subject":"MK","q":"Evaluate: (9+3)^2 =","a":["144","12","24","81"],"correct":0},{"id":"MK16-F","subject":"MK","q":"Evaluate: (2+3)^2 =","a":["25","5","10","4"],"correct":0},{"id":"MK17-F","subject":"MK","q":"Evaluate: (3+3)^2 =","a":["36","6","12","9"],"correct":0},{"id":"MK18-F","subject":"MK","q":"Evaluate: (4+3)^2 =","a":["49","7","14","16"],"correct":0},{"id":"MK19-F","subject":"MK","q":"Evaluate: (5+3)^2 =","a":["64","8","16","25"],"correct":0},{"id":"MK20-F","subject":"MK","q":"Evaluate: (6+3)^2 =","a":["81","9","18","36"],"correct":0},{"id":"MK21-F","subject":"MK","q":"Evaluate: (7+3)^2 =","a":["100","10","20","49"],"correct":0},{"id":"MK22-F","subject":"MK","q":"Evaluate: (8+3)^2 =","a":["121","11","22","64"],"correct":0},{"id":"MK23-F","subject":"MK","q":"Evaluate: (9+3)^2 =","a":["144","12","24","81"],"correct":0},{"id":"MK24-F","subject":"MK","q":"Evaluate: (2+3)^2 =","a":["25","5","10","4"],"correct":0},{"id":"MK25-F","subject":"MK","q":"Evaluate: (3+3)^2 =","a":["36","6","12","9"],"correct":0},{"id":"MK26-F","subject":"MK","q":"Evaluate: (4+3)^2 =","a":["49","7","14","16"],"correct":0},{"id":"MK27-F","subject":"MK","q":"Evaluate: (5+3)^2 =","a":["64","8","16","25"],"correct":0},{"id":"MK28-F","subject":"MK","q":"Evaluate: (6+3)^2 =","a":["81","9","18","36"],"correct":0},{"id":"MK29-F","subject":"MK","q":"Evaluate: (7+3)^2 =","a":["100","10","20","49"],"correct":0},{"id":"MK30-F","subject":"MK","q":"Evaluate: (8+3)^2 =","a":["121","11","22","64"],"correct":0},{"id":"GS1-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS2-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS3-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS4-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS5-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS6-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS7-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS8-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS9-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS10-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS11-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS12-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS13-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS14-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS15-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS16-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS17-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS18-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS19-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS20-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS21-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS22-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS23-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS24-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"GS25-F","subject":"GS","q":"At sea level, water boils at what temperature (\u00b0C)?","a":["95","100","105","90"],"correct":1},{"id":"EI1-F","subject":"EI","q":"The unit of electric current is the:","a":["Volt","Ohm","Ampere","Watt"],"correct":2},{"id":"EI2-F","subject":"EI","q":"The unit of electric current is the:","a":["Volt","Ohm","Ampere","Watt"],"correct":2},{"id":"EI3-F","subject":"EI","q":"The unit of electric current is the:","a":["Volt","Ohm","Ampere","Watt"],"correct":2},{"id":"EI4-F","subject":"EI","q":"The unit of electric current is the:","a":["Volt","Ohm","Ampere","Watt"],"correct":2},{"id":"EI5-F","subject":"EI","q":"The unit of electric current is the:","a":["Volt","Ohm","Ampere","Watt"],"correct":2},{"id":"EI6-F","subject":"EI","q":"The unit of electric current is the:","a":["Volt","Ohm","Ampere","Watt"],"correct":2},{"id":"EI7-F","subject":"EI","q":"The unit of electric current is the:","a":["Volt","Ohm","Ampere","Watt"],"correct":2},{"id":"EI8-F","subject":"EI","q":"The unit of electric current is the:","a":["Volt","Ohm","Ampere","Watt"],"correct":2},{"id":"EI9-F","subject":"EI","q":"The unit of electric current is the:","a":["Volt","Ohm","Ampere","Watt"],"correct":2},{"id":"EI10-F","subject":"EI","q":"The unit of electric current is the:","a":["Volt","Ohm","Ampere","Watt"],"correct":2},{"id":"EI11-F","subject":"EI","q":"The unit of electric current is the:","a":["Volt","Ohm","Ampere","Watt"],"correct":2},{"id":"EI12-F","subject":"EI","q":"The unit of electric current is the:","a":["Volt","Ohm","Ampere","Watt"],"correct":2},{"id":"EI13-F","subject":"EI","q":"The unit of electric current is the:","a":["Volt","Ohm","Ampere","Watt"],"correct":2},{"id":"EI14-F","subject":"EI","q":"The unit of electric current is the:","a":["Volt","Ohm","Ampere","Watt"],"correct":2},{"id":"EI15-F","subject":"EI","q":"The unit of electric current is the:","a":["Volt","Ohm","Ampere","Watt"],"correct":2},{"id":"EI16-F","subject":"EI","q":"The unit of electric current is the:","a":["Volt","Ohm","Ampere","Watt"],"correct":2},{"id":"EI17-F","subject":"EI","q":"The unit of electric current is the:","a":["Volt","Ohm","Ampere","Watt"],"correct":2},{"id":"EI18-F","subject":"EI","q":"The unit of electric current is the:","a":["Volt","Ohm","Ampere","Watt"],"correct":2},{"id":"EI19-F","subject":"EI","q":"The unit of electric current is the:","a":["Volt","Ohm","Ampere","Watt"],"correct":2},{"id":"EI20-F","subject":"EI","q":"The unit of electric current is the:","a":["Volt","Ohm","Ampere","Watt"],"correct":2},{"id":"AS1-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS2-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS3-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS4-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS5-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS6-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS7-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS8-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS9-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS10-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS11-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS12-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS13-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS14-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS15-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS16-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS17-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS18-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS19-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS20-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS21-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS22-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS23-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS24-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"AS25-F","subject":"AS","q":"A torque wrench is primarily used to:","a":["cut wire","measure voltage","tighten bolts to spec","sand wood"],"correct":2},{"id":"MC1-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC2-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC3-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC4-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC5-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC6-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC7-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC8-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC9-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC10-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC11-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC12-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC13-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC14-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC15-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC16-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC17-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC18-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC19-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC20-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC21-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC22-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC23-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC24-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2},{"id":"MC25-F","subject":"MC","q":"Increasing a gear\u2019s radius generally ___ torque output.","a":["decreases","no change","increases","reverses"],"correct":2}]}</script>

<script>
window.getFullTestLength = window.getFullTestLength || function(){ return 200; };
</script>


<!-- ===== Recruiter Portal (Compact, Mobile-Friendly) ===== -->
<style>
  .rp-card{border:1px solid #2c3e50;border-radius:14px;padding:16px;margin:14px 0;box-shadow:0 4px 16px rgba(0,0,0,.08)}
  .rp-row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
  .rp-row>*{flex:1 1 180px}
  .rp-btn{padding:10px 14px;border-radius:10px;border:0;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,.08)}
  .rp-btn.primary{background:#0b5;color:#fff}
  .rp-btn.secondary{background:#f2f2f2}
  .rp-muted{opacity:.8;font-size:.9em}
  .rp-mono{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace}
  .rp-tag{display:inline-block;padding:2px 8px;border-radius:999px;background:#eef}
  @media (max-width:640px){ .rp-row{flex-direction:column} }
  .rp-table{width:100%;border-collapse:separate;border-spacing:0 6px}
  .rp-table th,.rp-table td{padding:8px 10px;text-align:left}
  .rp-table thead th{font-weight:600;border-bottom:1px solid #ddd}
</style>

<section id="recruiter-portal" style="margin-top:20px">
  

    
<div style="flex:0 0 auto">
      
    </div>
  </div>
  
</div>

        <div style="flex:0 0 auto">
          
        </div>
      </div>
      
    </div>

    <div class="rp-card" id="rp-console" style="display:none">
      <div class="rp-row">
        <div>
          <div class="rp-muted">Status</div>
          <div><span id="rp-status" class="rp-tag">Logged out</span></div>
        </div>
        <div style="flex:0 0 auto">
          <button id="rp-logout" class="rp-btn secondary">Logout</button>
        </div>
      </div>

      <details open>
        <summary><strong>Generate Applicant Code</strong></summary>
        <div class="rp-row" style="margin-top:8px">
          <div>
            <label class="rp-muted">New Code</label>
            <div id="rp-newcode" class="rp-mono" style="font-size:1.1em">—</div>
          </div>
          <div style="flex:0 0 auto;display:flex;gap:8px">
            <button id="rp-gen" class="rp-btn secondary">Generate</button>
            <button id="rp-copy" class="rp-btn primary">Copy Code</button>
          </div>
        </div>
        <div class="rp-muted" style="margin-top:6px">Codes are stored locally and shown to recruiters only.</div>
      </details>

      <details style="margin-top:12px">
        <summary><strong>Latest Results</strong></summary>
        <div class="rp-muted" style="margin:8px 0">Newest first. Auto‑updates when an applicant finishes a test.</div>
        <div style="overflow:auto">
          <table class="rp-table" id="rp-results">
            <thead><tr>
              <th>When</th><th>Applicant</th><th>Test</th>
              <th>AFQT%</th><th>Cat</th><th>VE</th><th>ARs</th><th>MKs</th><th>Composite</th>
            </tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </details>
    </div>
  </section>

<script>
// ===== Recruiter Portal JS (namespaced; non-invasive) =====
(function(){
  const NS = "afqt_app";
  const PASS = (window.RECRUITER_PASSCODE && String(window.RECRUITER_PASSCODE)) || "987654321"; // configurable; never displayed

  const els = {
    pass: null,
    login: document.getElementById("rp-login-min"),
    msg: document.getElementById("rp-login-msg"),
    console: document.getElementById("rp-console"),
    status: document.getElementById("rp-status"),
    logout: document.getElementById("rp-logout"),
    gen: document.getElementById("rp-gen"),
    copy: document.getElementById("rp-copy"),
    newcode: document.getElementById("rp-newcode"),
    table: document.querySelector("#rp-results tbody"),
  };

  const store = {
    get kLogin(){ return NS + "_recruiter_logged"; },
    get kCodes(){ return NS + "_codes"; },
    get kResults(){ return NS + "_results"; },
    read(name, fallback){ try{ return JSON.parse(localStorage.getItem(name) || "null") ?? fallback; }catch(_){ return fallback; } },
    write(name, val){ try{ localStorage.setItem(name, JSON.stringify(val)); }catch(_){ } },
    clear(){ localStorage.removeItem(this.kResults); localStorage.removeItem(this.kCodes); }
  };

  function setLogged(on){
    store.write(store.kLogin, !!on);
    els.console.style.display = on ? "" : "none";
    els.status.textContent = on ? "Logged in" : "Logged out";
    if(els.msg) els.msg.textContent = on ? "Access granted." : "";
  }
  function logged(){ return !!store.read(store.kLogin, false); }

  function genCode(){
    const code = String(Math.floor(100000 + Math.random()*900000));
    const all = store.read(store.kCodes, []);
    all.unshift({ code, ts: Date.now() });
    store.write(store.kCodes, all.slice(0, 200));
    els.newcode.textContent = code;
    return code;
  }

  function copyText(text){
    try{ navigator.clipboard.writeText(String(text)); els.msg.textContent = "Code copied."; }
    catch(_){
      const ta = document.createElement("textarea"); ta.value = String(text);
      document.body.appendChild(ta); ta.select(); document.execCommand("copy"); document.body.removeChild(ta);
      els.msg.textContent = "Code copied.";
    }
  }

  function fmt(ts){ return new Date(ts).toLocaleString(); }

  function refreshTable(){
    const rows = store.read(store.kResults, []);
    els.table.innerHTML = rows.map(r => `
      <tr>
        <td>${fmt(r.ts)}</td>
        <td>${r.applicant_name || r.applicant_id || "—"}</td>
        <td>${r.test_type || "—"}</td>
        <td><strong>${r.AFQT_percentile ?? r.AFQT ?? "—"}</strong></td>
        <td>${r.AFQT_category || "—"}</td>
        <td>${r.VE ?? "—"}</td>
        <td>${r.AR_scaled ?? "—"}</td>
        <td>${r.MK_scaled ?? "—"}</td>
        <td class="rp-mono">${r.Composite ?? "—"}</td>
      </tr>
    `).join("");
  }

  // Login / Logout
  els.login?.addEventListener("click", () => {
    const entry = window.prompt("Enter recruiter passcode:","");
    const ok = (entry || "").trim() === PASS;
    if (!ok){ els.msg.textContent = "Invalid code."; return; }
    setLogged(true);
    refreshTable();
  });
  els.logout?.addEventListener("click", () => setLogged(false));
  els.gen?.addEventListener("click", () => { if (!logged()) return els.msg.textContent = "Please login first."; genCode(); els.msg.textContent="New code generated."; });
  els.copy?.addEventListener("click", () => { if (!logged()) return els.msg.textContent = "Please login first."; const c = els.newcode.textContent.trim(); if (c && c!=="—") copyText(c); });

  // Public recorder API (safe)
  window.AFQT_RECORDER = window.AFQT_RECORDER || {};
  window.AFQT_RECORDER.record = function(entry){
    const arr = store.read(store.kResults, []);
    const withTs = Object.assign({ ts: Date.now() }, entry || {});
    arr.unshift(withTs);
    store.write(store.kResults, arr.slice(0, 500));
    refreshTable();
  };

  // Hook renderAfqtCard if present to auto-record results
  try{
    const _render = window.renderAfqtCard;
    if (typeof _render === "function"){
      window.renderAfqtCard = function(model){
        if (model){
          const rec = {
            applicant_id: model.applicant_id || model.code || model.passcode,
            applicant_name: model.name || model.applicant || null,
            test_type: model.test_type || model.test || null,
            VE: model.VE, AR_scaled: model.AR_scaled, MK_scaled: model.MK_scaled,
            Composite: model.AFQT_composite || model.Composite,
            AFQT_percentile: model.AFQT || model.AFQT_percentile,
            AFQT_category: model.AFQT_category
          };
          setTimeout(() => window.AFQT_RECORDER.record(rec), 0);
        }
        return _render.apply(this, arguments);
      };
    }
  }catch(e){ /* noop */ }

  // Initialize
  setLogged( (window.RECRUITER_LOGGED===true) || !!store.read(store.kLogin, false) );
  refreshTable();

  // Optional: expose a reset for you from console
  window.__AFQT_RESET__ = () => store.clear();
})();
</script>


<script>
/* ===== OFFICIAL-LIKE SCORING PATCH (override) ===== */
const __VE_TABLE = [
  { min:  0, max:  3, ve: 20 },
  { min:  4, max:  5, ve: 21 },
  { min:  6, max:  9, ve: 22 },
  { min: 10, max: 11, ve: 25 },
  { min: 12, max: 13, ve: 27 },
  { min: 14, max: 15, ve: 29 },
  { min: 16, max: 17, ve: 31 },
  { min: 18, max: 19, ve: 32 },
  { min: 20, max: 21, ve: 34 },
  { min: 22, max: 23, ve: 36 },
  { min: 24, max: 25, ve: 38 },
  { min: 26, max: 27, ve: 40 },
  { min: 28, max: 29, ve: 42 },
  { min: 30, max: 31, ve: 44 },
  { min: 32, max: 33, ve: 45 },
  { min: 34, max: 35, ve: 47 },
  { min: 36, max: 37, ve: 49 },
  { min: 38, max: 39, ve: 50 },
  { min: 40, max: 41, ve: 52 },
  { min: 42, max: 43, ve: 54 },
  { min: 44, max: 45, ve: 56 },
  { min: 46, max: 47, ve: 58 },
  { min: 48, max: 49, ve: 60 },
  { min: 50, max: 50, ve: 62 },
];

const __AR_RAW_TO_SCALED = [
  {minRaw:0,maxRaw:2,scaled:10},{minRaw:3,maxRaw:4,scaled:13},
  {minRaw:5,maxRaw:6,scaled:15},{minRaw:7,maxRaw:8,scaled:17},
  {minRaw:9,maxRaw:10,scaled:19},{minRaw:11,maxRaw:12,scaled:22},
  {minRaw:13,maxRaw:14,scaled:24},{minRaw:15,maxRaw:16,scaled:26},
  {minRaw:17,maxRaw:18,scaled:28},{minRaw:19,maxRaw:20,scaled:30},
  {minRaw:21,maxRaw:22,scaled:32},{minRaw:23,maxRaw:24,scaled:34},
  {minRaw:25,maxRaw:26,scaled:36},{minRaw:27,maxRaw:28,scaled:38},
  {minRaw:29,maxRaw:30,scaled:40},{minRaw:31,maxRaw:32,scaled:43},
  {minRaw:33,maxRaw:34,scaled:46},{minRaw:35,maxRaw:36,scaled:49},
  {minRaw:37,maxRaw:38,scaled:52},{minRaw:39,maxRaw:40,scaled:55},
  {minRaw:41,maxRaw:42,scaled:58},{minRaw:43,maxRaw:44,scaled:60},
  {minRaw:45,maxRaw:46,scaled:61},{minRaw:47,maxRaw:50,scaled:62}
];
const __MK_RAW_TO_SCALED = [
  {minRaw:0,maxRaw:2,scaled:10},{minRaw:3,maxRaw:4,scaled:13},
  {minRaw:5,maxRaw:6,scaled:15},{minRaw:7,maxRaw:8,scaled:17},
  {minRaw:9,maxRaw:10,scaled:19},{minRaw:11,maxRaw:12,scaled:21},
  {minRaw:13,maxRaw:14,scaled:23},{minRaw:15,maxRaw:16,scaled:25},
  {minRaw:17,maxRaw:18,scaled:27},{minRaw:19,maxRaw:20,scaled:29},
  {minRaw:21,maxRaw:22,scaled:31},{minRaw:23,maxRaw:24,scaled:33},
  {minRaw:25,maxRaw:26,scaled:35},{minRaw:27,maxRaw:28,scaled:37},
  {minRaw:29,maxRaw:30,scaled:39},{minRaw:31,maxRaw:32,scaled:42},
  {minRaw:33,maxRaw:34,scaled:45},{minRaw:35,maxRaw:36,scaled:48},
  {minRaw:37,maxRaw:38,scaled:51},{minRaw:39,maxRaw:40,scaled:54},
  {minRaw:41,maxRaw:42,scaled:57},{minRaw:43,maxRaw:44,scaled:59},
  {minRaw:45,maxRaw:46,scaled:61},{minRaw:47,maxRaw:50,scaled:62}
];

const __AFQT_RAW_TO_PERCENTILE = [
  { min: 80, max: 120, pct: 1 },
  { min: 121, max: 124, pct: 2 },
  { min: 125, max: 127, pct: 3 },
  { min: 128, max: 131, pct: 4 },
  { min: 132, max: 134, pct: 5 },
  { min: 135, max: 137, pct: 6 },
  { min: 138, max: 139, pct: 7 },
  { min: 140, max: 142, pct: 8 },
  { min: 143, max: 144, pct: 9 },
  { min: 145, max: 146, pct: 10 },
  { min: 147, max: 148, pct: 11 },
  { min: 149, max: 150, pct: 12 },
  { min: 151, max: 153, pct: 13 },
  { min: 154, max: 154, pct: 14 },
  { min: 155, max: 156, pct: 15 },
  { min: 157, max: 158, pct: 16 },
  { min: 159, max: 160, pct: 17 },
  { min: 161, max: 162, pct: 18 },
  { min: 163, max: 164, pct: 19 },
  { min: 165, max: 165, pct: 20 },
  { min: 166, max: 167, pct: 21 },
  { min: 168, max: 169, pct: 22 },
  { min: 170, max: 171, pct: 23 },
  { min: 172, max: 172, pct: 24 },
  { min: 173, max: 174, pct: 25 },
  { min: 175, max: 175, pct: 26 },
  { min: 176, max: 177, pct: 27 },
  { min: 178, max: 178, pct: 28 },
  { min: 179, max: 180, pct: 29 },
  { min: 181, max: 181, pct: 30 },
  { min: 182, max: 182, pct: 31 },
  { min: 183, max: 184, pct: 32 },
  { min: 185, max: 185, pct: 33 },
  { min: 186, max: 186, pct: 34 },
  { min: 187, max: 188, pct: 35 },
  { min: 189, max: 189, pct: 36 },
  { min: 190, max: 190, pct: 37 },
  { min: 191, max: 191, pct: 38 },
  { min: 192, max: 192, pct: 39 },
  { min: 193, max: 193, pct: 40 },
  { min: 194, max: 194, pct: 41 },
  { min: 195, max: 196, pct: 42 },
  { min: 197, max: 197, pct: 43 },
  { min: 198, max: 198, pct: 44 },
  { min: 199, max: 199, pct: 45 },
  { min: 200, max: 200, pct: 46 },
  { min: 201, max: 201, pct: 47 },
  { min: 202, max: 202, pct: 48 },
  { min: 203, max: 203, pct: 49 },
  { min: 204, max: 204, pct: 50 },
  { min: 205, max: 205, pct: 51 },
  { min: 206, max: 206, pct: 52 },
  { min: 207, max: 208, pct: 53 },
  { min: 209, max: 209, pct: 54 },
  { min: 210, max: 210, pct: 55 },
  { min: 211, max: 211, pct: 56 },
  { min: 212, max: 212, pct: 57 },
  { min: 213, max: 213, pct: 58 },
  { min: 214, max: 214, pct: 59 },
  { min: 215, max: 215, pct: 61 },
  { min: 216, max: 216, pct: 62 },
  { min: 217, max: 217, pct: 63 },
  { min: 218, max: 218, pct: 64 },
  { min: 219, max: 219, pct: 65 },
  { min: 220, max: 220, pct: 66 },
  { min: 221, max: 221, pct: 67 },
  { min: 222, max: 222, pct: 68 },
  { min: 223, max: 223, pct: 69 },
  { min: 224, max: 224, pct: 70 },
  { min: 225, max: 225, pct: 71 },
  { min: 226, max: 226, pct: 72 },
  { min: 227, max: 227, pct: 73 },
  { min: 228, max: 228, pct: 74 },
  { min: 229, max: 229, pct: 75 },
  { min: 230, max: 230, pct: 76 },
  { min: 231, max: 231, pct: 77 },
  { min: 232, max: 232, pct: 78 },
  { min: 233, max: 233, pct: 79 },
  { min: 234, max: 234, pct: 80 },
  { min: 235, max: 235, pct: 81 },
  { min: 236, max: 236, pct: 82 },
  { min: 237, max: 237, pct: 83 },
  { min: 238, max: 239, pct: 84 },
  { min: 240, max: 240, pct: 85 },
  { min: 241, max: 241, pct: 86 },
  { min: 242, max: 242, pct: 87 },
  { min: 243, max: 243, pct: 88 },
  { min: 244, max: 244, pct: 89 },
  { min: 245, max: 245, pct: 90 },
  { min: 246, max: 246, pct: 91 },
  { min: 247, max: 247, pct: 92 },
  { min: 248, max: 248, pct: 93 },
  { min: 249, max: 249, pct: 94 },
  { min: 250, max: 250, pct: 95 },
  { min: 251, max: 251, pct: 96 },
  { min: 252, max: 252, pct: 97 },
  { min: 253, max: 253, pct: 98 },
  { min: 254, max: 320, pct: 99 }
];

function __rangeLookup(table, value, minKey, maxKey, outKey){
  let last=null;
  for (const row of table){
    if (value >= row[minKey] && value <= row[maxKey]) return row[outKey];
    if (value >= row[minKey]) last = row[outKey];
  }
  return last;
}
function __veFromPCWK(sum){ return __rangeLookup(__VE_TABLE, sum, 'min', 'max', 've'); }
function __scaledFromRaw(tbl, raw){ return __rangeLookup(tbl, raw, 'minRaw', 'maxRaw', 'scaled'); }
function __afqtPctFromComposite(comp){ return __rangeLookup(__AFQT_RAW_TO_PERCENTILE, comp, 'min', 'max', 'pct') || 1; }

window.__old_computeAFQTPercentileFromResult = window.computeAFQTPercentileFromResult;
window.computeAFQTPercentileFromResult = function(r){
  if (!r || !r.sub) return null;
  // Accept either {sub:{AR:raw,...}} or {sub:{AR:{correct,total},...}}
  function norm(v){ return (v && typeof v==='object') ? Number(v.correct||0) : Number(v||0); }
  const AR_raw = norm(r.sub.AR), MK_raw = norm(r.sub.MK);
  const WK_raw = norm(r.sub.WK), PC_raw = norm(r.sub.PC);

  const ARs = __scaledFromRaw(__AR_RAW_TO_SCALED, AR_raw) || 1;
  const MKs = __scaledFromRaw(__MK_RAW_TO_SCALED, MK_raw) || 1;
  const VE  = __veFromPCWK(WK_raw + PC_raw) || 20;

  const composite = (2 * VE) + ARs + MKs;
  const percentile = __afqtPctFromComposite(composite);

  const info = { ve: VE, afqtRaw: composite, percentile, ARs, MKs };
  try { if (typeof updateUIWithAFQT === 'function') updateUIWithAFQT(info); } catch(e){}
  return info;
};
</script>

<script>
/* === Normalization pre-step for Short/Core (no scoring done here) === */
(function(){
  const FULL_LEN = { AR: 30, MK: 25, WK: 35, PC: 15 };
  function toFullRaw(correct, total, fullLen){
    if (!total || !fullLen) return 0;
    const pct = Math.max(0, Math.min(1, correct / total));
    return Math.max(0, Math.min(fullLen, Math.round(pct * fullLen)));
  }
  window.normalizeShortCore = function(result){
    const s = (result && result.sub) || {};
    return {
      sub: {
        AR: toFullRaw(Number(s.AR?.correct||0), Number(s.AR?.total||0), FULL_LEN.AR),
        MK: toFullRaw(Number(s.MK?.correct||0), Number(s.MK?.total||0), FULL_LEN.MK),
        WK: toFullRaw(Number(s.WK?.correct||0), Number(s.WK?.total||0), FULL_LEN.WK),
        PC: toFullRaw(Number(s.PC?.correct||0), Number(s.PC?.total||0), FULL_LEN.PC),
      },
      meta: { ...(result?.meta||{}), normalized:true }
    };
  };
  window.afqtFromAny = function(result){
    const r = (result?.meta?.mode === 'full') ? result : window.normalizeShortCore(result);
    return window.computeAFQTPercentileFromResult(r);
  };
})();
</script>

<script>
// Remove any dev/banner/debug/notes elements even if injected later
(function(){
  function isTarget(el){
    if(!el) return false;
    const idc  = (el.id||"").toLowerCase();
    const cls  = (el.className||"").toString().toLowerCase();
    const data = ((el.getAttribute('data-dev-note')||'')+(el.getAttribute('data-banner')||'')+(el.getAttribute('data-debug')||'')).toLowerCase();
    const txt  = (el.textContent||"").toLowerCase();
    const hitIdCls = /(dev\-?notes|devbanner|debug\-?notes|release\-?notes|\bbanner\b)/.test(idc+','+cls+','+data);
    const hitText  = /(developer\s*notes|debug|release\s*notes|template\s*preserves|smoke\s*test|build\s*\d+)/.test(txt);
    return hitIdCls || hitText;
  }
  function nuke(){
    try{
      const sel = 'details#dev-notes,#dev-notes,.dev-notes,.devBanner,.debug-notes,.release-notes,[data-dev-note],[data-banner],[data-debug],[id*="dev-notes" i],[class*="dev-notes" i],[id*="devbanner" i],[class*="devbanner" i],[id*="debug" i],[class*="debug" i],[id*="release-notes" i],[class*="release-notes" i]';
      document.querySelectorAll(sel).forEach(el=>{ try{ el.remove(); }catch{ el.style.display='none'; } });
      document.querySelectorAll('details, aside, pre, div, section').forEach(el=>{ try{ if(isTarget(el)) el.remove(); }catch(_){} });
    }catch(_){}
  }
  nuke();
  document.addEventListener('DOMContentLoaded', nuke);
  setTimeout(nuke, 200);
  setTimeout(nuke, 1000);
  try{ new MutationObserver(nuke).observe(document.documentElement||document.body,{childList:true,subtree:true}); }catch(_){}
})();
</script>

<script>
/* ===============================
   Question Bank Resolver (Auto)
   - Finds all candidate banks (window vars & JSON script tags)
   - Picks the newest/most complete
   - Binds to window.QUESTION_BANK so tests use it automatically
   =============================== */
(function(){
  function looksLikeQ(obj){
    if (!obj || typeof obj !== 'object') return false;
    const keys = Object.keys(obj);
    const hasQ = keys.some(k => /^(q|question|prompt|stem)$/i.test(k));
    const hasA = keys.some(k => /^(a|answers|options|choices)$/i.test(k));
    const hasS = keys.some(k => /^(subject|area|category|cat|section|topic)$/i.test(k));
    return hasQ && hasA && hasS;
  }
  function scoreName(name){
    // prefer names with dates or v-numbers
    let s = 0;
    if (/v(\d+)/i.test(name)) s += parseInt(RegExp.$1,10);
    const d = name.match(/(20\d{2})(\d{2})(\d{2})/);
    if (d){ s += (parseInt(d[1])*10000 + parseInt(d[2])*100 + parseInt(d[3])); }
    if (/latest|new|bank|qb/i.test(name)) s += 50;
    return s;
  }
  const cands = [];

  // 1) JSON script tags
  document.querySelectorAll('script[type="application/json"][id^="question-bank"]').forEach(el=>{
    try{
      const data = JSON.parse(el.textContent.trim());
      if (Array.isArray(data) && data.length && looksLikeQ(data[0])){
        cands.push({name: el.id || 'json-bank', arr: data, score: (data.meta?.version || 0), src:'json'});
      } else if (data && Array.isArray(data.items) && data.items.length && looksLikeQ(data.items[0])){
        cands.push({name: (el.id || 'json-bank') + ':items', arr: data.items, score: (data.version||0), src:'json'});
      }
    }catch(_){}
  });

  // 2) Window variables
  Object.keys(window).forEach(k=>{
    try{
      const v = window[k];
      if (Array.isArray(v) && v.length && looksLikeQ(v[0])){
        cands.push({name:k, arr:v, score: scoreName(k), src:'win'});
      }
    }catch(_){}
  });

  if (!cands.length){
    console.warn('[QB Resolver] No question banks detected.');
    return;
  }

  // Rank: most items, then highest scoreName, then keep existing if equal
  cands.sort((a,b)=>{
    if (b.arr.length !== a.arr.length) return b.arr.length - a.arr.length;
    if (b.score !== a.score) return b.score - a.score;
    return 0;
  });

  const chosen = cands[0];
  window.BANK_ACTIVE = chosen.arr;
  window.QUESTION_BANK = chosen.arr; // bind for legacy code
  // Rebuild subject groups if helper exists
  try {
    (function(){
      function normalizeSubj(s){
        if (!s) return 'UNKNOWN';
        s = String(s).trim().toUpperCase();
        const map = { 'ARITHMETIC REASONING':'AR','AR':'AR',
          'MATHEMATICS KNOWLEDGE':'MK','MK':'MK',
          'WORD KNOWLEDGE':'WK','WK':'WK',
          'PARAGRAPH COMPREHENSION':'PC','PC':'PC',
          'GENERAL SCIENCE':'GS','GS':'GS',
          'AUTO & SHOP':'AS','AUTO/SHOP':'AS','AS':'AS',
          'MECHANICAL COMPREHENSION':'MC','MC':'MC',
          'ELECTRONICS INFORMATION':'EI','EI':'EI' };
        return map[s] || s;
      }
      const groups = {};
      (window.BANK_ACTIVE||[]).forEach(q=>{
        const subj = normalizeSubj(q.subject || q.area || q.category || q.cat || q.section || q.topic);
        (groups[subj] = groups[subj] || []).push(q);
      });
      window.Q_GROUPS = groups;
      const counts = {}; Object.keys(groups).forEach(k=>counts[k]=groups[k].length);
      window.Q_SUBJECT_COUNTS = counts;
      console.log('[QB Resolver] Using bank:', chosen.name, 'items=', chosen.arr.length, 'counts=', counts);
    })();
  } catch(_){}

  // Soft signal for UI: adds data attribute to body
  try { document.body.setAttribute('data-qb', chosen.name+'('+chosen.arr.length+')'); } catch(_){}
})();
</script>

<script>
/* =====================================================
   Permanent Delete + Vacuum Module
   - Hard-deletes applicants & test scores from storage
   - Prevents "ghost reappearance" by scrubbing all keys
   - Optional tiny UI attaches in recruiter console if found
   ===================================================== */
(function(){
  const KEY_HINTS = [
    'asvab', 'ASVAB', 'afqt', 'AFQT', 'recruit', 'applicant',
    'applicants', 'results', 'scores', 'codes', 'generatedCodes',
    'latestResults', 'recordedApplicants', 'AFQT_HISTORY', 'BANK_ACTIVE'
  ];

  // Utility: safe JSON
  function jget(v){ try { return JSON.parse(v); } catch(_){ return null; } }
  function jset(o){ try { return JSON.stringify(o); } catch(_){ return '[]'; } }

  // Enumerate all localStorage keys likely used by the app
  function candidateKeys(){
    const keys = [];
    for (let i=0;i<localStorage.length;i++){
      const k = localStorage.key(i);
      const low = (k||'').toLowerCase();
      if (KEY_HINTS.some(h=> low.includes(h.toLowerCase()))) keys.push(k);
    }
    return keys;
  }

  // Vacuum: scrub deleted passcodes and remove empty arrays/objs
  function vacuum(tomb){
    const tombset = new Set((tomb||[]).map(String));
    const keys = candidateKeys();
    let removed = 0, cleaned = 0;
    keys.forEach(k=>{
      const val = localStorage.getItem(k);
      if (!val) return;
      let obj = jget(val);
      if (!obj){ return; }
      let before = JSON.stringify(obj).length;

      function stripFromArray(arr){
        if (!Array.isArray(arr)) return arr;
        return arr.filter(r=>{
          // Try to detect a passcode/uid in common fields
          const code = (r && (r.code||r.passcode||r.passCode||r.applicantCode||r.uid||r.id));
          return !tombset.has(String(code||''));
        });
      }

      if (Array.isArray(obj)){
        obj = stripFromArray(obj);
      } else if (obj && typeof obj==='object'){
        // Common shapes { list: [...] } or { items: [...] } or keyed by code
        if (Array.isArray(obj.list)) obj.list = stripFromArray(obj.list);
        if (Array.isArray(obj.items)) obj.items = stripFromArray(obj.items);
        Object.keys(obj).forEach(key=>{
          const val = obj[key];
          if (Array.isArray(val)) obj[key] = stripFromArray(val);
          // If keyed by code: remove tombstoned keys
          if (val && typeof val==='object' && !Array.isArray(val)){
            Object.keys(val).forEach(subKey=>{
              if (tombset.has(String(subKey))) delete val[subKey];
            });
          }
        });
      }

      const afterStr = jset(obj);
      if (afterStr === '[]' || afterStr === '{}' || afterStr === 'null' || afterStr === '""'){
        localStorage.removeItem(k); removed++;
      } else {
        localStorage.setItem(k, afterStr);
        if (afterStr.length !== before) cleaned++;
      }
    });
    return {removed, cleaned, keys};
  }

  // HARD DELETE by passcode(s)
  function hardDeleteByCodes(codes){
    const tombKey = 'asvab:tombstones';
    const tomb = jget(localStorage.getItem(tombKey)) || [];
    const add = (Array.isArray(codes) ? codes : [codes]).filter(Boolean).map(String);
    add.forEach(c=>{ if (!tomb.includes(c)) tomb.push(c); });
    localStorage.setItem(tombKey, jset(tomb));

    // scrub now
    const res = vacuum(tomb);
    // also remove any direct keys containing the codes in their key names
    (Array.isArray(add)?add:[add]).forEach(code=>{
      for (let i=localStorage.length-1;i>=0;i--){
        const k = localStorage.key(i);
        if (k && k.toLowerCase().includes(String(code).toLowerCase())){
          localStorage.removeItem(k);
          res.removed++;
        }
      }
    });
    return { ok:true, ...res, tombCount: tomb.length };
  }

  // HARD DELETE EVERYTHING (applicants & scores)
  function hardDeleteAll(){
    const tombKey = 'asvab:tombstones';
    const keys = candidateKeys();
    let removed = 0;
    keys.forEach(k=>{ try{ localStorage.removeItem(k); removed++; }catch(_){ } });
    // also clear session storage hints
    try{ sessionStorage.clear(); }catch(_){}
    // keep tombstones so ghosts won't rehydrate
    localStorage.setItem(tombKey, jset([]));
    return { ok:true, removed };
  }

  // Try to clean any ghost data on load (one-time)
  try{
    const tomb = jget(localStorage.getItem('asvab:tombstones')) || [];
    vacuum(tomb);
  }catch(_){}

  // Expose API
  window.ASVAB_STORE = {
    listKeys: candidateKeys,
    hardDeleteByCodes,
    hardDeleteAll,
    vacuum: () => vacuum(jget(localStorage.getItem('asvab:tombstones')) || [])
  };

  // Optional Tiny UI hook (only if recruiter console exists)
  function attachMiniUI(){
    const host = document.querySelector('#recruiter, #recruiterConsole, #recruiter-portal, #recruiterPortal');
    if (!host) return;
    if (host.querySelector('.asvab-purge-ui')) return;
    const box = document.createElement('div');
    box.className = 'asvab-purge-ui';
    box.style.cssText = 'margin-top:8px;padding:8px;border:1px dashed #334155;border-radius:10px;background:#0b1220;';
    box.innerHTML = '<div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">' +
      '<strong style="font-size:12px;opacity:.8">Records:</strong>' +
      '<button id="btn-purge-all" class="btn btn-danger" style="padding:6px 10px;border-radius:8px">Delete ALL</button>' +
      '<input id="del-code" placeholder="Code to delete" style="padding:6px 10px;border-radius:8px;background:#111827;color:#e5e7eb;border:1px solid #334155"/>' +
      '<button id="btn-purge-one" class="btn" style="padding:6px 10px;border-radius:8px;background:#16a34a;color:white">Delete Code</button>' +
      '<span id="purge-msg" style="font-size:12px;opacity:.7;margin-left:8px"></span>' +
      '</div>';
    host.appendChild(box);
    const msg = box.querySelector('#purge-msg');
    box.querySelector('#btn-purge-all').onclick = function(){
      if (!confirm('Permanently delete ALL applicants and scores? This cannot be undone.')) return;
      const r = window.ASVAB_STORE.hardDeleteAll();
      msg.textContent = `Deleted ${r.removed} storage keys.`;
    };
    box.querySelector('#btn-purge-one').onclick = function(){
      const v = box.querySelector('#del-code').value.trim();
      if (!v) return msg.textContent = 'Enter a code.';
      const r = window.ASVAB_STORE.hardDeleteByCodes(v);
      msg.textContent = `Cleaned keys=${r.keys.length}, removed=${r.removed}, cleaned=${r.cleaned}.`;
    };
  }

  document.addEventListener('DOMContentLoaded', attachMiniUI);
  setTimeout(attachMiniUI, 600);
})();
</script>

<style>
/* Hide any legacy percentage badges inside the subtest breakdown */
#subtest-breakdown-content .pct,
#subtest-breakdown-content .percent,
#subtest-breakdown-content [data-pct],
#subtest-breakdown-content .subtest-pct { display:none !important; }
</style>
<script>
/* ==== Detailed Results: show counts only (no % for AR/MK/WK/PC) ==== */
(function(){
  // Keep last raw counts so we can render even if normalization runs later
  window.__LAST_COUNTS = window.__LAST_COUNTS || null;

  function extractCounts(sub){
    function normObj(o){ 
      if (!o) return {correct:0,total:0};
      if (typeof o === 'number') return {correct:o,total:o}; // fallback
      return {correct: Number(o.correct||0), total: Number(o.total||0)};
    }
    return {
      AR: normObj(sub && sub.AR),
      MK: normObj(sub && sub.MK),
      WK: normObj(sub && sub.WK),
      PC: normObj(sub && sub.PC),
    };
  }

  function renderCounts(){
    var box = document.getElementById('subtest-breakdown-content');
    if (!box){
      // Create a section under applicant panel as a fallback
      var host = document.querySelector('#applicant') || document.body;
      var card = document.createElement('div');
      card.className = 'card';
      card.style.marginTop = '12px';
      card.innerHTML = '<div class="card-header">AFQT Subtests</div><div class="card-body"><div id="subtest-breakdown-content"></div></div>';
      host.appendChild(card);
      box = card.querySelector('#subtest-breakdown-content');
    }
    if (!window.__LAST_COUNTS) return;

    function line(lbl, obj){
      const c = Number(obj.correct||0), t = Number(obj.total||0);
      return `<div class="row"><div class="col"><strong>${lbl}</strong></div><div class="col" style="text-align:right">${c} / ${t}</div></div>`;
    }

    const c = window.__LAST_COUNTS;
    box.innerHTML = [
      line('WK', c.WK),
      line('PC', c.PC),
      line('AR', c.AR),
      line('MK', c.MK)
    ].join('');
  }

  // Wrap afqtFromAny to record counts pre-normalization
  if (typeof window.afqtFromAny === 'function'){
    const __old = window.afqtFromAny;
    window.afqtFromAny = function(result){
      try{ window.__LAST_COUNTS = extractCounts(result && result.sub); }catch(_){}
      const out = __old.apply(this, arguments);
      try{ renderCounts(); }catch(_){}
      return out;
    };
  }

  // Also wrap computeAFQTPercentileFromResult for flows that bypass afqtFromAny
  if (typeof window.computeAFQTPercentileFromResult === 'function'){
    const __old2 = window.computeAFQTPercentileFromResult;
    window.computeAFQTPercentileFromResult = function(result){
      // If detailed sub objects exist, capture
      try{ if (result && result.sub && typeof result.sub.AR === 'object') window.__LAST_COUNTS = extractCounts(result.sub); }catch(_){}
      const out = __old2.apply(this, arguments);
      try{ renderCounts(); }catch(_){}
      return out;
    };
  }

  // Render if page already has counts stored
  document.addEventListener('DOMContentLoaded', function(){ try{ renderCounts(); }catch(_){} });
  setTimeout(function(){ try{ renderCounts(); }catch(_){} }, 800);
})();
</script>

<style>
/* Scaled scores card styling */
#afqt-scaled-card .row { display:flex; justify-content:space-between; padding:4px 0; }
#afqt-scaled-card .key { opacity:.85; }
#afqt-scaled-card .val { font-weight:700; }
</style>
<script>
/* ==== Show Scaled Numbers (no % for subtests), keep AFQT ====
   - Displays: raw counts (WK/PC/AR/MK)
               scaled: VE (20–62), ARs (1–62), MKs (1–62)
               AFQT: composite + percentile (kept)
*/
(function(){
  // Ensure we have a place to render
  function ensureScaledCard(){
    var box = document.getElementById('afqt-scaled-card');
    if (box) return box;
    // Prefer to add under existing results
    var host = document.querySelector('#applicant, #results, #afqt-results, .results, .cards') || document.body;
    var card = document.createElement('div');
    card.className = 'card';
    card.id = 'afqt-scaled-card';
    card.style.marginTop = '12px';
    card.innerHTML = '<div class="card-header">AFQT Scoring (Official Inputs)</div>'+
      '<div class="card-body">'+
      '<div id="afqt-scaled-content"></div>'+
      '</div>';
    host.appendChild(card);
    return card;
  }

  function renderScaled(info){
    if (!info) return;
    const card = ensureScaledCard();
    const el = card.querySelector('#afqt-scaled-content');
    // Pull last raw counts captured by previous patch
    const c = (window.__LAST_COUNTS) || {WK:{correct:0,total:0},PC:{correct:0,total:0},AR:{correct:0,total:0},MK:{correct:0,total:0}};
    const ve = Number(info.ve || 0);
    const ARs = Number(info.ARs || 0);
    const MKs = Number(info.MKs || 0);
    const composite = Number(info.afqtRaw || 0);
    const pct = Number(info.percentile || 0);

    // Build rows
    function r(k,v){ return '<div class="row"><div class="key">'+k+'</div><div class="val">'+v+'</div></div>'; }
    el.innerHTML = [
      '<div style="opacity:.8;margin:0 0 6px 0">Raw Counts (no %):</div>',
      r('WK', `${c.WK.correct||0} / ${c.WK.total||0}`),
      r('PC', `${c.PC.correct||0} / ${c.PC.total||0}`),
      r('AR', `${c.AR.correct||0} / ${c.AR.total||0}`),
      r('MK', `${c.MK.correct||0} / ${c.MK.total||0}`),
      '<hr style="border-color:#1f2937">',
      '<div style="opacity:.8;margin:6px 0">Scaled Inputs to AFQT:</div>',
      r('VE (from WK+PC)', ve),
      r('AR (scaled)', ARs),
      r('MK (scaled)', MKs),
      '<hr style="border-color:#1f2937">',
      '<div style="opacity:.8;margin:6px 0">AFQT:</div>',
      r('Composite (2×VE + AR + MK)', composite),
      r('Percentile', pct + '%')
    ].join('');
  }

  // Hook into AFQT pipeline outputs
  // 1) Our overridden official pipeline returns {ve, ARs, MKs, afqtRaw, percentile}
  if (typeof window.computeAFQTPercentileFromResult === 'function'){
    const __old = window.computeAFQTPercentileFromResult;
    window.computeAFQTPercentileFromResult = function(r){
      const out = __old.apply(this, arguments);
      try { renderScaled(out); } catch(_){}
      return out;
    };
  }

  // 2) Also hook afqtFromAny (short/core normalization funnel)
  if (typeof window.afqtFromAny === 'function'){
    const __old2 = window.afqtFromAny;
    window.afqtFromAny = function(r){
      const out = __old2.apply(this, arguments);
      try { renderScaled(out); } catch(_){}
      return out;
    };
  }
})();
</script>

<script>
/* ===== Question Bank Resolver — FORCE BIND (v2) =====
   Ensures ALL test builders use the newest bank.
*/
(function(){
  function looksLikeQ(obj){
    if (!obj || typeof obj !== 'object') return false;
    const k = Object.keys(obj);
    const hasQ = k.some(x=> /^(q|question|prompt|stem)$/i.test(x));
    const hasA = k.some(x=> /^(a|answers|options|choices)$/i.test(x));
    const hasS = k.some(x=> /^(subject|area|category|cat|section|topic)$/i.test(x));
    return hasQ && hasA && hasS;
  }
  function scoreName(name){
    let s = 0;
    if (/v(\d+)/i.test(name)) s += parseInt(RegExp.$1,10);
    const d = name.match(/(20\d{2})(\d{2})(\d{2})/);
    if (d){ s += (parseInt(d[1])*10000 + parseInt(d[2])*100 + parseInt(d[3])); }
    if (/latest|new|bank|qb/i.test(name)) s += 50;
    return s;
  }
  const cands = [];

  // 1) JSON script tags
  document.querySelectorAll('script[type="application/json"]').forEach(el=>{
    const id = el.id || '';
    if (!/question[-_ ]?bank|qb|items/i.test(id)) return;
    try{
      const data = JSON.parse(el.textContent.trim());
      let arr = null;
      if (Array.isArray(data) && data.length && looksLikeQ(data[0])) arr = data;
      if (!arr && data && Array.isArray(data.items) && data.items.length && looksLikeQ(data.items[0])) arr = data.items;
      if (arr) cands.push({name:id||'json-bank', arr, score: scoreName(id), src:'json'});
    }catch(_){}
  });

  // 2) Window variables
  Object.keys(window).forEach(k=>{
    try{
      const v = window[k];
      if (Array.isArray(v) && v.length && looksLikeQ(v[0])){
        cands.push({name:k, arr:v, score: scoreName(k), src:'win'});
      }
    }catch(_){}
  });

  if (!cands.length){ console.warn('[QB Resolver v2] No banks found.'); return; }

  cands.sort((a,b)=> (b.arr.length - a.arr.length) || (b.score - a.score));
  const chosen = cands[0];

  // Bind chosen to all known aliases so legacy code can't miss it
  const aliases = [
    'QUESTION_BANK','BANK','BANK_ACTIVE','ALL_QUESTIONS','QB','ITEMS','DATA_BANK','QUESTION_BANK_V2','QUESTION_BANK_LATEST'
  ];
  aliases.forEach(k=>{ try{ window[k] = chosen.arr; }catch(_){}});
  window.BANK_ACTIVE = chosen.arr;
  window.QUESTION_BANK = chosen.arr;

  // Aggressive rebind: if a smaller legacy bank exists, overwrite it by reference
  Object.keys(window).forEach(k=>{
    try{
      const v = window[k];
      if (Array.isArray(v) && v.length && looksLikeQ(v[0]) && v.length < chosen.arr.length){
        window[k] = chosen.arr;
      }
    }catch(_){}
  });

  // Hook start buttons to guarantee chosen bank at test time
  function lockAtStart(){
    (['startFull','startCore','startShort','btnStart','startBtn']).forEach(id=>{
      const el = document.getElementById(id);
      if (!el) return;
      if (el.__boundQB) return; el.__boundQB = true;
      el.addEventListener('click', function(){
        aliases.forEach(k=>{ try{ window[k] = chosen.arr; }catch(_){} });
        window.BANK_ACTIVE = chosen.arr;
        window.QUESTION_BANK = chosen.arr;
      }, true);
    });
  }
  document.addEventListener('DOMContentLoaded', lockAtStart);
  setTimeout(lockAtStart, 600);

  // Rebuild subject groups
  try{
    function normalizeSubj(s){
      if (!s) return 'UNKNOWN';
      s = String(s).trim().toUpperCase();
      const map = { 'ARITHMETIC REASONING':'AR','AR':'AR',
        'MATHEMATICS KNOWLEDGE':'MK','MK':'MK',
        'WORD KNOWLEDGE':'WK','WK':'WK',
        'PARAGRAPH COMPREHENSION':'PC','PC':'PC',
        'GENERAL SCIENCE':'GS','GS':'GS',
        'AUTO & SHOP':'AS','AUTO/SHOP':'AS','AS':'AS',
        'MECHANICAL COMPREHENSION':'MC','MC':'MC',
        'ELECTRONICS INFORMATION':'EI','EI':'EI' };
      return map[s] || s;
    }
    const groups = {};
    (chosen.arr||[]).forEach(q=>{
      const subj = normalizeSubj(q.subject || q.area || q.category || q.cat || q.section || q.topic);
      (groups[subj] = groups[subj] || []).push(q);
    });
    window.Q_GROUPS = groups;
    const counts = {}; Object.keys(groups).forEach(k=>counts[k]=groups[k].length);
    window.Q_SUBJECT_COUNTS = counts;
    console.log('[QB Resolver v2] Using bank:', chosen.name, 'items=', chosen.arr.length, counts);
  }catch(_){}
})();
</script>

<script>
/* ===== Emphasize "Right / Total" and AFQT-subject totals ===== */
(function(){
  function ensureHeader(){
    var container = document.getElementById('subtest-breakdown-content');
    if (!container) return null;
    // Insert a heading row if absent
    if (!container.querySelector('.afqt-counts-header')){
      const h = document.createElement('div');
      h.className = 'afqt-counts-header';
      h.style.cssText = 'margin:6px 0 4px 0; font-weight:600; opacity:.9';
      h.textContent = 'Correct / Total';
      container.prepend(h);
    }
    return container;
  }
  function sumCounts(c){ return ['WK','PC','AR','MK'].reduce((acc,k)=> acc + Number(c[k]?.correct||0), 0); }
  function sumTotals(c){ return ['WK','PC','AR','MK'].reduce((acc,k)=> acc + Number(c[k]?.total||0), 0); }

  function renderTotals(){
    const box = document.getElementById('subtest-breakdown-content');
    if (!box || !window.__LAST_COUNTS) return;
    ensureHeader();
    const c = window.__LAST_COUNTS;
    let tot = document.getElementById('afqt-counts-total');
    if (!tot){
      tot = document.createElement('div');
      tot.id = 'afqt-counts-total';
      tot.style.cssText = 'margin-top:6px;border-top:1px solid #1f2937;padding-top:6px;display:flex;justify-content:space-between';
      box.appendChild(tot);
    }
    tot.innerHTML = '<div><strong>Total (AFQT)</strong></div><div style="text-align:right">'+
      sumCounts(c) + ' / ' + sumTotals(c) + '</div>';
  }

  // Re-render when AFQT pipeline runs
  const hook = function(){
    try{ renderTotals(); }catch(_){}
  };
  document.addEventListener('DOMContentLoaded', hook);
  setTimeout(hook, 800);

  // Also hook our earlier AFQT functions if present
  ['computeAFQTPercentileFromResult','afqtFromAny'].forEach(fn=>{
    if (typeof window[fn] === 'function'){
      const old = window[fn];
      window[fn] = function(){
        const r = old.apply(this, arguments);
        try{ renderTotals(); }catch(_){}
        return r;
      };
    }
  });
})();
</script>
</body>
</html>
